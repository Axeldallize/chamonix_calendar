(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var rl={exports:{}},ms={},sl={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed;function zp(){if(Ed)return ie;Ed=1;var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.iterator;function E(b){return b===null||typeof b!="object"?null:(b=x&&b[x]||b["@@iterator"],typeof b=="function"?b:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,P={};function N(b,I,re){this.props=b,this.context=I,this.refs=P,this.updater=re||k}N.prototype.isReactComponent={},N.prototype.setState=function(b,I){if(typeof b!="object"&&typeof b!="function"&&b!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,b,I,"setState")},N.prototype.forceUpdate=function(b){this.updater.enqueueForceUpdate(this,b,"forceUpdate")};function L(){}L.prototype=N.prototype;function M(b,I,re){this.props=b,this.context=I,this.refs=P,this.updater=re||k}var R=M.prototype=new L;R.constructor=M,C(R,N.prototype),R.isPureReactComponent=!0;var B=Array.isArray,ne=Object.prototype.hasOwnProperty,J={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function ye(b,I,re){var oe,ue={},ce=null,we=null;if(I!=null)for(oe in I.ref!==void 0&&(we=I.ref),I.key!==void 0&&(ce=""+I.key),I)ne.call(I,oe)&&!se.hasOwnProperty(oe)&&(ue[oe]=I[oe]);var fe=arguments.length-2;if(fe===1)ue.children=re;else if(1<fe){for(var Ee=Array(fe),ut=0;ut<fe;ut++)Ee[ut]=arguments[ut+2];ue.children=Ee}if(b&&b.defaultProps)for(oe in fe=b.defaultProps,fe)ue[oe]===void 0&&(ue[oe]=fe[oe]);return{$$typeof:s,type:b,key:ce,ref:we,props:ue,_owner:J.current}}function ve(b,I){return{$$typeof:s,type:b.type,key:I,ref:b.ref,props:b.props,_owner:b._owner}}function ae(b){return typeof b=="object"&&b!==null&&b.$$typeof===s}function $e(b){var I={"=":"=0",":":"=2"};return"$"+b.replace(/[=:]/g,function(re){return I[re]})}var qe=/\/+/g;function Ie(b,I){return typeof b=="object"&&b!==null&&b.key!=null?$e(""+b.key):I.toString(36)}function Ze(b,I,re,oe,ue){var ce=typeof b;(ce==="undefined"||ce==="boolean")&&(b=null);var we=!1;if(b===null)we=!0;else switch(ce){case"string":case"number":we=!0;break;case"object":switch(b.$$typeof){case s:case n:we=!0}}if(we)return we=b,ue=ue(we),b=oe===""?"."+Ie(we,0):oe,B(ue)?(re="",b!=null&&(re=b.replace(qe,"$&/")+"/"),Ze(ue,I,re,"",function(ut){return ut})):ue!=null&&(ae(ue)&&(ue=ve(ue,re+(!ue.key||we&&we.key===ue.key?"":(""+ue.key).replace(qe,"$&/")+"/")+b)),I.push(ue)),1;if(we=0,oe=oe===""?".":oe+":",B(b))for(var fe=0;fe<b.length;fe++){ce=b[fe];var Ee=oe+Ie(ce,fe);we+=Ze(ce,I,re,Ee,ue)}else if(Ee=E(b),typeof Ee=="function")for(b=Ee.call(b),fe=0;!(ce=b.next()).done;)ce=ce.value,Ee=oe+Ie(ce,fe++),we+=Ze(ce,I,re,Ee,ue);else if(ce==="object")throw I=String(b),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return we}function At(b,I,re){if(b==null)return b;var oe=[],ue=0;return Ze(b,oe,"","",function(ce){return I.call(re,ce,ue++)}),oe}function nt(b){if(b._status===-1){var I=b._result;I=I(),I.then(function(re){(b._status===0||b._status===-1)&&(b._status=1,b._result=re)},function(re){(b._status===0||b._status===-1)&&(b._status=2,b._result=re)}),b._status===-1&&(b._status=0,b._result=I)}if(b._status===1)return b._result.default;throw b._result}var je={current:null},z={transition:null},ee={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:z,ReactCurrentOwner:J};function q(){throw Error("act(...) is not supported in production builds of React.")}return ie.Children={map:At,forEach:function(b,I,re){At(b,function(){I.apply(this,arguments)},re)},count:function(b){var I=0;return At(b,function(){I++}),I},toArray:function(b){return At(b,function(I){return I})||[]},only:function(b){if(!ae(b))throw Error("React.Children.only expected to receive a single React element child.");return b}},ie.Component=N,ie.Fragment=r,ie.Profiler=l,ie.PureComponent=M,ie.StrictMode=o,ie.Suspense=m,ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,ie.act=q,ie.cloneElement=function(b,I,re){if(b==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+b+".");var oe=C({},b.props),ue=b.key,ce=b.ref,we=b._owner;if(I!=null){if(I.ref!==void 0&&(ce=I.ref,we=J.current),I.key!==void 0&&(ue=""+I.key),b.type&&b.type.defaultProps)var fe=b.type.defaultProps;for(Ee in I)ne.call(I,Ee)&&!se.hasOwnProperty(Ee)&&(oe[Ee]=I[Ee]===void 0&&fe!==void 0?fe[Ee]:I[Ee])}var Ee=arguments.length-2;if(Ee===1)oe.children=re;else if(1<Ee){fe=Array(Ee);for(var ut=0;ut<Ee;ut++)fe[ut]=arguments[ut+2];oe.children=fe}return{$$typeof:s,type:b.type,key:ue,ref:ce,props:oe,_owner:we}},ie.createContext=function(b){return b={$$typeof:h,_currentValue:b,_currentValue2:b,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},b.Provider={$$typeof:c,_context:b},b.Consumer=b},ie.createElement=ye,ie.createFactory=function(b){var I=ye.bind(null,b);return I.type=b,I},ie.createRef=function(){return{current:null}},ie.forwardRef=function(b){return{$$typeof:f,render:b}},ie.isValidElement=ae,ie.lazy=function(b){return{$$typeof:v,_payload:{_status:-1,_result:b},_init:nt}},ie.memo=function(b,I){return{$$typeof:g,type:b,compare:I===void 0?null:I}},ie.startTransition=function(b){var I=z.transition;z.transition={};try{b()}finally{z.transition=I}},ie.unstable_act=q,ie.useCallback=function(b,I){return je.current.useCallback(b,I)},ie.useContext=function(b){return je.current.useContext(b)},ie.useDebugValue=function(){},ie.useDeferredValue=function(b){return je.current.useDeferredValue(b)},ie.useEffect=function(b,I){return je.current.useEffect(b,I)},ie.useId=function(){return je.current.useId()},ie.useImperativeHandle=function(b,I,re){return je.current.useImperativeHandle(b,I,re)},ie.useInsertionEffect=function(b,I){return je.current.useInsertionEffect(b,I)},ie.useLayoutEffect=function(b,I){return je.current.useLayoutEffect(b,I)},ie.useMemo=function(b,I){return je.current.useMemo(b,I)},ie.useReducer=function(b,I,re){return je.current.useReducer(b,I,re)},ie.useRef=function(b){return je.current.useRef(b)},ie.useState=function(b){return je.current.useState(b)},ie.useSyncExternalStore=function(b,I,re){return je.current.useSyncExternalStore(b,I,re)},ie.useTransition=function(){return je.current.useTransition()},ie.version="18.3.1",ie}var bd;function Tl(){return bd||(bd=1,sl.exports=zp()),sl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Td;function Fp(){if(Td)return ms;Td=1;var s=Tl(),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function h(f,m,g){var v,x={},E=null,k=null;g!==void 0&&(E=""+g),m.key!==void 0&&(E=""+m.key),m.ref!==void 0&&(k=m.ref);for(v in m)o.call(m,v)&&!c.hasOwnProperty(v)&&(x[v]=m[v]);if(f&&f.defaultProps)for(v in m=f.defaultProps,m)x[v]===void 0&&(x[v]=m[v]);return{$$typeof:n,type:f,key:E,ref:k,props:x,_owner:l.current}}return ms.Fragment=r,ms.jsx=h,ms.jsxs=h,ms}var Cd;function Wp(){return Cd||(Cd=1,rl.exports=Fp()),rl.exports}var w=Wp(),ge=Tl(),zi={},il={exports:{}},lt={},ol={exports:{}},al={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Od;function qp(){return Od||(Od=1,(function(s){function n(z,ee){var q=z.length;z.push(ee);e:for(;0<q;){var b=q-1>>>1,I=z[b];if(0<l(I,ee))z[b]=ee,z[q]=I,q=b;else break e}}function r(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var ee=z[0],q=z.pop();if(q!==ee){z[0]=q;e:for(var b=0,I=z.length,re=I>>>1;b<re;){var oe=2*(b+1)-1,ue=z[oe],ce=oe+1,we=z[ce];if(0>l(ue,q))ce<I&&0>l(we,ue)?(z[b]=we,z[ce]=q,b=ce):(z[b]=ue,z[oe]=q,b=oe);else if(ce<I&&0>l(we,q))z[b]=we,z[ce]=q,b=ce;else break e}}return ee}function l(z,ee){var q=z.sortIndex-ee.sortIndex;return q!==0?q:z.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var h=Date,f=h.now();s.unstable_now=function(){return h.now()-f}}var m=[],g=[],v=1,x=null,E=3,k=!1,C=!1,P=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(z){for(var ee=r(g);ee!==null;){if(ee.callback===null)o(g);else if(ee.startTime<=z)o(g),ee.sortIndex=ee.expirationTime,n(m,ee);else break;ee=r(g)}}function B(z){if(P=!1,R(z),!C)if(r(m)!==null)C=!0,nt(ne);else{var ee=r(g);ee!==null&&je(B,ee.startTime-z)}}function ne(z,ee){C=!1,P&&(P=!1,L(ye),ye=-1),k=!0;var q=E;try{for(R(ee),x=r(m);x!==null&&(!(x.expirationTime>ee)||z&&!$e());){var b=x.callback;if(typeof b=="function"){x.callback=null,E=x.priorityLevel;var I=b(x.expirationTime<=ee);ee=s.unstable_now(),typeof I=="function"?x.callback=I:x===r(m)&&o(m),R(ee)}else o(m);x=r(m)}if(x!==null)var re=!0;else{var oe=r(g);oe!==null&&je(B,oe.startTime-ee),re=!1}return re}finally{x=null,E=q,k=!1}}var J=!1,se=null,ye=-1,ve=5,ae=-1;function $e(){return!(s.unstable_now()-ae<ve)}function qe(){if(se!==null){var z=s.unstable_now();ae=z;var ee=!0;try{ee=se(!0,z)}finally{ee?Ie():(J=!1,se=null)}}else J=!1}var Ie;if(typeof M=="function")Ie=function(){M(qe)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,At=Ze.port2;Ze.port1.onmessage=qe,Ie=function(){At.postMessage(null)}}else Ie=function(){N(qe,0)};function nt(z){se=z,J||(J=!0,Ie())}function je(z,ee){ye=N(function(){z(s.unstable_now())},ee)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(z){z.callback=null},s.unstable_continueExecution=function(){C||k||(C=!0,nt(ne))},s.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<z?Math.floor(1e3/z):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_getFirstCallbackNode=function(){return r(m)},s.unstable_next=function(z){switch(E){case 1:case 2:case 3:var ee=3;break;default:ee=E}var q=E;E=ee;try{return z()}finally{E=q}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(z,ee){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var q=E;E=z;try{return ee()}finally{E=q}},s.unstable_scheduleCallback=function(z,ee,q){var b=s.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?b+q:b):q=b,z){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=q+I,z={id:v++,callback:ee,priorityLevel:z,startTime:q,expirationTime:I,sortIndex:-1},q>b?(z.sortIndex=q,n(g,z),r(m)===null&&z===r(g)&&(P?(L(ye),ye=-1):P=!0,je(B,q-b))):(z.sortIndex=I,n(m,z),C||k||(C=!0,nt(ne))),z},s.unstable_shouldYield=$e,s.unstable_wrapCallback=function(z){var ee=E;return function(){var q=E;E=ee;try{return z.apply(this,arguments)}finally{E=q}}}})(al)),al}var jd;function Hp(){return jd||(jd=1,ol.exports=qp()),ol.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pd;function Vp(){if(Pd)return lt;Pd=1;var s=Tl(),n=Hp();function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function c(e,t){h(e,t),h(e+"Capture",t)}function h(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},x={};function E(e){return m.call(x,e)?!0:m.call(v,e)?!1:g.test(e)?x[e]=!0:(v[e]=!0,!1)}function k(e,t,i,a){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,t,i,a){if(t===null||typeof t>"u"||k(e,t,i,a))return!0;if(a)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,i,a,u,d,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=u,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=p}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){N[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];N[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){N[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){N[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){N[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){N[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){N[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){N[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){N[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(L,M);N[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(L,M);N[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(L,M);N[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){N[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),N.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){N[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function R(e,t,i,a){var u=N.hasOwnProperty(t)?N[t]:null;(u!==null?u.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C(t,i,u,a)&&(i=null),a||u===null?E(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):u.mustUseProperty?e[u.propertyName]=i===null?u.type===3?!1:"":i:(t=u.attributeName,a=u.attributeNamespace,i===null?e.removeAttribute(t):(u=u.type,i=u===3||u===4&&i===!0?"":""+i,a?e.setAttributeNS(a,t,i):e.setAttribute(t,i))))}var B=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),J=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),ae=Symbol.for("react.provider"),$e=Symbol.for("react.context"),qe=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),At=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),z=Symbol.iterator;function ee(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var q=Object.assign,b;function I(e){if(b===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var re=!1;function oe(e,t){if(!e||re)return"";re=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(j){var a=j}Reflect.construct(e,[],t)}else{try{t.call()}catch(j){a=j}e.call(t.prototype)}else{try{throw Error()}catch(j){a=j}e()}}catch(j){if(j&&a&&typeof j.stack=="string"){for(var u=j.stack.split(`
`),d=a.stack.split(`
`),p=u.length-1,y=d.length-1;1<=p&&0<=y&&u[p]!==d[y];)y--;for(;1<=p&&0<=y;p--,y--)if(u[p]!==d[y]){if(p!==1||y!==1)do if(p--,y--,0>y||u[p]!==d[y]){var _=`
`+u[p].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=p&&0<=y);break}}}finally{re=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?I(e):""}function ue(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=oe(e.type,!1),e;case 11:return e=oe(e.type.render,!1),e;case 1:return e=oe(e.type,!0),e;default:return""}}function ce(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case se:return"Fragment";case J:return"Portal";case ve:return"Profiler";case ye:return"StrictMode";case Ie:return"Suspense";case Ze:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $e:return(e.displayName||"Context")+".Consumer";case ae:return(e._context.displayName||"Context")+".Provider";case qe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case At:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case nt:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}function we(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(t);case 8:return t===ye?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ee(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ut(e){var t=Ee(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var u=i.get,d=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(p){a=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return a},setValue:function(p){a=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ns(e){e._valueTracker||(e._valueTracker=ut(e))}function Pl(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),a="";return e&&(a=Ee(e)?e.checked?"true":"false":e.value),e=a,e!==i?(t.setValue(e),!0):!1}function Rs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function uo(e,t){var i=t.checked;return q({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function Nl(e,t){var i=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;i=fe(t.value!=null?t.value:i),e._wrapperState={initialChecked:a,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rl(e,t){t=t.checked,t!=null&&R(e,"checked",t,!1)}function co(e,t){Rl(e,t);var i=fe(t.value),a=t.type;if(i!=null)a==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ho(e,t.type,i):t.hasOwnProperty("defaultValue")&&ho(e,t.type,fe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Al(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function ho(e,t,i){(t!=="number"||Rs(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var Pr=Array.isArray;function Wn(e,t,i,a){if(e=e.options,t){t={};for(var u=0;u<i.length;u++)t["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=t.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&a&&(e[i].defaultSelected=!0)}else{for(i=""+fe(i),t=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function fo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(r(91));return q({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Il(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(r(92));if(Pr(i)){if(1<i.length)throw Error(r(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:fe(i)}}function Dl(e,t){var i=fe(t.value),a=fe(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),a!=null&&(e.defaultValue=""+a)}function Ll(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $l(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function po(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$l(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var As,Ml=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,a,u){MSApp.execUnsafeLocalFunction(function(){return e(t,i,a,u)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(As=As||document.createElement("div"),As.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=As.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Nr(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var Rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qh=["Webkit","ms","Moz","O"];Object.keys(Rr).forEach(function(e){qh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rr[t]=Rr[e]})});function Ul(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||Rr.hasOwnProperty(e)&&Rr[e]?(""+t).trim():t+"px"}function Bl(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var a=i.indexOf("--")===0,u=Ul(i,t[i],a);i==="float"&&(i="cssFloat"),a?e.setProperty(i,u):e[i]=u}}var Hh=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mo(e,t){if(t){if(Hh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(r(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(t.style!=null&&typeof t.style!="object")throw Error(r(62))}}function go(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vo=null;function yo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wo=null,qn=null,Hn=null;function zl(e){if(e=es(e)){if(typeof wo!="function")throw Error(r(280));var t=e.stateNode;t&&(t=ni(t),wo(e.stateNode,e.type,t))}}function Fl(e){qn?Hn?Hn.push(e):Hn=[e]:qn=e}function Wl(){if(qn){var e=qn,t=Hn;if(Hn=qn=null,zl(e),t)for(e=0;e<t.length;e++)zl(t[e])}}function ql(e,t){return e(t)}function Hl(){}var _o=!1;function Vl(e,t,i){if(_o)return e(t,i);_o=!0;try{return ql(e,t,i)}finally{_o=!1,(qn!==null||Hn!==null)&&(Hl(),Wl())}}function Ar(e,t){var i=e.stateNode;if(i===null)return null;var a=ni(i);if(a===null)return null;i=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(r(231,t,typeof i));return i}var ko=!1;if(f)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){ko=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{ko=!1}function Vh(e,t,i,a,u,d,p,y,_){var j=Array.prototype.slice.call(arguments,3);try{t.apply(i,j)}catch(D){this.onError(D)}}var Dr=!1,Is=null,Ds=!1,So=null,Kh={onError:function(e){Dr=!0,Is=e}};function Gh(e,t,i,a,u,d,p,y,_){Dr=!1,Is=null,Vh.apply(Kh,arguments)}function Jh(e,t,i,a,u,d,p,y,_){if(Gh.apply(this,arguments),Dr){if(Dr){var j=Is;Dr=!1,Is=null}else throw Error(r(198));Ds||(Ds=!0,So=j)}}function kn(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Kl(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Gl(e){if(kn(e)!==e)throw Error(r(188))}function Yh(e){var t=e.alternate;if(!t){if(t=kn(e),t===null)throw Error(r(188));return t!==e?null:e}for(var i=e,a=t;;){var u=i.return;if(u===null)break;var d=u.alternate;if(d===null){if(a=u.return,a!==null){i=a;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===i)return Gl(u),e;if(d===a)return Gl(u),t;d=d.sibling}throw Error(r(188))}if(i.return!==a.return)i=u,a=d;else{for(var p=!1,y=u.child;y;){if(y===i){p=!0,i=u,a=d;break}if(y===a){p=!0,a=u,i=d;break}y=y.sibling}if(!p){for(y=d.child;y;){if(y===i){p=!0,i=d,a=u;break}if(y===a){p=!0,a=d,i=u;break}y=y.sibling}if(!p)throw Error(r(189))}}if(i.alternate!==a)throw Error(r(190))}if(i.tag!==3)throw Error(r(188));return i.stateNode.current===i?e:t}function Jl(e){return e=Yh(e),e!==null?Yl(e):null}function Yl(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Yl(e);if(t!==null)return t;e=e.sibling}return null}var Ql=n.unstable_scheduleCallback,Xl=n.unstable_cancelCallback,Qh=n.unstable_shouldYield,Xh=n.unstable_requestPaint,Re=n.unstable_now,Zh=n.unstable_getCurrentPriorityLevel,xo=n.unstable_ImmediatePriority,Zl=n.unstable_UserBlockingPriority,Ls=n.unstable_NormalPriority,ef=n.unstable_LowPriority,eu=n.unstable_IdlePriority,$s=null,It=null;function tf(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot($s,e,void 0,(e.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:sf,nf=Math.log,rf=Math.LN2;function sf(e){return e>>>=0,e===0?32:31-(nf(e)/rf|0)|0}var Ms=64,Us=4194304;function Lr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bs(e,t){var i=e.pendingLanes;if(i===0)return 0;var a=0,u=e.suspendedLanes,d=e.pingedLanes,p=i&268435455;if(p!==0){var y=p&~u;y!==0?a=Lr(y):(d&=p,d!==0&&(a=Lr(d)))}else p=i&~u,p!==0?a=Lr(p):d!==0&&(a=Lr(d));if(a===0)return 0;if(t!==0&&t!==a&&(t&u)===0&&(u=a&-a,d=t&-t,u>=d||u===16&&(d&4194240)!==0))return t;if((a&4)!==0&&(a|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)i=31-xt(t),u=1<<i,a|=e[i],t&=~u;return a}function of(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function af(e,t){for(var i=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-xt(d),y=1<<p,_=u[p];_===-1?((y&i)===0||(y&a)!==0)&&(u[p]=of(y,t)):_<=t&&(e.expiredLanes|=y),d&=~y}}function Eo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function tu(){var e=Ms;return Ms<<=1,(Ms&4194240)===0&&(Ms=64),e}function bo(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function $r(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xt(t),e[t]=i}function lf(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<i;){var u=31-xt(i),d=1<<u;t[u]=0,a[u]=-1,e[u]=-1,i&=~d}}function To(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var a=31-xt(i),u=1<<a;u&t|e[a]&t&&(e[a]|=t),i&=~u}}var pe=0;function nu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ru,Co,su,iu,ou,Oo=!1,zs=[],Xt=null,Zt=null,en=null,Mr=new Map,Ur=new Map,tn=[],uf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function au(e,t){switch(e){case"focusin":case"focusout":Xt=null;break;case"dragenter":case"dragleave":Zt=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":Mr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(t.pointerId)}}function Br(e,t,i,a,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:i,eventSystemFlags:a,nativeEvent:d,targetContainers:[u]},t!==null&&(t=es(t),t!==null&&Co(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function cf(e,t,i,a,u){switch(t){case"focusin":return Xt=Br(Xt,e,t,i,a,u),!0;case"dragenter":return Zt=Br(Zt,e,t,i,a,u),!0;case"mouseover":return en=Br(en,e,t,i,a,u),!0;case"pointerover":var d=u.pointerId;return Mr.set(d,Br(Mr.get(d)||null,e,t,i,a,u)),!0;case"gotpointercapture":return d=u.pointerId,Ur.set(d,Br(Ur.get(d)||null,e,t,i,a,u)),!0}return!1}function lu(e){var t=Sn(e.target);if(t!==null){var i=kn(t);if(i!==null){if(t=i.tag,t===13){if(t=Kl(i),t!==null){e.blockedOn=t,ou(e.priority,function(){su(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Po(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var a=new i.constructor(i.type,i);vo=a,i.target.dispatchEvent(a),vo=null}else return t=es(i),t!==null&&Co(t),e.blockedOn=i,!1;t.shift()}return!0}function uu(e,t,i){Fs(e)&&i.delete(t)}function df(){Oo=!1,Xt!==null&&Fs(Xt)&&(Xt=null),Zt!==null&&Fs(Zt)&&(Zt=null),en!==null&&Fs(en)&&(en=null),Mr.forEach(uu),Ur.forEach(uu)}function zr(e,t){e.blockedOn===t&&(e.blockedOn=null,Oo||(Oo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,df)))}function Fr(e){function t(u){return zr(u,e)}if(0<zs.length){zr(zs[0],e);for(var i=1;i<zs.length;i++){var a=zs[i];a.blockedOn===e&&(a.blockedOn=null)}}for(Xt!==null&&zr(Xt,e),Zt!==null&&zr(Zt,e),en!==null&&zr(en,e),Mr.forEach(t),Ur.forEach(t),i=0;i<tn.length;i++)a=tn[i],a.blockedOn===e&&(a.blockedOn=null);for(;0<tn.length&&(i=tn[0],i.blockedOn===null);)lu(i),i.blockedOn===null&&tn.shift()}var Vn=B.ReactCurrentBatchConfig,Ws=!0;function hf(e,t,i,a){var u=pe,d=Vn.transition;Vn.transition=null;try{pe=1,jo(e,t,i,a)}finally{pe=u,Vn.transition=d}}function ff(e,t,i,a){var u=pe,d=Vn.transition;Vn.transition=null;try{pe=4,jo(e,t,i,a)}finally{pe=u,Vn.transition=d}}function jo(e,t,i,a){if(Ws){var u=Po(e,t,i,a);if(u===null)Ko(e,t,a,qs,i),au(e,a);else if(cf(u,e,t,i,a))a.stopPropagation();else if(au(e,a),t&4&&-1<uf.indexOf(e)){for(;u!==null;){var d=es(u);if(d!==null&&ru(d),d=Po(e,t,i,a),d===null&&Ko(e,t,a,qs,i),d===u)break;u=d}u!==null&&a.stopPropagation()}else Ko(e,t,a,null,i)}}var qs=null;function Po(e,t,i,a){if(qs=null,e=yo(a),e=Sn(e),e!==null)if(t=kn(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Kl(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qs=e,null}function cu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zh()){case xo:return 1;case Zl:return 4;case Ls:case ef:return 16;case eu:return 536870912;default:return 16}default:return 16}}var nn=null,No=null,Hs=null;function du(){if(Hs)return Hs;var e,t=No,i=t.length,a,u="value"in nn?nn.value:nn.textContent,d=u.length;for(e=0;e<i&&t[e]===u[e];e++);var p=i-e;for(a=1;a<=p&&t[i-a]===u[d-a];a++);return Hs=u.slice(e,1<a?1-a:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ks(){return!0}function hu(){return!1}function ct(e){function t(i,a,u,d,p){this._reactName=i,this._targetInst=u,this.type=a,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(i=e[y],this[y]=i?i(d):d[y]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ks:hu,this.isPropagationStopped=hu,this}return q(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),t}var Kn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ro=ct(Kn),Wr=q({},Kn,{view:0,detail:0}),pf=ct(Wr),Ao,Io,qr,Gs=q({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Lo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qr&&(qr&&e.type==="mousemove"?(Ao=e.screenX-qr.screenX,Io=e.screenY-qr.screenY):Io=Ao=0,qr=e),Ao)},movementY:function(e){return"movementY"in e?e.movementY:Io}}),fu=ct(Gs),mf=q({},Gs,{dataTransfer:0}),gf=ct(mf),vf=q({},Wr,{relatedTarget:0}),Do=ct(vf),yf=q({},Kn,{animationName:0,elapsedTime:0,pseudoElement:0}),wf=ct(yf),_f=q({},Kn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kf=ct(_f),Sf=q({},Kn,{data:0}),pu=ct(Sf),xf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ef={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bf[e])?!!t[e]:!1}function Lo(){return Tf}var Cf=q({},Wr,{key:function(e){if(e.key){var t=xf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ef[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Lo,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Of=ct(Cf),jf=q({},Gs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mu=ct(jf),Pf=q({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Lo}),Nf=ct(Pf),Rf=q({},Kn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Af=ct(Rf),If=q({},Gs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Df=ct(If),Lf=[9,13,27,32],$o=f&&"CompositionEvent"in window,Hr=null;f&&"documentMode"in document&&(Hr=document.documentMode);var $f=f&&"TextEvent"in window&&!Hr,gu=f&&(!$o||Hr&&8<Hr&&11>=Hr),vu=" ",yu=!1;function wu(e,t){switch(e){case"keyup":return Lf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _u(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Gn=!1;function Mf(e,t){switch(e){case"compositionend":return _u(t);case"keypress":return t.which!==32?null:(yu=!0,vu);case"textInput":return e=t.data,e===vu&&yu?null:e;default:return null}}function Uf(e,t){if(Gn)return e==="compositionend"||!$o&&wu(e,t)?(e=du(),Hs=No=nn=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gu&&t.locale!=="ko"?null:t.data;default:return null}}var Bf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ku(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bf[e.type]:t==="textarea"}function Su(e,t,i,a){Fl(a),t=Zs(t,"onChange"),0<t.length&&(i=new Ro("onChange","change",null,i,a),e.push({event:i,listeners:t}))}var Vr=null,Kr=null;function zf(e){Bu(e,0)}function Js(e){var t=Zn(e);if(Pl(t))return e}function Ff(e,t){if(e==="change")return t}var xu=!1;if(f){var Mo;if(f){var Uo="oninput"in document;if(!Uo){var Eu=document.createElement("div");Eu.setAttribute("oninput","return;"),Uo=typeof Eu.oninput=="function"}Mo=Uo}else Mo=!1;xu=Mo&&(!document.documentMode||9<document.documentMode)}function bu(){Vr&&(Vr.detachEvent("onpropertychange",Tu),Kr=Vr=null)}function Tu(e){if(e.propertyName==="value"&&Js(Kr)){var t=[];Su(t,Kr,e,yo(e)),Vl(zf,t)}}function Wf(e,t,i){e==="focusin"?(bu(),Vr=t,Kr=i,Vr.attachEvent("onpropertychange",Tu)):e==="focusout"&&bu()}function qf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Js(Kr)}function Hf(e,t){if(e==="click")return Js(t)}function Vf(e,t){if(e==="input"||e==="change")return Js(t)}function Kf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:Kf;function Gr(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(a=0;a<i.length;a++){var u=i[a];if(!m.call(t,u)||!Et(e[u],t[u]))return!1}return!0}function Cu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ou(e,t){var i=Cu(e);e=0;for(var a;i;){if(i.nodeType===3){if(a=e+i.textContent.length,e<=t&&a>=t)return{node:i,offset:t-e};e=a}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Cu(i)}}function ju(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ju(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pu(){for(var e=window,t=Rs();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=Rs(e.document)}return t}function Bo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gf(e){var t=Pu(),i=e.focusedElem,a=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&ju(i.ownerDocument.documentElement,i)){if(a!==null&&Bo(i)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=i.textContent.length,d=Math.min(a.start,u);a=a.end===void 0?d:Math.min(a.end,u),!e.extend&&d>a&&(u=a,a=d,d=u),u=Ou(i,d);var p=Ou(i,a);u&&p&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),d>a?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jf=f&&"documentMode"in document&&11>=document.documentMode,Jn=null,zo=null,Jr=null,Fo=!1;function Nu(e,t,i){var a=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Fo||Jn==null||Jn!==Rs(a)||(a=Jn,"selectionStart"in a&&Bo(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Jr&&Gr(Jr,a)||(Jr=a,a=Zs(zo,"onSelect"),0<a.length&&(t=new Ro("onSelect","select",null,t,i),e.push({event:t,listeners:a}),t.target=Jn)))}function Ys(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var Yn={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},Wo={},Ru={};f&&(Ru=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function Qs(e){if(Wo[e])return Wo[e];if(!Yn[e])return e;var t=Yn[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in Ru)return Wo[e]=t[i];return e}var Au=Qs("animationend"),Iu=Qs("animationiteration"),Du=Qs("animationstart"),Lu=Qs("transitionend"),$u=new Map,Mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rn(e,t){$u.set(e,t),c(t,[e])}for(var qo=0;qo<Mu.length;qo++){var Ho=Mu[qo],Yf=Ho.toLowerCase(),Qf=Ho[0].toUpperCase()+Ho.slice(1);rn(Yf,"on"+Qf)}rn(Au,"onAnimationEnd"),rn(Iu,"onAnimationIteration"),rn(Du,"onAnimationStart"),rn("dblclick","onDoubleClick"),rn("focusin","onFocus"),rn("focusout","onBlur"),rn(Lu,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yr));function Uu(e,t,i){var a=e.type||"unknown-event";e.currentTarget=i,Jh(a,t,void 0,e),e.currentTarget=null}function Bu(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var a=e[i],u=a.event;a=a.listeners;e:{var d=void 0;if(t)for(var p=a.length-1;0<=p;p--){var y=a[p],_=y.instance,j=y.currentTarget;if(y=y.listener,_!==d&&u.isPropagationStopped())break e;Uu(u,y,j),d=_}else for(p=0;p<a.length;p++){if(y=a[p],_=y.instance,j=y.currentTarget,y=y.listener,_!==d&&u.isPropagationStopped())break e;Uu(u,y,j),d=_}}}if(Ds)throw e=So,Ds=!1,So=null,e}function Se(e,t){var i=t[Zo];i===void 0&&(i=t[Zo]=new Set);var a=e+"__bubble";i.has(a)||(zu(t,e,2,!1),i.add(a))}function Vo(e,t,i){var a=0;t&&(a|=4),zu(i,e,a,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function Qr(e){if(!e[Xs]){e[Xs]=!0,o.forEach(function(i){i!=="selectionchange"&&(Xf.has(i)||Vo(i,!1,e),Vo(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,Vo("selectionchange",!1,t))}}function zu(e,t,i,a){switch(cu(t)){case 1:var u=hf;break;case 4:u=ff;break;default:u=jo}i=u.bind(null,t,i,e),u=void 0,!ko||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,i,{capture:!0,passive:u}):e.addEventListener(t,i,!0):u!==void 0?e.addEventListener(t,i,{passive:u}):e.addEventListener(t,i,!1)}function Ko(e,t,i,a,u){var d=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var p=a.tag;if(p===3||p===4){var y=a.stateNode.containerInfo;if(y===u||y.nodeType===8&&y.parentNode===u)break;if(p===4)for(p=a.return;p!==null;){var _=p.tag;if((_===3||_===4)&&(_=p.stateNode.containerInfo,_===u||_.nodeType===8&&_.parentNode===u))return;p=p.return}for(;y!==null;){if(p=Sn(y),p===null)return;if(_=p.tag,_===5||_===6){a=d=p;continue e}y=y.parentNode}}a=a.return}Vl(function(){var j=d,D=yo(i),$=[];e:{var A=$u.get(e);if(A!==void 0){var F=Ro,H=e;switch(e){case"keypress":if(Vs(i)===0)break e;case"keydown":case"keyup":F=Of;break;case"focusin":H="focus",F=Do;break;case"focusout":H="blur",F=Do;break;case"beforeblur":case"afterblur":F=Do;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=gf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=Nf;break;case Au:case Iu:case Du:F=wf;break;case Lu:F=Af;break;case"scroll":F=pf;break;case"wheel":F=Df;break;case"copy":case"cut":case"paste":F=kf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=mu}var V=(t&4)!==0,Ae=!V&&e==="scroll",T=V?A!==null?A+"Capture":null:A;V=[];for(var S=j,O;S!==null;){O=S;var U=O.stateNode;if(O.tag===5&&U!==null&&(O=U,T!==null&&(U=Ar(S,T),U!=null&&V.push(Xr(S,U,O)))),Ae)break;S=S.return}0<V.length&&(A=new F(A,H,null,i,D),$.push({event:A,listeners:V}))}}if((t&7)===0){e:{if(A=e==="mouseover"||e==="pointerover",F=e==="mouseout"||e==="pointerout",A&&i!==vo&&(H=i.relatedTarget||i.fromElement)&&(Sn(H)||H[Ft]))break e;if((F||A)&&(A=D.window===D?D:(A=D.ownerDocument)?A.defaultView||A.parentWindow:window,F?(H=i.relatedTarget||i.toElement,F=j,H=H?Sn(H):null,H!==null&&(Ae=kn(H),H!==Ae||H.tag!==5&&H.tag!==6)&&(H=null)):(F=null,H=j),F!==H)){if(V=fu,U="onMouseLeave",T="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(V=mu,U="onPointerLeave",T="onPointerEnter",S="pointer"),Ae=F==null?A:Zn(F),O=H==null?A:Zn(H),A=new V(U,S+"leave",F,i,D),A.target=Ae,A.relatedTarget=O,U=null,Sn(D)===j&&(V=new V(T,S+"enter",H,i,D),V.target=O,V.relatedTarget=Ae,U=V),Ae=U,F&&H)t:{for(V=F,T=H,S=0,O=V;O;O=Qn(O))S++;for(O=0,U=T;U;U=Qn(U))O++;for(;0<S-O;)V=Qn(V),S--;for(;0<O-S;)T=Qn(T),O--;for(;S--;){if(V===T||T!==null&&V===T.alternate)break t;V=Qn(V),T=Qn(T)}V=null}else V=null;F!==null&&Fu($,A,F,V,!1),H!==null&&Ae!==null&&Fu($,Ae,H,V,!0)}}e:{if(A=j?Zn(j):window,F=A.nodeName&&A.nodeName.toLowerCase(),F==="select"||F==="input"&&A.type==="file")var K=Ff;else if(ku(A))if(xu)K=Vf;else{K=qf;var Y=Wf}else(F=A.nodeName)&&F.toLowerCase()==="input"&&(A.type==="checkbox"||A.type==="radio")&&(K=Hf);if(K&&(K=K(e,j))){Su($,K,i,D);break e}Y&&Y(e,A,j),e==="focusout"&&(Y=A._wrapperState)&&Y.controlled&&A.type==="number"&&ho(A,"number",A.value)}switch(Y=j?Zn(j):window,e){case"focusin":(ku(Y)||Y.contentEditable==="true")&&(Jn=Y,zo=j,Jr=null);break;case"focusout":Jr=zo=Jn=null;break;case"mousedown":Fo=!0;break;case"contextmenu":case"mouseup":case"dragend":Fo=!1,Nu($,i,D);break;case"selectionchange":if(Jf)break;case"keydown":case"keyup":Nu($,i,D)}var Q;if($o)e:{switch(e){case"compositionstart":var te="onCompositionStart";break e;case"compositionend":te="onCompositionEnd";break e;case"compositionupdate":te="onCompositionUpdate";break e}te=void 0}else Gn?wu(e,i)&&(te="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(te="onCompositionStart");te&&(gu&&i.locale!=="ko"&&(Gn||te!=="onCompositionStart"?te==="onCompositionEnd"&&Gn&&(Q=du()):(nn=D,No="value"in nn?nn.value:nn.textContent,Gn=!0)),Y=Zs(j,te),0<Y.length&&(te=new pu(te,e,null,i,D),$.push({event:te,listeners:Y}),Q?te.data=Q:(Q=_u(i),Q!==null&&(te.data=Q)))),(Q=$f?Mf(e,i):Uf(e,i))&&(j=Zs(j,"onBeforeInput"),0<j.length&&(D=new pu("onBeforeInput","beforeinput",null,i,D),$.push({event:D,listeners:j}),D.data=Q))}Bu($,t)})}function Xr(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Zs(e,t){for(var i=t+"Capture",a=[];e!==null;){var u=e,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=Ar(e,i),d!=null&&a.unshift(Xr(e,d,u)),d=Ar(e,t),d!=null&&a.push(Xr(e,d,u))),e=e.return}return a}function Qn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fu(e,t,i,a,u){for(var d=t._reactName,p=[];i!==null&&i!==a;){var y=i,_=y.alternate,j=y.stateNode;if(_!==null&&_===a)break;y.tag===5&&j!==null&&(y=j,u?(_=Ar(i,d),_!=null&&p.unshift(Xr(i,_,y))):u||(_=Ar(i,d),_!=null&&p.push(Xr(i,_,y)))),i=i.return}p.length!==0&&e.push({event:t,listeners:p})}var Zf=/\r\n?/g,ep=/\u0000|\uFFFD/g;function Wu(e){return(typeof e=="string"?e:""+e).replace(Zf,`
`).replace(ep,"")}function ei(e,t,i){if(t=Wu(t),Wu(e)!==t&&i)throw Error(r(425))}function ti(){}var Go=null,Jo=null;function Yo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qo=typeof setTimeout=="function"?setTimeout:void 0,tp=typeof clearTimeout=="function"?clearTimeout:void 0,qu=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof qu<"u"?function(e){return qu.resolve(null).then(e).catch(rp)}:Qo;function rp(e){setTimeout(function(){throw e})}function Xo(e,t){var i=t,a=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"){if(a===0){e.removeChild(u),Fr(t);return}a--}else i!=="$"&&i!=="$?"&&i!=="$!"||a++;i=u}while(i);Fr(t)}function sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var Xn=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Xn,Zr="__reactProps$"+Xn,Ft="__reactContainer$"+Xn,Zo="__reactEvents$"+Xn,sp="__reactListeners$"+Xn,ip="__reactHandles$"+Xn;function Sn(e){var t=e[Dt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Ft]||i[Dt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Hu(e);e!==null;){if(i=e[Dt])return i;e=Hu(e)}return t}e=i,i=e.parentNode}return null}function es(e){return e=e[Dt]||e[Ft],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function ni(e){return e[Zr]||null}var ea=[],er=-1;function on(e){return{current:e}}function xe(e){0>er||(e.current=ea[er],ea[er]=null,er--)}function _e(e,t){er++,ea[er]=e.current,e.current=t}var an={},Je=on(an),rt=on(!1),xn=an;function tr(e,t){var i=e.type.contextTypes;if(!i)return an;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in i)u[d]=t[d];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function st(e){return e=e.childContextTypes,e!=null}function ri(){xe(rt),xe(Je)}function Vu(e,t,i){if(Je.current!==an)throw Error(r(168));_e(Je,t),_e(rt,i)}function Ku(e,t,i){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return i;a=a.getChildContext();for(var u in a)if(!(u in t))throw Error(r(108,we(e)||"Unknown",u));return q({},i,a)}function si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||an,xn=Je.current,_e(Je,e),_e(rt,rt.current),!0}function Gu(e,t,i){var a=e.stateNode;if(!a)throw Error(r(169));i?(e=Ku(e,t,xn),a.__reactInternalMemoizedMergedChildContext=e,xe(rt),xe(Je),_e(Je,e)):xe(rt),_e(rt,i)}var Wt=null,ii=!1,ta=!1;function Ju(e){Wt===null?Wt=[e]:Wt.push(e)}function op(e){ii=!0,Ju(e)}function ln(){if(!ta&&Wt!==null){ta=!0;var e=0,t=pe;try{var i=Wt;for(pe=1;e<i.length;e++){var a=i[e];do a=a(!0);while(a!==null)}Wt=null,ii=!1}catch(u){throw Wt!==null&&(Wt=Wt.slice(e+1)),Ql(xo,ln),u}finally{pe=t,ta=!1}}return null}var nr=[],rr=0,oi=null,ai=0,vt=[],yt=0,En=null,qt=1,Ht="";function bn(e,t){nr[rr++]=ai,nr[rr++]=oi,oi=e,ai=t}function Yu(e,t,i){vt[yt++]=qt,vt[yt++]=Ht,vt[yt++]=En,En=e;var a=qt;e=Ht;var u=32-xt(a)-1;a&=~(1<<u),i+=1;var d=32-xt(t)+u;if(30<d){var p=u-u%5;d=(a&(1<<p)-1).toString(32),a>>=p,u-=p,qt=1<<32-xt(t)+u|i<<u|a,Ht=d+e}else qt=1<<d|i<<u|a,Ht=e}function na(e){e.return!==null&&(bn(e,1),Yu(e,1,0))}function ra(e){for(;e===oi;)oi=nr[--rr],nr[rr]=null,ai=nr[--rr],nr[rr]=null;for(;e===En;)En=vt[--yt],vt[yt]=null,Ht=vt[--yt],vt[yt]=null,qt=vt[--yt],vt[yt]=null}var dt=null,ht=null,be=!1,bt=null;function Qu(e,t){var i=St(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Xu(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,dt=e,ht=sn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,dt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=En!==null?{id:qt,overflow:Ht}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=St(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,dt=e,ht=null,!0):!1;default:return!1}}function sa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ia(e){if(be){var t=ht;if(t){var i=t;if(!Xu(e,t)){if(sa(e))throw Error(r(418));t=sn(i.nextSibling);var a=dt;t&&Xu(e,t)?Qu(a,i):(e.flags=e.flags&-4097|2,be=!1,dt=e)}}else{if(sa(e))throw Error(r(418));e.flags=e.flags&-4097|2,be=!1,dt=e}}}function Zu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;dt=e}function li(e){if(e!==dt)return!1;if(!be)return Zu(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yo(e.type,e.memoizedProps)),t&&(t=ht)){if(sa(e))throw ec(),Error(r(418));for(;t;)Qu(e,t),t=sn(t.nextSibling)}if(Zu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ht=sn(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=dt?sn(e.stateNode.nextSibling):null;return!0}function ec(){for(var e=ht;e;)e=sn(e.nextSibling)}function sr(){ht=dt=null,be=!1}function oa(e){bt===null?bt=[e]:bt.push(e)}var ap=B.ReactCurrentBatchConfig;function ts(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(r(309));var a=i.stateNode}if(!a)throw Error(r(147,e));var u=a,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(p){var y=u.refs;p===null?delete y[d]:y[d]=p},t._stringRef=d,t)}if(typeof e!="string")throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function ui(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tc(e){var t=e._init;return t(e._payload)}function nc(e){function t(T,S){if(e){var O=T.deletions;O===null?(T.deletions=[S],T.flags|=16):O.push(S)}}function i(T,S){if(!e)return null;for(;S!==null;)t(T,S),S=S.sibling;return null}function a(T,S){for(T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function u(T,S){return T=gn(T,S),T.index=0,T.sibling=null,T}function d(T,S,O){return T.index=O,e?(O=T.alternate,O!==null?(O=O.index,O<S?(T.flags|=2,S):O):(T.flags|=2,S)):(T.flags|=1048576,S)}function p(T){return e&&T.alternate===null&&(T.flags|=2),T}function y(T,S,O,U){return S===null||S.tag!==6?(S=Qa(O,T.mode,U),S.return=T,S):(S=u(S,O),S.return=T,S)}function _(T,S,O,U){var K=O.type;return K===se?D(T,S,O.props.children,U,O.key):S!==null&&(S.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===nt&&tc(K)===S.type)?(U=u(S,O.props),U.ref=ts(T,S,O),U.return=T,U):(U=Ai(O.type,O.key,O.props,null,T.mode,U),U.ref=ts(T,S,O),U.return=T,U)}function j(T,S,O,U){return S===null||S.tag!==4||S.stateNode.containerInfo!==O.containerInfo||S.stateNode.implementation!==O.implementation?(S=Xa(O,T.mode,U),S.return=T,S):(S=u(S,O.children||[]),S.return=T,S)}function D(T,S,O,U,K){return S===null||S.tag!==7?(S=An(O,T.mode,U,K),S.return=T,S):(S=u(S,O),S.return=T,S)}function $(T,S,O){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Qa(""+S,T.mode,O),S.return=T,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ne:return O=Ai(S.type,S.key,S.props,null,T.mode,O),O.ref=ts(T,null,S),O.return=T,O;case J:return S=Xa(S,T.mode,O),S.return=T,S;case nt:var U=S._init;return $(T,U(S._payload),O)}if(Pr(S)||ee(S))return S=An(S,T.mode,O,null),S.return=T,S;ui(T,S)}return null}function A(T,S,O,U){var K=S!==null?S.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return K!==null?null:y(T,S,""+O,U);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ne:return O.key===K?_(T,S,O,U):null;case J:return O.key===K?j(T,S,O,U):null;case nt:return K=O._init,A(T,S,K(O._payload),U)}if(Pr(O)||ee(O))return K!==null?null:D(T,S,O,U,null);ui(T,O)}return null}function F(T,S,O,U,K){if(typeof U=="string"&&U!==""||typeof U=="number")return T=T.get(O)||null,y(S,T,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case ne:return T=T.get(U.key===null?O:U.key)||null,_(S,T,U,K);case J:return T=T.get(U.key===null?O:U.key)||null,j(S,T,U,K);case nt:var Y=U._init;return F(T,S,O,Y(U._payload),K)}if(Pr(U)||ee(U))return T=T.get(O)||null,D(S,T,U,K,null);ui(S,U)}return null}function H(T,S,O,U){for(var K=null,Y=null,Q=S,te=S=0,We=null;Q!==null&&te<O.length;te++){Q.index>te?(We=Q,Q=null):We=Q.sibling;var de=A(T,Q,O[te],U);if(de===null){Q===null&&(Q=We);break}e&&Q&&de.alternate===null&&t(T,Q),S=d(de,S,te),Y===null?K=de:Y.sibling=de,Y=de,Q=We}if(te===O.length)return i(T,Q),be&&bn(T,te),K;if(Q===null){for(;te<O.length;te++)Q=$(T,O[te],U),Q!==null&&(S=d(Q,S,te),Y===null?K=Q:Y.sibling=Q,Y=Q);return be&&bn(T,te),K}for(Q=a(T,Q);te<O.length;te++)We=F(Q,T,te,O[te],U),We!==null&&(e&&We.alternate!==null&&Q.delete(We.key===null?te:We.key),S=d(We,S,te),Y===null?K=We:Y.sibling=We,Y=We);return e&&Q.forEach(function(vn){return t(T,vn)}),be&&bn(T,te),K}function V(T,S,O,U){var K=ee(O);if(typeof K!="function")throw Error(r(150));if(O=K.call(O),O==null)throw Error(r(151));for(var Y=K=null,Q=S,te=S=0,We=null,de=O.next();Q!==null&&!de.done;te++,de=O.next()){Q.index>te?(We=Q,Q=null):We=Q.sibling;var vn=A(T,Q,de.value,U);if(vn===null){Q===null&&(Q=We);break}e&&Q&&vn.alternate===null&&t(T,Q),S=d(vn,S,te),Y===null?K=vn:Y.sibling=vn,Y=vn,Q=We}if(de.done)return i(T,Q),be&&bn(T,te),K;if(Q===null){for(;!de.done;te++,de=O.next())de=$(T,de.value,U),de!==null&&(S=d(de,S,te),Y===null?K=de:Y.sibling=de,Y=de);return be&&bn(T,te),K}for(Q=a(T,Q);!de.done;te++,de=O.next())de=F(Q,T,te,de.value,U),de!==null&&(e&&de.alternate!==null&&Q.delete(de.key===null?te:de.key),S=d(de,S,te),Y===null?K=de:Y.sibling=de,Y=de);return e&&Q.forEach(function(Bp){return t(T,Bp)}),be&&bn(T,te),K}function Ae(T,S,O,U){if(typeof O=="object"&&O!==null&&O.type===se&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case ne:e:{for(var K=O.key,Y=S;Y!==null;){if(Y.key===K){if(K=O.type,K===se){if(Y.tag===7){i(T,Y.sibling),S=u(Y,O.props.children),S.return=T,T=S;break e}}else if(Y.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===nt&&tc(K)===Y.type){i(T,Y.sibling),S=u(Y,O.props),S.ref=ts(T,Y,O),S.return=T,T=S;break e}i(T,Y);break}else t(T,Y);Y=Y.sibling}O.type===se?(S=An(O.props.children,T.mode,U,O.key),S.return=T,T=S):(U=Ai(O.type,O.key,O.props,null,T.mode,U),U.ref=ts(T,S,O),U.return=T,T=U)}return p(T);case J:e:{for(Y=O.key;S!==null;){if(S.key===Y)if(S.tag===4&&S.stateNode.containerInfo===O.containerInfo&&S.stateNode.implementation===O.implementation){i(T,S.sibling),S=u(S,O.children||[]),S.return=T,T=S;break e}else{i(T,S);break}else t(T,S);S=S.sibling}S=Xa(O,T.mode,U),S.return=T,T=S}return p(T);case nt:return Y=O._init,Ae(T,S,Y(O._payload),U)}if(Pr(O))return H(T,S,O,U);if(ee(O))return V(T,S,O,U);ui(T,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,S!==null&&S.tag===6?(i(T,S.sibling),S=u(S,O),S.return=T,T=S):(i(T,S),S=Qa(O,T.mode,U),S.return=T,T=S),p(T)):i(T,S)}return Ae}var ir=nc(!0),rc=nc(!1),ci=on(null),di=null,or=null,aa=null;function la(){aa=or=di=null}function ua(e){var t=ci.current;xe(ci),e._currentValue=t}function ca(e,t,i){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===i)break;e=e.return}}function ar(e,t){di=e,aa=or=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(it=!0),e.firstContext=null)}function wt(e){var t=e._currentValue;if(aa!==e)if(e={context:e,memoizedValue:t,next:null},or===null){if(di===null)throw Error(r(308));or=e,di.dependencies={lanes:0,firstContext:e}}else or=or.next=e;return t}var Tn=null;function da(e){Tn===null?Tn=[e]:Tn.push(e)}function sc(e,t,i,a){var u=t.interleaved;return u===null?(i.next=i,da(t)):(i.next=u.next,u.next=i),t.interleaved=i,Vt(e,a)}function Vt(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var un=!1;function ha(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ic(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cn(e,t,i){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(le&2)!==0){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,Vt(e,i)}return u=a.interleaved,u===null?(t.next=t,da(a)):(t.next=u.next,u.next=t),a.interleaved=t,Vt(e,i)}function hi(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,To(e,i)}}function oc(e,t){var i=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,i===a)){var u=null,d=null;if(i=i.firstBaseUpdate,i!==null){do{var p={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};d===null?u=d=p:d=d.next=p,i=i.next}while(i!==null);d===null?u=d=t:d=d.next=t}else u=d=t;i={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:a.shared,effects:a.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function fi(e,t,i,a){var u=e.updateQueue;un=!1;var d=u.firstBaseUpdate,p=u.lastBaseUpdate,y=u.shared.pending;if(y!==null){u.shared.pending=null;var _=y,j=_.next;_.next=null,p===null?d=j:p.next=j,p=_;var D=e.alternate;D!==null&&(D=D.updateQueue,y=D.lastBaseUpdate,y!==p&&(y===null?D.firstBaseUpdate=j:y.next=j,D.lastBaseUpdate=_))}if(d!==null){var $=u.baseState;p=0,D=j=_=null,y=d;do{var A=y.lane,F=y.eventTime;if((a&A)===A){D!==null&&(D=D.next={eventTime:F,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var H=e,V=y;switch(A=t,F=i,V.tag){case 1:if(H=V.payload,typeof H=="function"){$=H.call(F,$,A);break e}$=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=V.payload,A=typeof H=="function"?H.call(F,$,A):H,A==null)break e;$=q({},$,A);break e;case 2:un=!0}}y.callback!==null&&y.lane!==0&&(e.flags|=64,A=u.effects,A===null?u.effects=[y]:A.push(y))}else F={eventTime:F,lane:A,tag:y.tag,payload:y.payload,callback:y.callback,next:null},D===null?(j=D=F,_=$):D=D.next=F,p|=A;if(y=y.next,y===null){if(y=u.shared.pending,y===null)break;A=y,y=A.next,A.next=null,u.lastBaseUpdate=A,u.shared.pending=null}}while(!0);if(D===null&&(_=$),u.baseState=_,u.firstBaseUpdate=j,u.lastBaseUpdate=D,t=u.shared.interleaved,t!==null){u=t;do p|=u.lane,u=u.next;while(u!==t)}else d===null&&(u.shared.lanes=0);jn|=p,e.lanes=p,e.memoizedState=$}}function ac(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],u=a.callback;if(u!==null){if(a.callback=null,a=i,typeof u!="function")throw Error(r(191,u));u.call(a)}}}var ns={},Lt=on(ns),rs=on(ns),ss=on(ns);function Cn(e){if(e===ns)throw Error(r(174));return e}function fa(e,t){switch(_e(ss,t),_e(rs,e),_e(Lt,ns),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:po(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=po(t,e)}xe(Lt),_e(Lt,t)}function lr(){xe(Lt),xe(rs),xe(ss)}function lc(e){Cn(ss.current);var t=Cn(Lt.current),i=po(t,e.type);t!==i&&(_e(rs,e),_e(Lt,i))}function pa(e){rs.current===e&&(xe(Lt),xe(rs))}var Ce=on(0);function pi(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ma=[];function ga(){for(var e=0;e<ma.length;e++)ma[e]._workInProgressVersionPrimary=null;ma.length=0}var mi=B.ReactCurrentDispatcher,va=B.ReactCurrentBatchConfig,On=0,Oe=null,Me=null,ze=null,gi=!1,is=!1,os=0,lp=0;function Ye(){throw Error(r(321))}function ya(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Et(e[i],t[i]))return!1;return!0}function wa(e,t,i,a,u,d){if(On=d,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mi.current=e===null||e.memoizedState===null?hp:fp,e=i(a,u),is){d=0;do{if(is=!1,os=0,25<=d)throw Error(r(301));d+=1,ze=Me=null,t.updateQueue=null,mi.current=pp,e=i(a,u)}while(is)}if(mi.current=wi,t=Me!==null&&Me.next!==null,On=0,ze=Me=Oe=null,gi=!1,t)throw Error(r(300));return e}function _a(){var e=os!==0;return os=0,e}function $t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Oe.memoizedState=ze=e:ze=ze.next=e,ze}function _t(){if(Me===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=ze===null?Oe.memoizedState:ze.next;if(t!==null)ze=t,Me=e;else{if(e===null)throw Error(r(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},ze===null?Oe.memoizedState=ze=e:ze=ze.next=e}return ze}function as(e,t){return typeof t=="function"?t(e):t}function ka(e){var t=_t(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var a=Me,u=a.baseQueue,d=i.pending;if(d!==null){if(u!==null){var p=u.next;u.next=d.next,d.next=p}a.baseQueue=u=d,i.pending=null}if(u!==null){d=u.next,a=a.baseState;var y=p=null,_=null,j=d;do{var D=j.lane;if((On&D)===D)_!==null&&(_=_.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),a=j.hasEagerState?j.eagerState:e(a,j.action);else{var $={lane:D,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};_===null?(y=_=$,p=a):_=_.next=$,Oe.lanes|=D,jn|=D}j=j.next}while(j!==null&&j!==d);_===null?p=a:_.next=y,Et(a,t.memoizedState)||(it=!0),t.memoizedState=a,t.baseState=p,t.baseQueue=_,i.lastRenderedState=a}if(e=i.interleaved,e!==null){u=e;do d=u.lane,Oe.lanes|=d,jn|=d,u=u.next;while(u!==e)}else u===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Sa(e){var t=_t(),i=t.queue;if(i===null)throw Error(r(311));i.lastRenderedReducer=e;var a=i.dispatch,u=i.pending,d=t.memoizedState;if(u!==null){i.pending=null;var p=u=u.next;do d=e(d,p.action),p=p.next;while(p!==u);Et(d,t.memoizedState)||(it=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),i.lastRenderedState=d}return[d,a]}function uc(){}function cc(e,t){var i=Oe,a=_t(),u=t(),d=!Et(a.memoizedState,u);if(d&&(a.memoizedState=u,it=!0),a=a.queue,xa(fc.bind(null,i,a,e),[e]),a.getSnapshot!==t||d||ze!==null&&ze.memoizedState.tag&1){if(i.flags|=2048,ls(9,hc.bind(null,i,a,u,t),void 0,null),Fe===null)throw Error(r(349));(On&30)!==0||dc(i,t,u)}return u}function dc(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function hc(e,t,i,a){t.value=i,t.getSnapshot=a,pc(t)&&mc(e)}function fc(e,t,i){return i(function(){pc(t)&&mc(e)})}function pc(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Et(e,i)}catch{return!0}}function mc(e){var t=Vt(e,1);t!==null&&jt(t,e,1,-1)}function gc(e){var t=$t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:e},t.queue=e,e=e.dispatch=dp.bind(null,Oe,e),[t.memoizedState,e]}function ls(e,t,i,a){return e={tag:e,create:t,destroy:i,deps:a,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(a=i.next,i.next=e,e.next=a,t.lastEffect=e)),e}function vc(){return _t().memoizedState}function vi(e,t,i,a){var u=$t();Oe.flags|=e,u.memoizedState=ls(1|t,i,void 0,a===void 0?null:a)}function yi(e,t,i,a){var u=_t();a=a===void 0?null:a;var d=void 0;if(Me!==null){var p=Me.memoizedState;if(d=p.destroy,a!==null&&ya(a,p.deps)){u.memoizedState=ls(t,i,d,a);return}}Oe.flags|=e,u.memoizedState=ls(1|t,i,d,a)}function yc(e,t){return vi(8390656,8,e,t)}function xa(e,t){return yi(2048,8,e,t)}function wc(e,t){return yi(4,2,e,t)}function _c(e,t){return yi(4,4,e,t)}function kc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sc(e,t,i){return i=i!=null?i.concat([e]):null,yi(4,4,kc.bind(null,t,e),i)}function Ea(){}function xc(e,t){var i=_t();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&ya(t,a[1])?a[0]:(i.memoizedState=[e,t],e)}function Ec(e,t){var i=_t();t=t===void 0?null:t;var a=i.memoizedState;return a!==null&&t!==null&&ya(t,a[1])?a[0]:(e=e(),i.memoizedState=[e,t],e)}function bc(e,t,i){return(On&21)===0?(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=i):(Et(i,t)||(i=tu(),Oe.lanes|=i,jn|=i,e.baseState=!0),t)}function up(e,t){var i=pe;pe=i!==0&&4>i?i:4,e(!0);var a=va.transition;va.transition={};try{e(!1),t()}finally{pe=i,va.transition=a}}function Tc(){return _t().memoizedState}function cp(e,t,i){var a=pn(e);if(i={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null},Cc(e))Oc(t,i);else if(i=sc(e,t,i,a),i!==null){var u=tt();jt(i,e,a,u),jc(i,t,a)}}function dp(e,t,i){var a=pn(e),u={lane:a,action:i,hasEagerState:!1,eagerState:null,next:null};if(Cc(e))Oc(t,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,y=d(p,i);if(u.hasEagerState=!0,u.eagerState=y,Et(y,p)){var _=t.interleaved;_===null?(u.next=u,da(t)):(u.next=_.next,_.next=u),t.interleaved=u;return}}catch{}finally{}i=sc(e,t,u,a),i!==null&&(u=tt(),jt(i,e,a,u),jc(i,t,a))}}function Cc(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Oc(e,t){is=gi=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function jc(e,t,i){if((i&4194240)!==0){var a=t.lanes;a&=e.pendingLanes,i|=a,t.lanes=i,To(e,i)}}var wi={readContext:wt,useCallback:Ye,useContext:Ye,useEffect:Ye,useImperativeHandle:Ye,useInsertionEffect:Ye,useLayoutEffect:Ye,useMemo:Ye,useReducer:Ye,useRef:Ye,useState:Ye,useDebugValue:Ye,useDeferredValue:Ye,useTransition:Ye,useMutableSource:Ye,useSyncExternalStore:Ye,useId:Ye,unstable_isNewReconciler:!1},hp={readContext:wt,useCallback:function(e,t){return $t().memoizedState=[e,t===void 0?null:t],e},useContext:wt,useEffect:yc,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,vi(4194308,4,kc.bind(null,t,e),i)},useLayoutEffect:function(e,t){return vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return vi(4,2,e,t)},useMemo:function(e,t){var i=$t();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var a=$t();return t=i!==void 0?i(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=cp.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=$t();return e={current:e},t.memoizedState=e},useState:gc,useDebugValue:Ea,useDeferredValue:function(e){return $t().memoizedState=e},useTransition:function(){var e=gc(!1),t=e[0];return e=up.bind(null,e[1]),$t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var a=Oe,u=$t();if(be){if(i===void 0)throw Error(r(407));i=i()}else{if(i=t(),Fe===null)throw Error(r(349));(On&30)!==0||dc(a,t,i)}u.memoizedState=i;var d={value:i,getSnapshot:t};return u.queue=d,yc(fc.bind(null,a,d,e),[e]),a.flags|=2048,ls(9,hc.bind(null,a,d,i,t),void 0,null),i},useId:function(){var e=$t(),t=Fe.identifierPrefix;if(be){var i=Ht,a=qt;i=(a&~(1<<32-xt(a)-1)).toString(32)+i,t=":"+t+"R"+i,i=os++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=lp++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fp={readContext:wt,useCallback:xc,useContext:wt,useEffect:xa,useImperativeHandle:Sc,useInsertionEffect:wc,useLayoutEffect:_c,useMemo:Ec,useReducer:ka,useRef:vc,useState:function(){return ka(as)},useDebugValue:Ea,useDeferredValue:function(e){var t=_t();return bc(t,Me.memoizedState,e)},useTransition:function(){var e=ka(as)[0],t=_t().memoizedState;return[e,t]},useMutableSource:uc,useSyncExternalStore:cc,useId:Tc,unstable_isNewReconciler:!1},pp={readContext:wt,useCallback:xc,useContext:wt,useEffect:xa,useImperativeHandle:Sc,useInsertionEffect:wc,useLayoutEffect:_c,useMemo:Ec,useReducer:Sa,useRef:vc,useState:function(){return Sa(as)},useDebugValue:Ea,useDeferredValue:function(e){var t=_t();return Me===null?t.memoizedState=e:bc(t,Me.memoizedState,e)},useTransition:function(){var e=Sa(as)[0],t=_t().memoizedState;return[e,t]},useMutableSource:uc,useSyncExternalStore:cc,useId:Tc,unstable_isNewReconciler:!1};function Tt(e,t){if(e&&e.defaultProps){t=q({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}function ba(e,t,i,a){t=e.memoizedState,i=i(a,t),i=i==null?t:q({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var _i={isMounted:function(e){return(e=e._reactInternals)?kn(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var a=tt(),u=pn(e),d=Kt(a,u);d.payload=t,i!=null&&(d.callback=i),t=cn(e,d,u),t!==null&&(jt(t,e,u,a),hi(t,e,u))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var a=tt(),u=pn(e),d=Kt(a,u);d.tag=1,d.payload=t,i!=null&&(d.callback=i),t=cn(e,d,u),t!==null&&(jt(t,e,u,a),hi(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=tt(),a=pn(e),u=Kt(i,a);u.tag=2,t!=null&&(u.callback=t),t=cn(e,u,a),t!==null&&(jt(t,e,a,i),hi(t,e,a))}};function Pc(e,t,i,a,u,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,d,p):t.prototype&&t.prototype.isPureReactComponent?!Gr(i,a)||!Gr(u,d):!0}function Nc(e,t,i){var a=!1,u=an,d=t.contextType;return typeof d=="object"&&d!==null?d=wt(d):(u=st(t)?xn:Je.current,a=t.contextTypes,d=(a=a!=null)?tr(e,u):an),t=new t(i,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_i,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=d),t}function Rc(e,t,i,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,a),t.state!==e&&_i.enqueueReplaceState(t,t.state,null)}function Ta(e,t,i,a){var u=e.stateNode;u.props=i,u.state=e.memoizedState,u.refs={},ha(e);var d=t.contextType;typeof d=="object"&&d!==null?u.context=wt(d):(d=st(t)?xn:Je.current,u.context=tr(e,d)),u.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(ba(e,t,d,i),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&_i.enqueueReplaceState(u,u.state,null),fi(e,i,u,a),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function ur(e,t){try{var i="",a=t;do i+=ue(a),a=a.return;while(a);var u=i}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:u,digest:null}}function Ca(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function Oa(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var mp=typeof WeakMap=="function"?WeakMap:Map;function Ac(e,t,i){i=Kt(-1,i),i.tag=3,i.payload={element:null};var a=t.value;return i.callback=function(){Ci||(Ci=!0,Wa=a),Oa(e,t)},i}function Ic(e,t,i){i=Kt(-1,i),i.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var u=t.value;i.payload=function(){return a(u)},i.callback=function(){Oa(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(i.callback=function(){Oa(e,t),typeof a!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),i}function Dc(e,t,i){var a=e.pingCache;if(a===null){a=e.pingCache=new mp;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(i)||(u.add(i),e=jp.bind(null,e,t,i),t.then(e,e))}function Lc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $c(e,t,i,a,u){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Kt(-1,1),t.tag=2,cn(i,t,1))),i.lanes|=1),e):(e.flags|=65536,e.lanes=u,e)}var gp=B.ReactCurrentOwner,it=!1;function et(e,t,i,a){t.child=e===null?rc(t,null,i,a):ir(t,e.child,i,a)}function Mc(e,t,i,a,u){i=i.render;var d=t.ref;return ar(t,u),a=wa(e,t,i,a,d,u),i=_a(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Gt(e,t,u)):(be&&i&&na(t),t.flags|=1,et(e,t,a,u),t.child)}function Uc(e,t,i,a,u){if(e===null){var d=i.type;return typeof d=="function"&&!Ya(d)&&d.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=d,Bc(e,t,d,a,u)):(e=Ai(i.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&u)===0){var p=d.memoizedProps;if(i=i.compare,i=i!==null?i:Gr,i(p,a)&&e.ref===t.ref)return Gt(e,t,u)}return t.flags|=1,e=gn(d,a),e.ref=t.ref,e.return=t,t.child=e}function Bc(e,t,i,a,u){if(e!==null){var d=e.memoizedProps;if(Gr(d,a)&&e.ref===t.ref)if(it=!1,t.pendingProps=a=d,(e.lanes&u)!==0)(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,Gt(e,t,u)}return ja(e,t,i,a,u)}function zc(e,t,i){var a=t.pendingProps,u=a.children,d=e!==null?e.memoizedState:null;if(a.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(dr,ft),ft|=i;else{if((i&1073741824)===0)return e=d!==null?d.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(dr,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=d!==null?d.baseLanes:i,_e(dr,ft),ft|=a}else d!==null?(a=d.baseLanes|i,t.memoizedState=null):a=i,_e(dr,ft),ft|=a;return et(e,t,u,i),t.child}function Fc(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function ja(e,t,i,a,u){var d=st(i)?xn:Je.current;return d=tr(t,d),ar(t,u),i=wa(e,t,i,a,d,u),a=_a(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Gt(e,t,u)):(be&&a&&na(t),t.flags|=1,et(e,t,i,u),t.child)}function Wc(e,t,i,a,u){if(st(i)){var d=!0;si(t)}else d=!1;if(ar(t,u),t.stateNode===null)Si(e,t),Nc(t,i,a),Ta(t,i,a,u),a=!0;else if(e===null){var p=t.stateNode,y=t.memoizedProps;p.props=y;var _=p.context,j=i.contextType;typeof j=="object"&&j!==null?j=wt(j):(j=st(i)?xn:Je.current,j=tr(t,j));var D=i.getDerivedStateFromProps,$=typeof D=="function"||typeof p.getSnapshotBeforeUpdate=="function";$||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==a||_!==j)&&Rc(t,p,a,j),un=!1;var A=t.memoizedState;p.state=A,fi(t,a,p,u),_=t.memoizedState,y!==a||A!==_||rt.current||un?(typeof D=="function"&&(ba(t,i,D,a),_=t.memoizedState),(y=un||Pc(t,i,y,a,A,_,j))?($||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=_),p.props=a,p.state=_,p.context=j,a=y):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{p=t.stateNode,ic(e,t),y=t.memoizedProps,j=t.type===t.elementType?y:Tt(t.type,y),p.props=j,$=t.pendingProps,A=p.context,_=i.contextType,typeof _=="object"&&_!==null?_=wt(_):(_=st(i)?xn:Je.current,_=tr(t,_));var F=i.getDerivedStateFromProps;(D=typeof F=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(y!==$||A!==_)&&Rc(t,p,a,_),un=!1,A=t.memoizedState,p.state=A,fi(t,a,p,u);var H=t.memoizedState;y!==$||A!==H||rt.current||un?(typeof F=="function"&&(ba(t,i,F,a),H=t.memoizedState),(j=un||Pc(t,i,j,a,A,H,_)||!1)?(D||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(a,H,_),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(a,H,_)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=H),p.props=a,p.state=H,p.context=_,a=j):(typeof p.componentDidUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&A===e.memoizedState||(t.flags|=1024),a=!1)}return Pa(e,t,i,a,d,u)}function Pa(e,t,i,a,u,d){Fc(e,t);var p=(t.flags&128)!==0;if(!a&&!p)return u&&Gu(t,i,!1),Gt(e,t,d);a=t.stateNode,gp.current=t;var y=p&&typeof i.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&p?(t.child=ir(t,e.child,null,d),t.child=ir(t,null,y,d)):et(e,t,y,d),t.memoizedState=a.state,u&&Gu(t,i,!0),t.child}function qc(e){var t=e.stateNode;t.pendingContext?Vu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vu(e,t.context,!1),fa(e,t.containerInfo)}function Hc(e,t,i,a,u){return sr(),oa(u),t.flags|=256,et(e,t,i,a),t.child}var Na={dehydrated:null,treeContext:null,retryLane:0};function Ra(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vc(e,t,i){var a=t.pendingProps,u=Ce.current,d=!1,p=(t.flags&128)!==0,y;if((y=p)||(y=e!==null&&e.memoizedState===null?!1:(u&2)!==0),y?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),_e(Ce,u&1),e===null)return ia(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(p=a.children,e=a.fallback,d?(a=t.mode,d=t.child,p={mode:"hidden",children:p},(a&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=p):d=Ii(p,a,0,null),e=An(e,a,i,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=Ra(i),t.memoizedState=Na,e):Aa(t,p));if(u=e.memoizedState,u!==null&&(y=u.dehydrated,y!==null))return vp(e,t,p,a,y,u,i);if(d){d=a.fallback,p=t.mode,u=e.child,y=u.sibling;var _={mode:"hidden",children:a.children};return(p&1)===0&&t.child!==u?(a=t.child,a.childLanes=0,a.pendingProps=_,t.deletions=null):(a=gn(u,_),a.subtreeFlags=u.subtreeFlags&14680064),y!==null?d=gn(y,d):(d=An(d,p,i,null),d.flags|=2),d.return=t,a.return=t,a.sibling=d,t.child=a,a=d,d=t.child,p=e.child.memoizedState,p=p===null?Ra(i):{baseLanes:p.baseLanes|i,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~i,t.memoizedState=Na,a}return d=e.child,e=d.sibling,a=gn(d,{mode:"visible",children:a.children}),(t.mode&1)===0&&(a.lanes=i),a.return=t,a.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=a,t.memoizedState=null,a}function Aa(e,t){return t=Ii({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ki(e,t,i,a){return a!==null&&oa(a),ir(t,e.child,null,i),e=Aa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vp(e,t,i,a,u,d,p){if(i)return t.flags&256?(t.flags&=-257,a=Ca(Error(r(422))),ki(e,t,p,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=a.fallback,u=t.mode,a=Ii({mode:"visible",children:a.children},u,0,null),d=An(d,u,p,null),d.flags|=2,a.return=t,d.return=t,a.sibling=d,t.child=a,(t.mode&1)!==0&&ir(t,e.child,null,p),t.child.memoizedState=Ra(p),t.memoizedState=Na,d);if((t.mode&1)===0)return ki(e,t,p,null);if(u.data==="$!"){if(a=u.nextSibling&&u.nextSibling.dataset,a)var y=a.dgst;return a=y,d=Error(r(419)),a=Ca(d,a,void 0),ki(e,t,p,a)}if(y=(p&e.childLanes)!==0,it||y){if(a=Fe,a!==null){switch(p&-p){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=(u&(a.suspendedLanes|p))!==0?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,Vt(e,u),jt(a,e,u,-1))}return Ja(),a=Ca(Error(r(421))),ki(e,t,p,a)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=Pp.bind(null,e),u._reactRetry=t,null):(e=d.treeContext,ht=sn(u.nextSibling),dt=t,be=!0,bt=null,e!==null&&(vt[yt++]=qt,vt[yt++]=Ht,vt[yt++]=En,qt=e.id,Ht=e.overflow,En=t),t=Aa(t,a.children),t.flags|=4096,t)}function Kc(e,t,i){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ca(e.return,t,i)}function Ia(e,t,i,a,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:i,tailMode:u}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=a,d.tail=i,d.tailMode=u)}function Gc(e,t,i){var a=t.pendingProps,u=a.revealOrder,d=a.tail;if(et(e,t,a.children,i),a=Ce.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kc(e,i,t);else if(e.tag===19)Kc(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(_e(Ce,a),(t.mode&1)===0)t.memoizedState=null;else switch(u){case"forwards":for(i=t.child,u=null;i!==null;)e=i.alternate,e!==null&&pi(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=t.child,t.child=null):(u=i.sibling,i.sibling=null),Ia(t,!1,u,i,d);break;case"backwards":for(i=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&pi(e)===null){t.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}Ia(t,!0,i,null,d);break;case"together":Ia(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Si(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),jn|=t.lanes,(i&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,i=gn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=gn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function yp(e,t,i){switch(t.tag){case 3:qc(t),sr();break;case 5:lc(t);break;case 1:st(t.type)&&si(t);break;case 4:fa(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,u=t.memoizedProps.value;_e(ci,a._currentValue),a._currentValue=u;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(_e(Ce,Ce.current&1),t.flags|=128,null):(i&t.child.childLanes)!==0?Vc(e,t,i):(_e(Ce,Ce.current&1),e=Gt(e,t,i),e!==null?e.sibling:null);_e(Ce,Ce.current&1);break;case 19:if(a=(i&t.childLanes)!==0,(e.flags&128)!==0){if(a)return Gc(e,t,i);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),_e(Ce,Ce.current),a)break;return null;case 22:case 23:return t.lanes=0,zc(e,t,i)}return Gt(e,t,i)}var Jc,Da,Yc,Qc;Jc=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Da=function(){},Yc=function(e,t,i,a){var u=e.memoizedProps;if(u!==a){e=t.stateNode,Cn(Lt.current);var d=null;switch(i){case"input":u=uo(e,u),a=uo(e,a),d=[];break;case"select":u=q({},u,{value:void 0}),a=q({},a,{value:void 0}),d=[];break;case"textarea":u=fo(e,u),a=fo(e,a),d=[];break;default:typeof u.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=ti)}mo(i,a);var p;i=null;for(j in u)if(!a.hasOwnProperty(j)&&u.hasOwnProperty(j)&&u[j]!=null)if(j==="style"){var y=u[j];for(p in y)y.hasOwnProperty(p)&&(i||(i={}),i[p]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(l.hasOwnProperty(j)?d||(d=[]):(d=d||[]).push(j,null));for(j in a){var _=a[j];if(y=u!=null?u[j]:void 0,a.hasOwnProperty(j)&&_!==y&&(_!=null||y!=null))if(j==="style")if(y){for(p in y)!y.hasOwnProperty(p)||_&&_.hasOwnProperty(p)||(i||(i={}),i[p]="");for(p in _)_.hasOwnProperty(p)&&y[p]!==_[p]&&(i||(i={}),i[p]=_[p])}else i||(d||(d=[]),d.push(j,i)),i=_;else j==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,y=y?y.__html:void 0,_!=null&&y!==_&&(d=d||[]).push(j,_)):j==="children"?typeof _!="string"&&typeof _!="number"||(d=d||[]).push(j,""+_):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(l.hasOwnProperty(j)?(_!=null&&j==="onScroll"&&Se("scroll",e),d||y===_||(d=[])):(d=d||[]).push(j,_))}i&&(d=d||[]).push("style",i);var j=d;(t.updateQueue=j)&&(t.flags|=4)}},Qc=function(e,t,i,a){i!==a&&(t.flags|=4)};function us(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,a=0;if(t)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,a|=u.subtreeFlags&14680064,a|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=i,t}function wp(e,t,i){var a=t.pendingProps;switch(ra(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qe(t),null;case 1:return st(t.type)&&ri(),Qe(t),null;case 3:return a=t.stateNode,lr(),xe(rt),xe(Je),ga(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,bt!==null&&(Va(bt),bt=null))),Da(e,t),Qe(t),null;case 5:pa(t);var u=Cn(ss.current);if(i=t.type,e!==null&&t.stateNode!=null)Yc(e,t,i,a,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(r(166));return Qe(t),null}if(e=Cn(Lt.current),li(t)){a=t.stateNode,i=t.type;var d=t.memoizedProps;switch(a[Dt]=t,a[Zr]=d,e=(t.mode&1)!==0,i){case"dialog":Se("cancel",a),Se("close",a);break;case"iframe":case"object":case"embed":Se("load",a);break;case"video":case"audio":for(u=0;u<Yr.length;u++)Se(Yr[u],a);break;case"source":Se("error",a);break;case"img":case"image":case"link":Se("error",a),Se("load",a);break;case"details":Se("toggle",a);break;case"input":Nl(a,d),Se("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!d.multiple},Se("invalid",a);break;case"textarea":Il(a,d),Se("invalid",a)}mo(i,d),u=null;for(var p in d)if(d.hasOwnProperty(p)){var y=d[p];p==="children"?typeof y=="string"?a.textContent!==y&&(d.suppressHydrationWarning!==!0&&ei(a.textContent,y,e),u=["children",y]):typeof y=="number"&&a.textContent!==""+y&&(d.suppressHydrationWarning!==!0&&ei(a.textContent,y,e),u=["children",""+y]):l.hasOwnProperty(p)&&y!=null&&p==="onScroll"&&Se("scroll",a)}switch(i){case"input":Ns(a),Al(a,d,!0);break;case"textarea":Ns(a),Ll(a);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(a.onclick=ti)}a=u,t.updateQueue=a,a!==null&&(t.flags|=4)}else{p=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$l(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=p.createElement(i,{is:a.is}):(e=p.createElement(i),i==="select"&&(p=e,a.multiple?p.multiple=!0:a.size&&(p.size=a.size))):e=p.createElementNS(e,i),e[Dt]=t,e[Zr]=a,Jc(e,t,!1,!1),t.stateNode=e;e:{switch(p=go(i,a),i){case"dialog":Se("cancel",e),Se("close",e),u=a;break;case"iframe":case"object":case"embed":Se("load",e),u=a;break;case"video":case"audio":for(u=0;u<Yr.length;u++)Se(Yr[u],e);u=a;break;case"source":Se("error",e),u=a;break;case"img":case"image":case"link":Se("error",e),Se("load",e),u=a;break;case"details":Se("toggle",e),u=a;break;case"input":Nl(e,a),u=uo(e,a),Se("invalid",e);break;case"option":u=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},u=q({},a,{value:void 0}),Se("invalid",e);break;case"textarea":Il(e,a),u=fo(e,a),Se("invalid",e);break;default:u=a}mo(i,u),y=u;for(d in y)if(y.hasOwnProperty(d)){var _=y[d];d==="style"?Bl(e,_):d==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Ml(e,_)):d==="children"?typeof _=="string"?(i!=="textarea"||_!=="")&&Nr(e,_):typeof _=="number"&&Nr(e,""+_):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(l.hasOwnProperty(d)?_!=null&&d==="onScroll"&&Se("scroll",e):_!=null&&R(e,d,_,p))}switch(i){case"input":Ns(e),Al(e,a,!1);break;case"textarea":Ns(e),Ll(e);break;case"option":a.value!=null&&e.setAttribute("value",""+fe(a.value));break;case"select":e.multiple=!!a.multiple,d=a.value,d!=null?Wn(e,!!a.multiple,d,!1):a.defaultValue!=null&&Wn(e,!!a.multiple,a.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=ti)}switch(i){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qe(t),null;case 6:if(e&&t.stateNode!=null)Qc(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(r(166));if(i=Cn(ss.current),Cn(Lt.current),li(t)){if(a=t.stateNode,i=t.memoizedProps,a[Dt]=t,(d=a.nodeValue!==i)&&(e=dt,e!==null))switch(e.tag){case 3:ei(a.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ei(a.nodeValue,i,(e.mode&1)!==0)}d&&(t.flags|=4)}else a=(i.nodeType===9?i:i.ownerDocument).createTextNode(a),a[Dt]=t,t.stateNode=a}return Qe(t),null;case 13:if(xe(Ce),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&ht!==null&&(t.mode&1)!==0&&(t.flags&128)===0)ec(),sr(),t.flags|=98560,d=!1;else if(d=li(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Dt]=t}else sr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Qe(t),d=!1}else bt!==null&&(Va(bt),bt=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=i,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ce.current&1)!==0?Ue===0&&(Ue=3):Ja())),t.updateQueue!==null&&(t.flags|=4),Qe(t),null);case 4:return lr(),Da(e,t),e===null&&Qr(t.stateNode.containerInfo),Qe(t),null;case 10:return ua(t.type._context),Qe(t),null;case 17:return st(t.type)&&ri(),Qe(t),null;case 19:if(xe(Ce),d=t.memoizedState,d===null)return Qe(t),null;if(a=(t.flags&128)!==0,p=d.rendering,p===null)if(a)us(d,!1);else{if(Ue!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(p=pi(e),p!==null){for(t.flags|=128,us(d,!1),a=p.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=i,i=t.child;i!==null;)d=i,e=a,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return _e(Ce,Ce.current&1|2),t.child}e=e.sibling}d.tail!==null&&Re()>hr&&(t.flags|=128,a=!0,us(d,!1),t.lanes=4194304)}else{if(!a)if(e=pi(p),e!==null){if(t.flags|=128,a=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),us(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!be)return Qe(t),null}else 2*Re()-d.renderingStartTime>hr&&i!==1073741824&&(t.flags|=128,a=!0,us(d,!1),t.lanes=4194304);d.isBackwards?(p.sibling=t.child,t.child=p):(i=d.last,i!==null?i.sibling=p:t.child=p,d.last=p)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Re(),t.sibling=null,i=Ce.current,_e(Ce,a?i&1|2:i&1),t):(Qe(t),null);case 22:case 23:return Ga(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&(t.mode&1)!==0?(ft&1073741824)!==0&&(Qe(t),t.subtreeFlags&6&&(t.flags|=8192)):Qe(t),null;case 24:return null;case 25:return null}throw Error(r(156,t.tag))}function _p(e,t){switch(ra(t),t.tag){case 1:return st(t.type)&&ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lr(),xe(rt),xe(Je),ga(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return pa(t),null;case 13:if(xe(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));sr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(Ce),null;case 4:return lr(),null;case 10:return ua(t.type._context),null;case 22:case 23:return Ga(),null;case 24:return null;default:return null}}var xi=!1,Xe=!1,kp=typeof WeakSet=="function"?WeakSet:Set,W=null;function cr(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(a){Pe(e,t,a)}else i.current=null}function La(e,t,i){try{i()}catch(a){Pe(e,t,a)}}var Xc=!1;function Sp(e,t){if(Go=Ws,e=Pu(),Bo(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var a=i.getSelection&&i.getSelection();if(a&&a.rangeCount!==0){i=a.anchorNode;var u=a.anchorOffset,d=a.focusNode;a=a.focusOffset;try{i.nodeType,d.nodeType}catch{i=null;break e}var p=0,y=-1,_=-1,j=0,D=0,$=e,A=null;t:for(;;){for(var F;$!==i||u!==0&&$.nodeType!==3||(y=p+u),$!==d||a!==0&&$.nodeType!==3||(_=p+a),$.nodeType===3&&(p+=$.nodeValue.length),(F=$.firstChild)!==null;)A=$,$=F;for(;;){if($===e)break t;if(A===i&&++j===u&&(y=p),A===d&&++D===a&&(_=p),(F=$.nextSibling)!==null)break;$=A,A=$.parentNode}$=F}i=y===-1||_===-1?null:{start:y,end:_}}else i=null}i=i||{start:0,end:0}}else i=null;for(Jo={focusedElem:e,selectionRange:i},Ws=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var H=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var V=H.memoizedProps,Ae=H.memoizedState,T=t.stateNode,S=T.getSnapshotBeforeUpdate(t.elementType===t.type?V:Tt(t.type,V),Ae);T.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(U){Pe(t,t.return,U)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return H=Xc,Xc=!1,H}function cs(e,t,i){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&e)===e){var d=u.destroy;u.destroy=void 0,d!==void 0&&La(t,i,d)}u=u.next}while(u!==a)}}function Ei(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var a=i.create;i.destroy=a()}i=i.next}while(i!==t)}}function $a(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function Zc(e){var t=e.alternate;t!==null&&(e.alternate=null,Zc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Dt],delete t[Zr],delete t[Zo],delete t[sp],delete t[ip])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ed(e){return e.tag===5||e.tag===3||e.tag===4}function td(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ed(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ma(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=ti));else if(a!==4&&(e=e.child,e!==null))for(Ma(e,t,i),e=e.sibling;e!==null;)Ma(e,t,i),e=e.sibling}function Ua(e,t,i){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Ua(e,t,i),e=e.sibling;e!==null;)Ua(e,t,i),e=e.sibling}var He=null,Ct=!1;function dn(e,t,i){for(i=i.child;i!==null;)nd(e,t,i),i=i.sibling}function nd(e,t,i){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount($s,i)}catch{}switch(i.tag){case 5:Xe||cr(i,t);case 6:var a=He,u=Ct;He=null,dn(e,t,i),He=a,Ct=u,He!==null&&(Ct?(e=He,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):He.removeChild(i.stateNode));break;case 18:He!==null&&(Ct?(e=He,i=i.stateNode,e.nodeType===8?Xo(e.parentNode,i):e.nodeType===1&&Xo(e,i),Fr(e)):Xo(He,i.stateNode));break;case 4:a=He,u=Ct,He=i.stateNode.containerInfo,Ct=!0,dn(e,t,i),He=a,Ct=u;break;case 0:case 11:case 14:case 15:if(!Xe&&(a=i.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){u=a=a.next;do{var d=u,p=d.destroy;d=d.tag,p!==void 0&&((d&2)!==0||(d&4)!==0)&&La(i,t,p),u=u.next}while(u!==a)}dn(e,t,i);break;case 1:if(!Xe&&(cr(i,t),a=i.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=i.memoizedProps,a.state=i.memoizedState,a.componentWillUnmount()}catch(y){Pe(i,t,y)}dn(e,t,i);break;case 21:dn(e,t,i);break;case 22:i.mode&1?(Xe=(a=Xe)||i.memoizedState!==null,dn(e,t,i),Xe=a):dn(e,t,i);break;default:dn(e,t,i)}}function rd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new kp),t.forEach(function(a){var u=Np.bind(null,e,a);i.has(a)||(i.add(a),a.then(u,u))})}}function Ot(e,t){var i=t.deletions;if(i!==null)for(var a=0;a<i.length;a++){var u=i[a];try{var d=e,p=t,y=p;e:for(;y!==null;){switch(y.tag){case 5:He=y.stateNode,Ct=!1;break e;case 3:He=y.stateNode.containerInfo,Ct=!0;break e;case 4:He=y.stateNode.containerInfo,Ct=!0;break e}y=y.return}if(He===null)throw Error(r(160));nd(d,p,u),He=null,Ct=!1;var _=u.alternate;_!==null&&(_.return=null),u.return=null}catch(j){Pe(u,t,j)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)sd(t,e),t=t.sibling}function sd(e,t){var i=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Mt(e),a&4){try{cs(3,e,e.return),Ei(3,e)}catch(V){Pe(e,e.return,V)}try{cs(5,e,e.return)}catch(V){Pe(e,e.return,V)}}break;case 1:Ot(t,e),Mt(e),a&512&&i!==null&&cr(i,i.return);break;case 5:if(Ot(t,e),Mt(e),a&512&&i!==null&&cr(i,i.return),e.flags&32){var u=e.stateNode;try{Nr(u,"")}catch(V){Pe(e,e.return,V)}}if(a&4&&(u=e.stateNode,u!=null)){var d=e.memoizedProps,p=i!==null?i.memoizedProps:d,y=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{y==="input"&&d.type==="radio"&&d.name!=null&&Rl(u,d),go(y,p);var j=go(y,d);for(p=0;p<_.length;p+=2){var D=_[p],$=_[p+1];D==="style"?Bl(u,$):D==="dangerouslySetInnerHTML"?Ml(u,$):D==="children"?Nr(u,$):R(u,D,$,j)}switch(y){case"input":co(u,d);break;case"textarea":Dl(u,d);break;case"select":var A=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var F=d.value;F!=null?Wn(u,!!d.multiple,F,!1):A!==!!d.multiple&&(d.defaultValue!=null?Wn(u,!!d.multiple,d.defaultValue,!0):Wn(u,!!d.multiple,d.multiple?[]:"",!1))}u[Zr]=d}catch(V){Pe(e,e.return,V)}}break;case 6:if(Ot(t,e),Mt(e),a&4){if(e.stateNode===null)throw Error(r(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(V){Pe(e,e.return,V)}}break;case 3:if(Ot(t,e),Mt(e),a&4&&i!==null&&i.memoizedState.isDehydrated)try{Fr(t.containerInfo)}catch(V){Pe(e,e.return,V)}break;case 4:Ot(t,e),Mt(e);break;case 13:Ot(t,e),Mt(e),u=e.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(Fa=Re())),a&4&&rd(e);break;case 22:if(D=i!==null&&i.memoizedState!==null,e.mode&1?(Xe=(j=Xe)||D,Ot(t,e),Xe=j):Ot(t,e),Mt(e),a&8192){if(j=e.memoizedState!==null,(e.stateNode.isHidden=j)&&!D&&(e.mode&1)!==0)for(W=e,D=e.child;D!==null;){for($=W=D;W!==null;){switch(A=W,F=A.child,A.tag){case 0:case 11:case 14:case 15:cs(4,A,A.return);break;case 1:cr(A,A.return);var H=A.stateNode;if(typeof H.componentWillUnmount=="function"){a=A,i=A.return;try{t=a,H.props=t.memoizedProps,H.state=t.memoizedState,H.componentWillUnmount()}catch(V){Pe(a,i,V)}}break;case 5:cr(A,A.return);break;case 22:if(A.memoizedState!==null){ad($);continue}}F!==null?(F.return=A,W=F):ad($)}D=D.sibling}e:for(D=null,$=e;;){if($.tag===5){if(D===null){D=$;try{u=$.stateNode,j?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(y=$.stateNode,_=$.memoizedProps.style,p=_!=null&&_.hasOwnProperty("display")?_.display:null,y.style.display=Ul("display",p))}catch(V){Pe(e,e.return,V)}}}else if($.tag===6){if(D===null)try{$.stateNode.nodeValue=j?"":$.memoizedProps}catch(V){Pe(e,e.return,V)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===e)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===e)break e;for(;$.sibling===null;){if($.return===null||$.return===e)break e;D===$&&(D=null),$=$.return}D===$&&(D=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:Ot(t,e),Mt(e),a&4&&rd(e);break;case 21:break;default:Ot(t,e),Mt(e)}}function Mt(e){var t=e.flags;if(t&2){try{e:{for(var i=e.return;i!==null;){if(ed(i)){var a=i;break e}i=i.return}throw Error(r(160))}switch(a.tag){case 5:var u=a.stateNode;a.flags&32&&(Nr(u,""),a.flags&=-33);var d=td(e);Ua(e,d,u);break;case 3:case 4:var p=a.stateNode.containerInfo,y=td(e);Ma(e,y,p);break;default:throw Error(r(161))}}catch(_){Pe(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xp(e,t,i){W=e,id(e)}function id(e,t,i){for(var a=(e.mode&1)!==0;W!==null;){var u=W,d=u.child;if(u.tag===22&&a){var p=u.memoizedState!==null||xi;if(!p){var y=u.alternate,_=y!==null&&y.memoizedState!==null||Xe;y=xi;var j=Xe;if(xi=p,(Xe=_)&&!j)for(W=u;W!==null;)p=W,_=p.child,p.tag===22&&p.memoizedState!==null?ld(u):_!==null?(_.return=p,W=_):ld(u);for(;d!==null;)W=d,id(d),d=d.sibling;W=u,xi=y,Xe=j}od(e)}else(u.subtreeFlags&8772)!==0&&d!==null?(d.return=u,W=d):od(e)}}function od(e){for(;W!==null;){var t=W;if((t.flags&8772)!==0){var i=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Xe||Ei(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Xe)if(i===null)a.componentDidMount();else{var u=t.elementType===t.type?i.memoizedProps:Tt(t.type,i.memoizedProps);a.componentDidUpdate(u,i.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&ac(t,d,a);break;case 3:var p=t.updateQueue;if(p!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}ac(t,p,i)}break;case 5:var y=t.stateNode;if(i===null&&t.flags&4){i=y;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&i.focus();break;case"img":_.src&&(i.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var j=t.alternate;if(j!==null){var D=j.memoizedState;if(D!==null){var $=D.dehydrated;$!==null&&Fr($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Xe||t.flags&512&&$a(t)}catch(A){Pe(t,t.return,A)}}if(t===e){W=null;break}if(i=t.sibling,i!==null){i.return=t.return,W=i;break}W=t.return}}function ad(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var i=t.sibling;if(i!==null){i.return=t.return,W=i;break}W=t.return}}function ld(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{Ei(4,t)}catch(_){Pe(t,i,_)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var u=t.return;try{a.componentDidMount()}catch(_){Pe(t,u,_)}}var d=t.return;try{$a(t)}catch(_){Pe(t,d,_)}break;case 5:var p=t.return;try{$a(t)}catch(_){Pe(t,p,_)}}}catch(_){Pe(t,t.return,_)}if(t===e){W=null;break}var y=t.sibling;if(y!==null){y.return=t.return,W=y;break}W=t.return}}var Ep=Math.ceil,bi=B.ReactCurrentDispatcher,Ba=B.ReactCurrentOwner,kt=B.ReactCurrentBatchConfig,le=0,Fe=null,De=null,Ve=0,ft=0,dr=on(0),Ue=0,ds=null,jn=0,Ti=0,za=0,hs=null,ot=null,Fa=0,hr=1/0,Jt=null,Ci=!1,Wa=null,hn=null,Oi=!1,fn=null,ji=0,fs=0,qa=null,Pi=-1,Ni=0;function tt(){return(le&6)!==0?Re():Pi!==-1?Pi:Pi=Re()}function pn(e){return(e.mode&1)===0?1:(le&2)!==0&&Ve!==0?Ve&-Ve:ap.transition!==null?(Ni===0&&(Ni=tu()),Ni):(e=pe,e!==0||(e=window.event,e=e===void 0?16:cu(e.type)),e)}function jt(e,t,i,a){if(50<fs)throw fs=0,qa=null,Error(r(185));$r(e,i,a),((le&2)===0||e!==Fe)&&(e===Fe&&((le&2)===0&&(Ti|=i),Ue===4&&mn(e,Ve)),at(e,a),i===1&&le===0&&(t.mode&1)===0&&(hr=Re()+500,ii&&ln()))}function at(e,t){var i=e.callbackNode;af(e,t);var a=Bs(e,e===Fe?Ve:0);if(a===0)i!==null&&Xl(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(i!=null&&Xl(i),t===1)e.tag===0?op(cd.bind(null,e)):Ju(cd.bind(null,e)),np(function(){(le&6)===0&&ln()}),i=null;else{switch(nu(a)){case 1:i=xo;break;case 4:i=Zl;break;case 16:i=Ls;break;case 536870912:i=eu;break;default:i=Ls}i=yd(i,ud.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function ud(e,t){if(Pi=-1,Ni=0,(le&6)!==0)throw Error(r(327));var i=e.callbackNode;if(fr()&&e.callbackNode!==i)return null;var a=Bs(e,e===Fe?Ve:0);if(a===0)return null;if((a&30)!==0||(a&e.expiredLanes)!==0||t)t=Ri(e,a);else{t=a;var u=le;le|=2;var d=hd();(Fe!==e||Ve!==t)&&(Jt=null,hr=Re()+500,Nn(e,t));do try{Cp();break}catch(y){dd(e,y)}while(!0);la(),bi.current=d,le=u,De!==null?t=0:(Fe=null,Ve=0,t=Ue)}if(t!==0){if(t===2&&(u=Eo(e),u!==0&&(a=u,t=Ha(e,u))),t===1)throw i=ds,Nn(e,0),mn(e,a),at(e,Re()),i;if(t===6)mn(e,a);else{if(u=e.current.alternate,(a&30)===0&&!bp(u)&&(t=Ri(e,a),t===2&&(d=Eo(e),d!==0&&(a=d,t=Ha(e,d))),t===1))throw i=ds,Nn(e,0),mn(e,a),at(e,Re()),i;switch(e.finishedWork=u,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:Rn(e,ot,Jt);break;case 3:if(mn(e,a),(a&130023424)===a&&(t=Fa+500-Re(),10<t)){if(Bs(e,0)!==0)break;if(u=e.suspendedLanes,(u&a)!==a){tt(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=Qo(Rn.bind(null,e,ot,Jt),t);break}Rn(e,ot,Jt);break;case 4:if(mn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,u=-1;0<a;){var p=31-xt(a);d=1<<p,p=t[p],p>u&&(u=p),a&=~d}if(a=u,a=Re()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ep(a/1960))-a,10<a){e.timeoutHandle=Qo(Rn.bind(null,e,ot,Jt),a);break}Rn(e,ot,Jt);break;case 5:Rn(e,ot,Jt);break;default:throw Error(r(329))}}}return at(e,Re()),e.callbackNode===i?ud.bind(null,e):null}function Ha(e,t){var i=hs;return e.current.memoizedState.isDehydrated&&(Nn(e,t).flags|=256),e=Ri(e,t),e!==2&&(t=ot,ot=i,t!==null&&Va(t)),e}function Va(e){ot===null?ot=e:ot.push.apply(ot,e)}function bp(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var a=0;a<i.length;a++){var u=i[a],d=u.getSnapshot;u=u.value;try{if(!Et(d(),u))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mn(e,t){for(t&=~za,t&=~Ti,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-xt(t),a=1<<i;e[i]=-1,t&=~a}}function cd(e){if((le&6)!==0)throw Error(r(327));fr();var t=Bs(e,0);if((t&1)===0)return at(e,Re()),null;var i=Ri(e,t);if(e.tag!==0&&i===2){var a=Eo(e);a!==0&&(t=a,i=Ha(e,a))}if(i===1)throw i=ds,Nn(e,0),mn(e,t),at(e,Re()),i;if(i===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,ot,Jt),at(e,Re()),null}function Ka(e,t){var i=le;le|=1;try{return e(t)}finally{le=i,le===0&&(hr=Re()+500,ii&&ln())}}function Pn(e){fn!==null&&fn.tag===0&&(le&6)===0&&fr();var t=le;le|=1;var i=kt.transition,a=pe;try{if(kt.transition=null,pe=1,e)return e()}finally{pe=a,kt.transition=i,le=t,(le&6)===0&&ln()}}function Ga(){ft=dr.current,xe(dr)}function Nn(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,tp(i)),De!==null)for(i=De.return;i!==null;){var a=i;switch(ra(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&ri();break;case 3:lr(),xe(rt),xe(Je),ga();break;case 5:pa(a);break;case 4:lr();break;case 13:xe(Ce);break;case 19:xe(Ce);break;case 10:ua(a.type._context);break;case 22:case 23:Ga()}i=i.return}if(Fe=e,De=e=gn(e.current,null),Ve=ft=t,Ue=0,ds=null,za=Ti=jn=0,ot=hs=null,Tn!==null){for(t=0;t<Tn.length;t++)if(i=Tn[t],a=i.interleaved,a!==null){i.interleaved=null;var u=a.next,d=i.pending;if(d!==null){var p=d.next;d.next=u,a.next=p}i.pending=a}Tn=null}return e}function dd(e,t){do{var i=De;try{if(la(),mi.current=wi,gi){for(var a=Oe.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}gi=!1}if(On=0,ze=Me=Oe=null,is=!1,os=0,Ba.current=null,i===null||i.return===null){Ue=1,ds=t,De=null;break}e:{var d=e,p=i.return,y=i,_=t;if(t=Ve,y.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var j=_,D=y,$=D.tag;if((D.mode&1)===0&&($===0||$===11||$===15)){var A=D.alternate;A?(D.updateQueue=A.updateQueue,D.memoizedState=A.memoizedState,D.lanes=A.lanes):(D.updateQueue=null,D.memoizedState=null)}var F=Lc(p);if(F!==null){F.flags&=-257,$c(F,p,y,d,t),F.mode&1&&Dc(d,j,t),t=F,_=j;var H=t.updateQueue;if(H===null){var V=new Set;V.add(_),t.updateQueue=V}else H.add(_);break e}else{if((t&1)===0){Dc(d,j,t),Ja();break e}_=Error(r(426))}}else if(be&&y.mode&1){var Ae=Lc(p);if(Ae!==null){(Ae.flags&65536)===0&&(Ae.flags|=256),$c(Ae,p,y,d,t),oa(ur(_,y));break e}}d=_=ur(_,y),Ue!==4&&(Ue=2),hs===null?hs=[d]:hs.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var T=Ac(d,_,t);oc(d,T);break e;case 1:y=_;var S=d.type,O=d.stateNode;if((d.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(hn===null||!hn.has(O)))){d.flags|=65536,t&=-t,d.lanes|=t;var U=Ic(d,y,t);oc(d,U);break e}}d=d.return}while(d!==null)}pd(i)}catch(K){t=K,De===i&&i!==null&&(De=i=i.return);continue}break}while(!0)}function hd(){var e=bi.current;return bi.current=wi,e===null?wi:e}function Ja(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Fe===null||(jn&268435455)===0&&(Ti&268435455)===0||mn(Fe,Ve)}function Ri(e,t){var i=le;le|=2;var a=hd();(Fe!==e||Ve!==t)&&(Jt=null,Nn(e,t));do try{Tp();break}catch(u){dd(e,u)}while(!0);if(la(),le=i,bi.current=a,De!==null)throw Error(r(261));return Fe=null,Ve=0,Ue}function Tp(){for(;De!==null;)fd(De)}function Cp(){for(;De!==null&&!Qh();)fd(De)}function fd(e){var t=vd(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?pd(e):De=t,Ba.current=null}function pd(e){var t=e;do{var i=t.alternate;if(e=t.return,(t.flags&32768)===0){if(i=wp(i,t,ft),i!==null){De=i;return}}else{if(i=_p(i,t),i!==null){i.flags&=32767,De=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,De=null;return}}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Ue===0&&(Ue=5)}function Rn(e,t,i){var a=pe,u=kt.transition;try{kt.transition=null,pe=1,Op(e,t,i,a)}finally{kt.transition=u,pe=a}return null}function Op(e,t,i,a){do fr();while(fn!==null);if((le&6)!==0)throw Error(r(327));i=e.finishedWork;var u=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var d=i.lanes|i.childLanes;if(lf(e,d),e===Fe&&(De=Fe=null,Ve=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||Oi||(Oi=!0,yd(Ls,function(){return fr(),null})),d=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||d){d=kt.transition,kt.transition=null;var p=pe;pe=1;var y=le;le|=4,Ba.current=null,Sp(e,i),sd(i,e),Gf(Jo),Ws=!!Go,Jo=Go=null,e.current=i,xp(i),Xh(),le=y,pe=p,kt.transition=d}else e.current=i;if(Oi&&(Oi=!1,fn=e,ji=u),d=e.pendingLanes,d===0&&(hn=null),tf(i.stateNode),at(e,Re()),t!==null)for(a=e.onRecoverableError,i=0;i<t.length;i++)u=t[i],a(u.value,{componentStack:u.stack,digest:u.digest});if(Ci)throw Ci=!1,e=Wa,Wa=null,e;return(ji&1)!==0&&e.tag!==0&&fr(),d=e.pendingLanes,(d&1)!==0?e===qa?fs++:(fs=0,qa=e):fs=0,ln(),null}function fr(){if(fn!==null){var e=nu(ji),t=kt.transition,i=pe;try{if(kt.transition=null,pe=16>e?16:e,fn===null)var a=!1;else{if(e=fn,fn=null,ji=0,(le&6)!==0)throw Error(r(331));var u=le;for(le|=4,W=e.current;W!==null;){var d=W,p=d.child;if((W.flags&16)!==0){var y=d.deletions;if(y!==null){for(var _=0;_<y.length;_++){var j=y[_];for(W=j;W!==null;){var D=W;switch(D.tag){case 0:case 11:case 15:cs(8,D,d)}var $=D.child;if($!==null)$.return=D,W=$;else for(;W!==null;){D=W;var A=D.sibling,F=D.return;if(Zc(D),D===j){W=null;break}if(A!==null){A.return=F,W=A;break}W=F}}}var H=d.alternate;if(H!==null){var V=H.child;if(V!==null){H.child=null;do{var Ae=V.sibling;V.sibling=null,V=Ae}while(V!==null)}}W=d}}if((d.subtreeFlags&2064)!==0&&p!==null)p.return=d,W=p;else e:for(;W!==null;){if(d=W,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:cs(9,d,d.return)}var T=d.sibling;if(T!==null){T.return=d.return,W=T;break e}W=d.return}}var S=e.current;for(W=S;W!==null;){p=W;var O=p.child;if((p.subtreeFlags&2064)!==0&&O!==null)O.return=p,W=O;else e:for(p=S;W!==null;){if(y=W,(y.flags&2048)!==0)try{switch(y.tag){case 0:case 11:case 15:Ei(9,y)}}catch(K){Pe(y,y.return,K)}if(y===p){W=null;break e}var U=y.sibling;if(U!==null){U.return=y.return,W=U;break e}W=y.return}}if(le=u,ln(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot($s,e)}catch{}a=!0}return a}finally{pe=i,kt.transition=t}}return!1}function md(e,t,i){t=ur(i,t),t=Ac(e,t,1),e=cn(e,t,1),t=tt(),e!==null&&($r(e,1,t),at(e,t))}function Pe(e,t,i){if(e.tag===3)md(e,e,i);else for(;t!==null;){if(t.tag===3){md(t,e,i);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(hn===null||!hn.has(a))){e=ur(i,e),e=Ic(t,e,1),t=cn(t,e,1),e=tt(),t!==null&&($r(t,1,e),at(t,e));break}}t=t.return}}function jp(e,t,i){var a=e.pingCache;a!==null&&a.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&i,Fe===e&&(Ve&i)===i&&(Ue===4||Ue===3&&(Ve&130023424)===Ve&&500>Re()-Fa?Nn(e,0):za|=i),at(e,t)}function gd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Us,Us<<=1,(Us&130023424)===0&&(Us=4194304)));var i=tt();e=Vt(e,t),e!==null&&($r(e,t,i),at(e,i))}function Pp(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),gd(e,i)}function Np(e,t){var i=0;switch(e.tag){case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}a!==null&&a.delete(t),gd(e,i)}var vd;vd=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||rt.current)it=!0;else{if((e.lanes&i)===0&&(t.flags&128)===0)return it=!1,yp(e,t,i);it=(e.flags&131072)!==0}else it=!1,be&&(t.flags&1048576)!==0&&Yu(t,ai,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Si(e,t),e=t.pendingProps;var u=tr(t,Je.current);ar(t,i),u=wa(null,t,a,e,u,i);var d=_a();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(a)?(d=!0,si(t)):d=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ha(t),u.updater=_i,t.stateNode=u,u._reactInternals=t,Ta(t,a,e,i),t=Pa(null,t,a,!0,d,i)):(t.tag=0,be&&d&&na(t),et(null,t,u,i),t=t.child),t;case 16:a=t.elementType;e:{switch(Si(e,t),e=t.pendingProps,u=a._init,a=u(a._payload),t.type=a,u=t.tag=Ap(a),e=Tt(a,e),u){case 0:t=ja(null,t,a,e,i);break e;case 1:t=Wc(null,t,a,e,i);break e;case 11:t=Mc(null,t,a,e,i);break e;case 14:t=Uc(null,t,a,Tt(a.type,e),i);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Tt(a,u),ja(e,t,a,u,i);case 1:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Tt(a,u),Wc(e,t,a,u,i);case 3:e:{if(qc(t),e===null)throw Error(r(387));a=t.pendingProps,d=t.memoizedState,u=d.element,ic(e,t),fi(t,a,null,i);var p=t.memoizedState;if(a=p.element,d.isDehydrated)if(d={element:a,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){u=ur(Error(r(423)),t),t=Hc(e,t,a,i,u);break e}else if(a!==u){u=ur(Error(r(424)),t),t=Hc(e,t,a,i,u);break e}else for(ht=sn(t.stateNode.containerInfo.firstChild),dt=t,be=!0,bt=null,i=rc(t,null,a,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(sr(),a===u){t=Gt(e,t,i);break e}et(e,t,a,i)}t=t.child}return t;case 5:return lc(t),e===null&&ia(t),a=t.type,u=t.pendingProps,d=e!==null?e.memoizedProps:null,p=u.children,Yo(a,u)?p=null:d!==null&&Yo(a,d)&&(t.flags|=32),Fc(e,t),et(e,t,p,i),t.child;case 6:return e===null&&ia(t),null;case 13:return Vc(e,t,i);case 4:return fa(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ir(t,null,a,i):et(e,t,a,i),t.child;case 11:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Tt(a,u),Mc(e,t,a,u,i);case 7:return et(e,t,t.pendingProps,i),t.child;case 8:return et(e,t,t.pendingProps.children,i),t.child;case 12:return et(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(a=t.type._context,u=t.pendingProps,d=t.memoizedProps,p=u.value,_e(ci,a._currentValue),a._currentValue=p,d!==null)if(Et(d.value,p)){if(d.children===u.children&&!rt.current){t=Gt(e,t,i);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var y=d.dependencies;if(y!==null){p=d.child;for(var _=y.firstContext;_!==null;){if(_.context===a){if(d.tag===1){_=Kt(-1,i&-i),_.tag=2;var j=d.updateQueue;if(j!==null){j=j.shared;var D=j.pending;D===null?_.next=_:(_.next=D.next,D.next=_),j.pending=_}}d.lanes|=i,_=d.alternate,_!==null&&(_.lanes|=i),ca(d.return,i,t),y.lanes|=i;break}_=_.next}}else if(d.tag===10)p=d.type===t.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(r(341));p.lanes|=i,y=p.alternate,y!==null&&(y.lanes|=i),ca(p,i,t),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===t){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}et(e,t,u.children,i),t=t.child}return t;case 9:return u=t.type,a=t.pendingProps.children,ar(t,i),u=wt(u),a=a(u),t.flags|=1,et(e,t,a,i),t.child;case 14:return a=t.type,u=Tt(a,t.pendingProps),u=Tt(a.type,u),Uc(e,t,a,u,i);case 15:return Bc(e,t,t.type,t.pendingProps,i);case 17:return a=t.type,u=t.pendingProps,u=t.elementType===a?u:Tt(a,u),Si(e,t),t.tag=1,st(a)?(e=!0,si(t)):e=!1,ar(t,i),Nc(t,a,u),Ta(t,a,u,i),Pa(null,t,a,!0,e,i);case 19:return Gc(e,t,i);case 22:return zc(e,t,i)}throw Error(r(156,t.tag))};function yd(e,t){return Ql(e,t)}function Rp(e,t,i,a){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,i,a){return new Rp(e,t,i,a)}function Ya(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ap(e){if(typeof e=="function")return Ya(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qe)return 11;if(e===At)return 14}return 2}function gn(e,t){var i=e.alternate;return i===null?(i=St(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ai(e,t,i,a,u,d){var p=2;if(a=e,typeof e=="function")Ya(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case se:return An(i.children,u,d,t);case ye:p=8,u|=8;break;case ve:return e=St(12,i,t,u|2),e.elementType=ve,e.lanes=d,e;case Ie:return e=St(13,i,t,u),e.elementType=Ie,e.lanes=d,e;case Ze:return e=St(19,i,t,u),e.elementType=Ze,e.lanes=d,e;case je:return Ii(i,u,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ae:p=10;break e;case $e:p=9;break e;case qe:p=11;break e;case At:p=14;break e;case nt:p=16,a=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return t=St(p,i,t,u),t.elementType=e,t.type=a,t.lanes=d,t}function An(e,t,i,a){return e=St(7,e,a,t),e.lanes=i,e}function Ii(e,t,i,a){return e=St(22,e,a,t),e.elementType=je,e.lanes=i,e.stateNode={isHidden:!1},e}function Qa(e,t,i){return e=St(6,e,null,t),e.lanes=i,e}function Xa(e,t,i){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ip(e,t,i,a,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bo(0),this.expirationTimes=bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bo(0),this.identifierPrefix=a,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Za(e,t,i,a,u,d,p,y,_){return e=new Ip(e,t,i,y,_),t===1?(t=1,d===!0&&(t|=8)):t=0,d=St(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:a,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ha(d),e}function Dp(e,t,i){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:a==null?null:""+a,children:e,containerInfo:t,implementation:i}}function wd(e){if(!e)return an;e=e._reactInternals;e:{if(kn(e)!==e||e.tag!==1)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(r(171))}if(e.tag===1){var i=e.type;if(st(i))return Ku(e,i,t)}return t}function _d(e,t,i,a,u,d,p,y,_){return e=Za(i,a,!0,e,u,d,p,y,_),e.context=wd(null),i=e.current,a=tt(),u=pn(i),d=Kt(a,u),d.callback=t??null,cn(i,d,u),e.current.lanes=u,$r(e,u,a),at(e,a),e}function Di(e,t,i,a){var u=t.current,d=tt(),p=pn(u);return i=wd(i),t.context===null?t.context=i:t.pendingContext=i,t=Kt(d,p),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=cn(u,t,p),e!==null&&(jt(e,u,p,d),hi(e,u,p)),p}function Li(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function el(e,t){kd(e,t),(e=e.alternate)&&kd(e,t)}function Lp(){return null}var Sd=typeof reportError=="function"?reportError:function(e){console.error(e)};function tl(e){this._internalRoot=e}$i.prototype.render=tl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));Di(e,t,null,null)},$i.prototype.unmount=tl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pn(function(){Di(null,e,null,null)}),t[Ft]=null}};function $i(e){this._internalRoot=e}$i.prototype.unstable_scheduleHydration=function(e){if(e){var t=iu();e={blockedOn:null,target:e,priority:t};for(var i=0;i<tn.length&&t!==0&&t<tn[i].priority;i++);tn.splice(i,0,e),i===0&&lu(e)}};function nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Mi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xd(){}function $p(e,t,i,a,u){if(u){if(typeof a=="function"){var d=a;a=function(){var j=Li(p);d.call(j)}}var p=_d(t,a,e,0,null,!1,!1,"",xd);return e._reactRootContainer=p,e[Ft]=p.current,Qr(e.nodeType===8?e.parentNode:e),Pn(),p}for(;u=e.lastChild;)e.removeChild(u);if(typeof a=="function"){var y=a;a=function(){var j=Li(_);y.call(j)}}var _=Za(e,0,!1,null,null,!1,!1,"",xd);return e._reactRootContainer=_,e[Ft]=_.current,Qr(e.nodeType===8?e.parentNode:e),Pn(function(){Di(t,_,i,a)}),_}function Ui(e,t,i,a,u){var d=i._reactRootContainer;if(d){var p=d;if(typeof u=="function"){var y=u;u=function(){var _=Li(p);y.call(_)}}Di(t,p,e,u)}else p=$p(i,t,e,u,a);return Li(p)}ru=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=Lr(t.pendingLanes);i!==0&&(To(t,i|1),at(t,Re()),(le&6)===0&&(hr=Re()+500,ln()))}break;case 13:Pn(function(){var a=Vt(e,1);if(a!==null){var u=tt();jt(a,e,1,u)}}),el(e,1)}},Co=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var i=tt();jt(t,e,134217728,i)}el(e,134217728)}},su=function(e){if(e.tag===13){var t=pn(e),i=Vt(e,t);if(i!==null){var a=tt();jt(i,e,t,a)}el(e,t)}},iu=function(){return pe},ou=function(e,t){var i=pe;try{return pe=e,t()}finally{pe=i}},wo=function(e,t,i){switch(t){case"input":if(co(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var a=i[t];if(a!==e&&a.form===e.form){var u=ni(a);if(!u)throw Error(r(90));Pl(a),co(a,u)}}}break;case"textarea":Dl(e,i);break;case"select":t=i.value,t!=null&&Wn(e,!!i.multiple,t,!1)}},ql=Ka,Hl=Pn;var Mp={usingClientEntryPoint:!1,Events:[es,Zn,ni,Fl,Wl,Ka]},ps={findFiberByHostInstance:Sn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Up={bundleType:ps.bundleType,version:ps.version,rendererPackageName:ps.rendererPackageName,rendererConfig:ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jl(e),e===null?null:e.stateNode},findFiberByHostInstance:ps.findFiberByHostInstance||Lp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bi.isDisabled&&Bi.supportsFiber)try{$s=Bi.inject(Up),It=Bi}catch{}}return lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mp,lt.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(t))throw Error(r(200));return Dp(e,t,null,i)},lt.createRoot=function(e,t){if(!nl(e))throw Error(r(299));var i=!1,a="",u=Sd;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=Za(e,1,!1,null,null,i,!1,a,u),e[Ft]=t.current,Qr(e.nodeType===8?e.parentNode:e),new tl(t)},lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=Jl(t),e=e===null?null:e.stateNode,e},lt.flushSync=function(e){return Pn(e)},lt.hydrate=function(e,t,i){if(!Mi(t))throw Error(r(200));return Ui(null,e,t,!0,i)},lt.hydrateRoot=function(e,t,i){if(!nl(e))throw Error(r(405));var a=i!=null&&i.hydratedSources||null,u=!1,d="",p=Sd;if(i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(p=i.onRecoverableError)),t=_d(t,null,e,1,i??null,u,!1,d,p),e[Ft]=t.current,Qr(e),a)for(e=0;e<a.length;e++)i=a[e],u=i._getVersion,u=u(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,u]:t.mutableSourceEagerHydrationData.push(i,u);return new $i(t)},lt.render=function(e,t,i){if(!Mi(t))throw Error(r(200));return Ui(null,e,t,!1,i)},lt.unmountComponentAtNode=function(e){if(!Mi(e))throw Error(r(40));return e._reactRootContainer?(Pn(function(){Ui(null,null,e,!1,function(){e._reactRootContainer=null,e[Ft]=null})}),!0):!1},lt.unstable_batchedUpdates=Ka,lt.unstable_renderSubtreeIntoContainer=function(e,t,i,a){if(!Mi(i))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return Ui(e,t,i,!1,a)},lt.version="18.3.1-next-f1338f8080-20240426",lt}var Nd;function Kp(){if(Nd)return il.exports;Nd=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),il.exports=Vp(),il.exports}var Rd;function Gp(){if(Rd)return zi;Rd=1;var s=Kp();return zi.createRoot=s.createRoot,zi.hydrateRoot=s.hydrateRoot,zi}var Jp=Gp();function Yp({currentView:s,onViewChange:n}){return w.jsx("header",{className:"bg-white border-b border-wood-200 shadow-warm",children:w.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"relative",children:w.jsx("img",{src:"/chamonix_calendar/mountains.svg",alt:"",className:"w-16 h-10 object-contain"})}),w.jsxs("div",{children:[w.jsx("h1",{className:"font-display text-2xl font-semibold text-wood-700",children:"Chalet Myosotis"}),w.jsx("p",{className:"text-sm text-wood-500",children:"Chamonix-Mont-Blanc"})]})]}),w.jsxs("nav",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>n("calendar"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="calendar"?"bg-forest-500 text-white":"text-wood-600 hover:bg-wood-100"}`,children:"Calendrier"}),w.jsx("button",{onClick:()=>n("dashboard"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="dashboard"?"bg-forest-500 text-white":"text-wood-600 hover:bg-wood-100"}`,children:"Vue Maman"})]})]})})})}function he(s){const n=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&n==="[object Date]"?new s.constructor(+s):typeof s=="number"||n==="[object Number]"||typeof s=="string"||n==="[object String]"?new Date(s):new Date(NaN)}function zt(s,n){return s instanceof Date?new s.constructor(n):new Date(n)}function Qp(s,n){const r=he(s);return isNaN(n)?zt(s,NaN):(r.setDate(r.getDate()+n),r)}function mh(s,n){const r=he(s);if(isNaN(n))return zt(s,NaN);if(!n)return r;const o=r.getDate(),l=zt(s,r.getTime());l.setMonth(r.getMonth()+n+1,0);const c=l.getDate();return o>=c?l:(r.setFullYear(l.getFullYear(),l.getMonth(),o),r)}const gh=6048e5,Xp=864e5,vh=6e4,yh=36e5;let Zp={};function so(){return Zp}function Or(s,n){var f,m,g,v;const r=so(),o=(n==null?void 0:n.weekStartsOn)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??r.weekStartsOn??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,l=he(s),c=l.getDay(),h=(c<o?7:0)+c-o;return l.setDate(l.getDate()-h),l.setHours(0,0,0,0),l}function Xi(s){return Or(s,{weekStartsOn:1})}function wh(s){const n=he(s),r=n.getFullYear(),o=zt(s,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const l=Xi(o),c=zt(s,0);c.setFullYear(r,0,4),c.setHours(0,0,0,0);const h=Xi(c);return n.getTime()>=l.getTime()?r+1:n.getTime()>=h.getTime()?r:r-1}function Zi(s){const n=he(s);return n.setHours(0,0,0,0),n}function Ad(s){const n=he(s),r=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return r.setUTCFullYear(n.getFullYear()),+s-+r}function _h(s,n){const r=Zi(s),o=Zi(n),l=+r-Ad(r),c=+o-Ad(o);return Math.round((l-c)/Xp)}function em(s){const n=wh(s),r=zt(s,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Xi(r)}function Id(s,n,r){const[o,l]=[+he(s.start),+he(s.end)].sort((f,m)=>f-m),[c,h]=[+he(n.start),+he(n.end)].sort((f,m)=>f-m);return o<h&&c<l}function pr(s,n){const r=Zi(s),o=Zi(n);return+r==+o}function tm(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function nm(s){if(!tm(s)&&typeof s!="number")return!1;const n=he(s);return!isNaN(Number(n))}function Qi(s,n){const r=he(s),o=he(n),l=Dd(r,o),c=Math.abs(_h(r,o));r.setDate(r.getDate()-l*c);const h=+(Dd(r,o)===-l),f=l*(c-h);return f===0?0:f}function Dd(s,n){const r=s.getFullYear()-n.getFullYear()||s.getMonth()-n.getMonth()||s.getDate()-n.getDate()||s.getHours()-n.getHours()||s.getMinutes()-n.getMinutes()||s.getSeconds()-n.getSeconds()||s.getMilliseconds()-n.getMilliseconds();return r<0?-1:r>0?1:r}function Ld(s){const n=he(s),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function rm(s,n){const r=he(s.start),o=he(s.end);let l=+r>+o;const c=l?+r:+o,h=l?o:r;h.setHours(0,0,0,0);let f=1;const m=[];for(;+h<=c;)m.push(he(h)),h.setDate(h.getDate()+f),h.setHours(0,0,0,0);return l?m.reverse():m}function $d(s){const n=he(s);return n.setDate(1),n.setHours(0,0,0,0),n}function sm(s){const n=he(s),r=zt(s,0);return r.setFullYear(n.getFullYear(),0,1),r.setHours(0,0,0,0),r}function im(s,n){const r=n==null?void 0:n.weekStartsOn,o=he(s),l=o.getDay(),c=(l<r?-7:0)+6-(l-r);return o.setDate(o.getDate()+c),o.setHours(23,59,59,999),o}const om={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},am=(s,n,r)=>{let o;const l=om[s];return typeof l=="string"?o=l:n===1?o=l.one:o=l.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+o:o+" ago":o};function Tr(s){return(n={})=>{const r=n.width?String(n.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const lm={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},um={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cm={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},dm={date:Tr({formats:lm,defaultWidth:"full"}),time:Tr({formats:um,defaultWidth:"full"}),dateTime:Tr({formats:cm,defaultWidth:"full"})},hm={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fm=(s,n,r,o)=>hm[s];function Ut(s){return(n,r)=>{const o=r!=null&&r.context?String(r.context):"standalone";let l;if(o==="formatting"&&s.formattingValues){const h=s.defaultFormattingWidth||s.defaultWidth,f=r!=null&&r.width?String(r.width):h;l=s.formattingValues[f]||s.formattingValues[h]}else{const h=s.defaultWidth,f=r!=null&&r.width?String(r.width):s.defaultWidth;l=s.values[f]||s.values[h]}const c=s.argumentCallback?s.argumentCallback(n):n;return l[c]}}const pm={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},mm={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},gm={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vm={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ym={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},wm={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_m=(s,n)=>{const r=Number(s),o=r%100;if(o>20||o<10)switch(o%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},km={ordinalNumber:_m,era:Ut({values:pm,defaultWidth:"wide"}),quarter:Ut({values:mm,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ut({values:gm,defaultWidth:"wide"}),day:Ut({values:vm,defaultWidth:"wide"}),dayPeriod:Ut({values:ym,defaultWidth:"wide",formattingValues:wm,defaultFormattingWidth:"wide"})};function Bt(s){return(n,r={})=>{const o=r.width,l=o&&s.matchPatterns[o]||s.matchPatterns[s.defaultMatchWidth],c=n.match(l);if(!c)return null;const h=c[0],f=o&&s.parsePatterns[o]||s.parsePatterns[s.defaultParseWidth],m=Array.isArray(f)?xm(f,x=>x.test(h)):Sm(f,x=>x.test(h));let g;g=s.valueCallback?s.valueCallback(m):m,g=r.valueCallback?r.valueCallback(g):g;const v=n.slice(h.length);return{value:g,rest:v}}}function Sm(s,n){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&n(s[r]))return r}function xm(s,n){for(let r=0;r<s.length;r++)if(n(s[r]))return r}function kh(s){return(n,r={})=>{const o=n.match(s.matchPattern);if(!o)return null;const l=o[0],c=n.match(s.parsePattern);if(!c)return null;let h=s.valueCallback?s.valueCallback(c[0]):c[0];h=r.valueCallback?r.valueCallback(h):h;const f=n.slice(l.length);return{value:h,rest:f}}}const Em=/^(\d+)(th|st|nd|rd)?/i,bm=/\d+/i,Tm={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Cm={any:[/^b/i,/^(a|c)/i]},Om={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jm={any:[/1/i,/2/i,/3/i,/4/i]},Pm={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Nm={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rm={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Am={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Im={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dm={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Lm={ordinalNumber:kh({matchPattern:Em,parsePattern:bm,valueCallback:s=>parseInt(s,10)}),era:Bt({matchPatterns:Tm,defaultMatchWidth:"wide",parsePatterns:Cm,defaultParseWidth:"any"}),quarter:Bt({matchPatterns:Om,defaultMatchWidth:"wide",parsePatterns:jm,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Bt({matchPatterns:Pm,defaultMatchWidth:"wide",parsePatterns:Nm,defaultParseWidth:"any"}),day:Bt({matchPatterns:Rm,defaultMatchWidth:"wide",parsePatterns:Am,defaultParseWidth:"any"}),dayPeriod:Bt({matchPatterns:Im,defaultMatchWidth:"any",parsePatterns:Dm,defaultParseWidth:"any"})},$m={code:"en-US",formatDistance:am,formatLong:dm,formatRelative:fm,localize:km,match:Lm,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mm(s){const n=he(s);return _h(n,sm(n))+1}function Um(s){const n=he(s),r=+Xi(n)-+em(n);return Math.round(r/gh)+1}function Sh(s,n){var v,x,E,k;const r=he(s),o=r.getFullYear(),l=so(),c=(n==null?void 0:n.firstWeekContainsDate)??((x=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??l.firstWeekContainsDate??((k=(E=l.locale)==null?void 0:E.options)==null?void 0:k.firstWeekContainsDate)??1,h=zt(s,0);h.setFullYear(o+1,0,c),h.setHours(0,0,0,0);const f=Or(h,n),m=zt(s,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const g=Or(m,n);return r.getTime()>=f.getTime()?o+1:r.getTime()>=g.getTime()?o:o-1}function Bm(s,n){var f,m,g,v;const r=so(),o=(n==null?void 0:n.firstWeekContainsDate)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??r.firstWeekContainsDate??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,l=Sh(s,n),c=zt(s,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),Or(c,n)}function zm(s,n){const r=he(s),o=+Or(r,n)-+Bm(r,n);return Math.round(o/gh)+1}function me(s,n){const r=s<0?"-":"",o=Math.abs(s).toString().padStart(n,"0");return r+o}const yn={y(s,n){const r=s.getFullYear(),o=r>0?r:1-r;return me(n==="yy"?o%100:o,n.length)},M(s,n){const r=s.getMonth();return n==="M"?String(r+1):me(r+1,2)},d(s,n){return me(s.getDate(),n.length)},a(s,n){const r=s.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,n){return me(s.getHours()%12||12,n.length)},H(s,n){return me(s.getHours(),n.length)},m(s,n){return me(s.getMinutes(),n.length)},s(s,n){return me(s.getSeconds(),n.length)},S(s,n){const r=n.length,o=s.getMilliseconds(),l=Math.trunc(o*Math.pow(10,r-3));return me(l,n.length)}},mr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Md={G:function(s,n,r){const o=s.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(o,{width:"abbreviated"});case"GGGGG":return r.era(o,{width:"narrow"});case"GGGG":default:return r.era(o,{width:"wide"})}},y:function(s,n,r){if(n==="yo"){const o=s.getFullYear(),l=o>0?o:1-o;return r.ordinalNumber(l,{unit:"year"})}return yn.y(s,n)},Y:function(s,n,r,o){const l=Sh(s,o),c=l>0?l:1-l;if(n==="YY"){const h=c%100;return me(h,2)}return n==="Yo"?r.ordinalNumber(c,{unit:"year"}):me(c,n.length)},R:function(s,n){const r=wh(s);return me(r,n.length)},u:function(s,n){const r=s.getFullYear();return me(r,n.length)},Q:function(s,n,r){const o=Math.ceil((s.getMonth()+1)/3);switch(n){case"Q":return String(o);case"QQ":return me(o,2);case"Qo":return r.ordinalNumber(o,{unit:"quarter"});case"QQQ":return r.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(o,{width:"wide",context:"formatting"})}},q:function(s,n,r){const o=Math.ceil((s.getMonth()+1)/3);switch(n){case"q":return String(o);case"qq":return me(o,2);case"qo":return r.ordinalNumber(o,{unit:"quarter"});case"qqq":return r.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(o,{width:"wide",context:"standalone"})}},M:function(s,n,r){const o=s.getMonth();switch(n){case"M":case"MM":return yn.M(s,n);case"Mo":return r.ordinalNumber(o+1,{unit:"month"});case"MMM":return r.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(o,{width:"wide",context:"formatting"})}},L:function(s,n,r){const o=s.getMonth();switch(n){case"L":return String(o+1);case"LL":return me(o+1,2);case"Lo":return r.ordinalNumber(o+1,{unit:"month"});case"LLL":return r.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(o,{width:"wide",context:"standalone"})}},w:function(s,n,r,o){const l=zm(s,o);return n==="wo"?r.ordinalNumber(l,{unit:"week"}):me(l,n.length)},I:function(s,n,r){const o=Um(s);return n==="Io"?r.ordinalNumber(o,{unit:"week"}):me(o,n.length)},d:function(s,n,r){return n==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):yn.d(s,n)},D:function(s,n,r){const o=Mm(s);return n==="Do"?r.ordinalNumber(o,{unit:"dayOfYear"}):me(o,n.length)},E:function(s,n,r){const o=s.getDay();switch(n){case"E":case"EE":case"EEE":return r.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(o,{width:"short",context:"formatting"});case"EEEE":default:return r.day(o,{width:"wide",context:"formatting"})}},e:function(s,n,r,o){const l=s.getDay(),c=(l-o.weekStartsOn+8)%7||7;switch(n){case"e":return String(c);case"ee":return me(c,2);case"eo":return r.ordinalNumber(c,{unit:"day"});case"eee":return r.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(l,{width:"short",context:"formatting"});case"eeee":default:return r.day(l,{width:"wide",context:"formatting"})}},c:function(s,n,r,o){const l=s.getDay(),c=(l-o.weekStartsOn+8)%7||7;switch(n){case"c":return String(c);case"cc":return me(c,n.length);case"co":return r.ordinalNumber(c,{unit:"day"});case"ccc":return r.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(l,{width:"narrow",context:"standalone"});case"cccccc":return r.day(l,{width:"short",context:"standalone"});case"cccc":default:return r.day(l,{width:"wide",context:"standalone"})}},i:function(s,n,r){const o=s.getDay(),l=o===0?7:o;switch(n){case"i":return String(l);case"ii":return me(l,n.length);case"io":return r.ordinalNumber(l,{unit:"day"});case"iii":return r.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(o,{width:"short",context:"formatting"});case"iiii":default:return r.day(o,{width:"wide",context:"formatting"})}},a:function(s,n,r){const l=s.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(s,n,r){const o=s.getHours();let l;switch(o===12?l=mr.noon:o===0?l=mr.midnight:l=o/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(s,n,r){const o=s.getHours();let l;switch(o>=17?l=mr.evening:o>=12?l=mr.afternoon:o>=4?l=mr.morning:l=mr.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(l,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(s,n,r){if(n==="ho"){let o=s.getHours()%12;return o===0&&(o=12),r.ordinalNumber(o,{unit:"hour"})}return yn.h(s,n)},H:function(s,n,r){return n==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):yn.H(s,n)},K:function(s,n,r){const o=s.getHours()%12;return n==="Ko"?r.ordinalNumber(o,{unit:"hour"}):me(o,n.length)},k:function(s,n,r){let o=s.getHours();return o===0&&(o=24),n==="ko"?r.ordinalNumber(o,{unit:"hour"}):me(o,n.length)},m:function(s,n,r){return n==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):yn.m(s,n)},s:function(s,n,r){return n==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):yn.s(s,n)},S:function(s,n){return yn.S(s,n)},X:function(s,n,r){const o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Bd(o);case"XXXX":case"XX":return Ln(o);case"XXXXX":case"XXX":default:return Ln(o,":")}},x:function(s,n,r){const o=s.getTimezoneOffset();switch(n){case"x":return Bd(o);case"xxxx":case"xx":return Ln(o);case"xxxxx":case"xxx":default:return Ln(o,":")}},O:function(s,n,r){const o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Ud(o,":");case"OOOO":default:return"GMT"+Ln(o,":")}},z:function(s,n,r){const o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Ud(o,":");case"zzzz":default:return"GMT"+Ln(o,":")}},t:function(s,n,r){const o=Math.trunc(s.getTime()/1e3);return me(o,n.length)},T:function(s,n,r){const o=s.getTime();return me(o,n.length)}};function Ud(s,n=""){const r=s>0?"-":"+",o=Math.abs(s),l=Math.trunc(o/60),c=o%60;return c===0?r+String(l):r+String(l)+n+me(c,2)}function Bd(s,n){return s%60===0?(s>0?"-":"+")+me(Math.abs(s)/60,2):Ln(s,n)}function Ln(s,n=""){const r=s>0?"-":"+",o=Math.abs(s),l=me(Math.trunc(o/60),2),c=me(o%60,2);return r+l+n+c}const zd=(s,n)=>{switch(s){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},xh=(s,n)=>{switch(s){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Fm=(s,n)=>{const r=s.match(/(P+)(p+)?/)||[],o=r[1],l=r[2];if(!l)return zd(s,n);let c;switch(o){case"P":c=n.dateTime({width:"short"});break;case"PP":c=n.dateTime({width:"medium"});break;case"PPP":c=n.dateTime({width:"long"});break;case"PPPP":default:c=n.dateTime({width:"full"});break}return c.replace("{{date}}",zd(o,n)).replace("{{time}}",xh(l,n))},Wm={p:xh,P:Fm},qm=/^D+$/,Hm=/^Y+$/,Vm=["D","DD","YY","YYYY"];function Km(s){return qm.test(s)}function Gm(s){return Hm.test(s)}function Jm(s,n,r){const o=Ym(s,n,r);if(console.warn(o),Vm.includes(s))throw new RangeError(o)}function Ym(s,n,r){const o=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${n}\`) for formatting ${o} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zm=/^'([^]*?)'?$/,eg=/''/g,tg=/[a-zA-Z]/;function mt(s,n,r){var v,x,E,k,C,P,N,L;const o=so(),l=(r==null?void 0:r.locale)??o.locale??$m,c=(r==null?void 0:r.firstWeekContainsDate)??((x=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:x.firstWeekContainsDate)??o.firstWeekContainsDate??((k=(E=o.locale)==null?void 0:E.options)==null?void 0:k.firstWeekContainsDate)??1,h=(r==null?void 0:r.weekStartsOn)??((P=(C=r==null?void 0:r.locale)==null?void 0:C.options)==null?void 0:P.weekStartsOn)??o.weekStartsOn??((L=(N=o.locale)==null?void 0:N.options)==null?void 0:L.weekStartsOn)??0,f=he(s);if(!nm(f))throw new RangeError("Invalid time value");let m=n.match(Xm).map(M=>{const R=M[0];if(R==="p"||R==="P"){const B=Wm[R];return B(M,l.formatLong)}return M}).join("").match(Qm).map(M=>{if(M==="''")return{isToken:!1,value:"'"};const R=M[0];if(R==="'")return{isToken:!1,value:ng(M)};if(Md[R])return{isToken:!0,value:M};if(R.match(tg))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");return{isToken:!1,value:M}});l.localize.preprocessor&&(m=l.localize.preprocessor(f,m));const g={firstWeekContainsDate:c,weekStartsOn:h,locale:l};return m.map(M=>{if(!M.isToken)return M.value;const R=M.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Gm(R)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Km(R))&&Jm(R,n,String(s));const B=Md[R[0]];return B(f,R,l.localize,g)}).join("")}function ng(s){const n=s.match(Zm);return n?n[1].replace(eg,"'"):s}function rg(s,n){const r=he(s),o=he(n);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}function gs(s,n){const r=+he(s),[o,l]=[+he(n.start),+he(n.end)].sort((c,h)=>c-h);return r>=o&&r<=l}function Te(s,n){const o=ag(s);let l;if(o.date){const m=lg(o.date,2);l=ug(m.restDateString,m.year)}if(!l||isNaN(l.getTime()))return new Date(NaN);const c=l.getTime();let h=0,f;if(o.time&&(h=cg(o.time),isNaN(h)))return new Date(NaN);if(o.timezone){if(f=dg(o.timezone),isNaN(f))return new Date(NaN)}else{const m=new Date(c+h),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return new Date(c+h+f)}const Fi={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},sg=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ig=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,og=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ag(s){const n={},r=s.split(Fi.dateTimeDelimiter);let o;if(r.length>2)return n;if(/:/.test(r[0])?o=r[0]:(n.date=r[0],o=r[1],Fi.timeZoneDelimiter.test(n.date)&&(n.date=s.split(Fi.timeZoneDelimiter)[0],o=s.substr(n.date.length,s.length))),o){const l=Fi.timezone.exec(o);l?(n.time=o.replace(l[1],""),n.timezone=l[1]):n.time=o}return n}function lg(s,n){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),o=s.match(r);if(!o)return{year:NaN,restDateString:""};const l=o[1]?parseInt(o[1]):null,c=o[2]?parseInt(o[2]):null;return{year:c===null?l:c*100,restDateString:s.slice((o[1]||o[2]).length)}}function ug(s,n){if(n===null)return new Date(NaN);const r=s.match(sg);if(!r)return new Date(NaN);const o=!!r[4],l=vs(r[1]),c=vs(r[2])-1,h=vs(r[3]),f=vs(r[4]),m=vs(r[5])-1;if(o)return gg(n,f,m)?hg(n,f,m):new Date(NaN);{const g=new Date(0);return!pg(n,c,h)||!mg(n,l)?new Date(NaN):(g.setUTCFullYear(n,c,Math.max(l,h)),g)}}function vs(s){return s?parseInt(s):1}function cg(s){const n=s.match(ig);if(!n)return NaN;const r=ll(n[1]),o=ll(n[2]),l=ll(n[3]);return vg(r,o,l)?r*yh+o*vh+l*1e3:NaN}function ll(s){return s&&parseFloat(s.replace(",","."))||0}function dg(s){if(s==="Z")return 0;const n=s.match(og);if(!n)return 0;const r=n[1]==="+"?-1:1,o=parseInt(n[2]),l=n[3]&&parseInt(n[3])||0;return yg(o,l)?r*(o*yh+l*vh):NaN}function hg(s,n,r){const o=new Date(0);o.setUTCFullYear(s,0,4);const l=o.getUTCDay()||7,c=(n-1)*7+r+1-l;return o.setUTCDate(o.getUTCDate()+c),o}const fg=[31,null,31,30,31,30,31,31,30,31,30,31];function Eh(s){return s%400===0||s%4===0&&s%100!==0}function pg(s,n,r){return n>=0&&n<=11&&r>=1&&r<=(fg[n]||(Eh(s)?29:28))}function mg(s,n){return n>=1&&n<=(Eh(s)?366:365)}function gg(s,n,r){return n>=1&&n<=53&&r>=0&&r<=6}function vg(s,n,r){return s===24?n===0&&r===0:r>=0&&r<60&&n>=0&&n<60&&s>=0&&s<25}function yg(s,n){return n>=0&&n<=59}function wg(s,n){return mh(s,-1)}const _g={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},kg=(s,n,r)=>{let o;const l=_g[s];return typeof l=="string"?o=l:n===1?o=l.one:o=l.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+o:"il y a "+o:o},Sg={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},xg={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Eg={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},bg={date:Tr({formats:Sg,defaultWidth:"full"}),time:Tr({formats:xg,defaultWidth:"full"}),dateTime:Tr({formats:Eg,defaultWidth:"full"})},Tg={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},Cg=(s,n,r,o)=>Tg[s],Og={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},jg={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},Pg={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},Ng={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},Rg={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},Ag=(s,n)=>{const r=Number(s),o=n==null?void 0:n.unit;if(r===0)return"0";const l=["year","week","hour","minute","second"];let c;return r===1?c=o&&l.includes(o)?"re":"er":c="me",r+c},Ig=["MMM","MMMM"],Dg={preprocessor:(s,n)=>s.getDate()===1||!n.some(o=>o.isToken&&Ig.includes(o.value))?n:n.map(o=>o.isToken&&o.value==="do"?{isToken:!0,value:"d"}:o),ordinalNumber:Ag,era:Ut({values:Og,defaultWidth:"wide"}),quarter:Ut({values:jg,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Ut({values:Pg,defaultWidth:"wide"}),day:Ut({values:Ng,defaultWidth:"wide"}),dayPeriod:Ut({values:Rg,defaultWidth:"wide"})},Lg=/^(\d+)(ime|re|me|er|e)?/i,$g=/\d+/i,Mg={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},Ug={any:[/^av/i,/^ap/i]},Bg={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},zg={any:[/1/i,/2/i,/3/i,/4/i]},Fg={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},Wg={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},qg={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},Hg={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},Vg={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},Kg={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},Gg={ordinalNumber:kh({matchPattern:Lg,parsePattern:$g,valueCallback:s=>parseInt(s)}),era:Bt({matchPatterns:Mg,defaultMatchWidth:"wide",parsePatterns:Ug,defaultParseWidth:"any"}),quarter:Bt({matchPatterns:Bg,defaultMatchWidth:"wide",parsePatterns:zg,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Bt({matchPatterns:Fg,defaultMatchWidth:"wide",parsePatterns:Wg,defaultParseWidth:"any"}),day:Bt({matchPatterns:qg,defaultMatchWidth:"wide",parsePatterns:Hg,defaultParseWidth:"any"}),dayPeriod:Bt({matchPatterns:Vg,defaultMatchWidth:"any",parsePatterns:Kg,defaultParseWidth:"any"})},zn={code:"fr",formatDistance:kg,formatLong:bg,formatRelative:Cg,localize:Dg,match:Gg,options:{weekStartsOn:1,firstWeekContainsDate:4}},Cl=[{id:"etoile",name:"L'toile",floor:2,floorName:"tage 2",defaultConfig:"2_singles_fixed",configurable:!1,description:"2 lits simples",capacity:2},{id:"refuge",name:"Le Refuge",floor:2,floorName:"tage 2",defaultConfig:"3_singles",configurable:!1,description:"3 lits simples",capacity:3},{id:"suite",name:"La Suite",floor:1,floorName:"tage 1",defaultConfig:"king",configurable:!1,description:"Lit king size (chambre principale)",capacity:2},{id:"alpage",name:"L'Alpage",floor:1,floorName:"tage 1",defaultConfig:"king",configurable:!0,description:"1 king OU 2 simples",capacity:2},{id:"balcon",name:"Le Balcon",floor:1,floorName:"tage 1",defaultConfig:"king",configurable:!0,description:"1 king OU 2 simples",capacity:2},{id:"cocon",name:"Le Cocon",floor:-1,floorName:"tage -1",defaultConfig:"king",configurable:!1,description:"Lit king size",capacity:2},{id:"marmottes",name:"Les Marmottes",floor:-1,floorName:"tage -1",defaultConfig:"3_singles",configurable:!1,description:"3 lits simples",capacity:3}],bh=[{level:2,name:"tage 2",description:"Chambres amis"},{level:1,name:"tage 1",description:"Chambres principales"},{level:0,name:"Rez-de-chausse",description:"Salon, cuisine, entre"},{level:-1,name:"tage -1",description:"Chambres cocooning"}],Th=[{id:"axel",name:"Axel",color:"#2D5016"},{id:"sibling1",name:"Achille",color:"#C45B28"},{id:"sibling2",name:"Theodore",color:"#1E40AF"},{id:"sibling3",name:"Anastase",color:"#7C3AED"},{id:"sibling4",name:"Adrien",color:"#DC2626"},{id:"sibling5",name:"Evangeline",color:"#A84D22"},{id:"sibling6",name:"Hortense",color:"#E56F42"},{id:"sibling7",name:"Clemence",color:"#48370B"},{id:"parents",name:"Eleonore",color:"#2F2508"}],Fd=s=>Cl.find(n=>n.name===s),eo=s=>{const n=Th.find(r=>r.name===s);return(n==null?void 0:n.color)??"#6B7280"},_s=s=>{switch(s){case"king":return"Lit King";case"2_singles":case"2_singles_fixed":return"2 Simples";case"3_singles":return"3 Simples";default:return s}};function Jg({bookings:s,onBookingClick:n,onNewBooking:r}){const[o,l]=ge.useState(new Date),c=ge.useMemo(()=>{const v=$d(o),x=Ld(o),E=Or(v,{weekStartsOn:1}),k=im(x,{weekStartsOn:1});return rm({start:E,end:k})},[o]),h=ge.useMemo(()=>{const v=[];for(let x=0;x<c.length;x+=7)v.push(c.slice(x,x+7));return v},[c]),f=v=>s.filter(x=>{const E=Te(x.check_in),k=Te(x.check_out);return gs(v,{start:E,end:k})&&!pr(v,k)}),m=(v,x,E)=>{const k=Te(v.check_in),C=Te(v.check_out),P=E[0],N=E[6],L=gs(k,{start:P,end:N}),M=gs(C,{start:P,end:N}),R=L?E.findIndex(J=>pr(J,k)):0,B=M?E.findIndex(J=>pr(J,C)):7,ne=pr(x,k)||pr(x,P);return{startDayIndex:R,endDayIndex:B,span:B-R,isFirstDay:ne,isStartInWeek:L,isEndInWeek:M}},g=new Date;return w.jsxs("div",{className:"card",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsx("button",{onClick:()=>l(wg(o)),className:"p-2 hover:bg-wood-100 rounded-lg transition-colors",children:w.jsx("svg",{className:"w-5 h-5 text-wood-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),w.jsx("h2",{className:"font-display text-xl font-semibold text-charcoal capitalize",children:mt(o,"MMMM yyyy",{locale:zn})}),w.jsx("button",{onClick:()=>l(mh(o,1)),className:"p-2 hover:bg-wood-100 rounded-lg transition-colors",children:w.jsx("svg",{className:"w-5 h-5 text-wood-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),w.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"].map(v=>w.jsx("div",{className:"text-center text-xs font-medium text-wood-500 py-2",children:v},v))}),w.jsx("div",{className:"space-y-1",children:h.map((v,x)=>{const E=new Map;return v.forEach(k=>{f(k).forEach(P=>{E.has(P.id)||E.set(P.id,{booking:P,position:m(P,k,v)})})}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"grid grid-cols-7 gap-1",children:v.map(k=>{const C=rg(k,o),P=pr(k,g),N=f(k);return w.jsxs("div",{className:`
                        min-h-[80px] sm:min-h-[100px] p-1 rounded-lg border transition-colors
                        ${C?"bg-white border-wood-100":"bg-wood-50/50 border-transparent"}
                        ${P?"ring-2 ring-forest-400 ring-inset":""}
                      `,children:[w.jsx("span",{className:`
                          text-sm font-medium
                          ${C?"text-charcoal":"text-wood-300"}
                          ${P?"text-forest-600":""}
                        `,children:mt(k,"d")}),w.jsxs("div",{className:"sm:hidden flex flex-wrap gap-0.5 mt-1",children:[N.slice(0,3).map(L=>w.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:eo(L.family_member)}},L.id)),N.length>3&&w.jsxs("span",{className:"text-[10px] text-wood-400",children:["+",N.length-3]})]})]},k.toISOString())})}),w.jsx("div",{className:"hidden sm:block absolute inset-0 pointer-events-none",children:w.jsx("div",{className:"relative h-full",children:Array.from(E.values()).map(({booking:k,position:C},P)=>{if(!C.isFirstDay&&C.startDayIndex!==0)return null;const N=`calc(${C.startDayIndex/7*100}% + 4px)`,L=`calc(${C.span/7*100}% - 8px)`,M=`calc(28px + ${P*24}px)`;return w.jsx("button",{onClick:()=>n(k),className:"absolute h-5 rounded-md text-xs font-medium text-white truncate px-2 flex items-center pointer-events-auto hover:opacity-90 transition-opacity shadow-sm",style:{left:N,width:L,top:M,backgroundColor:eo(k.family_member),borderRadius:C.isStartInWeek&&C.isEndInWeek?"6px":C.isStartInWeek?"6px 0 0 6px":C.isEndInWeek?"0 6px 6px 0":"0"},children:C.isStartInWeek&&k.family_member},k.id)})})})]},x)})}),s.filter(v=>{const x=Te(v.check_in),E=Te(v.check_out),k=$d(o),C=Ld(o);return gs(x,{start:k,end:C})||gs(E,{start:k,end:C})||x<=k&&E>=C}).length===0&&w.jsxs("div",{className:"text-center py-8 text-wood-500",children:[w.jsx("p",{className:"mb-4",children:"Pas de sjours prvus ce mois-ci"}),w.jsx("p",{className:"text-sm text-wood-400",children:"C'est le moment de rserver un week-end ?"})]}),w.jsx("div",{className:"mt-6 flex justify-center",children:w.jsxs("button",{onClick:r,className:"btn-primary flex items-center gap-2",children:[w.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nouveau sjour"]})})]})}function Yg({bookings:s,onBookingClick:n}){const r=s.filter(c=>Te(c.check_out)>=new Date).sort((c,h)=>Te(c.check_in).getTime()-Te(h.check_in).getTime()),o=()=>{const c=["Arrive","Dpart","Nuits","Famille","Personnes","Chambres","Configuration","Notes"],h=r.map(v=>{const x=Te(v.check_in),E=Te(v.check_out),k=Qi(E,x),C=v.rooms.map(N=>N.name).join(", "),P=v.rooms.map(N=>`${N.name}: ${_s(N.config)}`).join("; ");return[mt(x,"dd/MM/yyyy"),mt(E,"dd/MM/yyyy"),k.toString(),v.family_member,v.guest_count.toString(),C,P,v.notes||""]}),f=[c.join(","),...h.map(v=>v.map(x=>`"${x.replace(/"/g,'""')}"`).join(","))].join(`
`),m=new Blob([f],{type:"text/csv;charset=utf-8;"}),g=document.createElement("a");g.href=URL.createObjectURL(m),g.download=`sejours-chalet-${mt(new Date,"yyyy-MM-dd")}.csv`,g.click()},l=()=>{const c=r.map(h=>{const f=Te(h.check_in),m=Te(h.check_out),g=Qi(m,f),v=h.rooms.map(x=>`${x.name} (${_s(x.config)})`).join(", ");return`${mt(f,"d MMM",{locale:zn})}  ${mt(m,"d MMM",{locale:zn})} (${g}n)
${h.family_member}  ${h.guest_count} pers.
Chambres: ${v}
${h.notes?`Notes: ${h.notes}`:""}`}).join(`

---

`);navigator.clipboard.writeText(c)};return w.jsxs("div",{className:"card",children:[w.jsxs("div",{className:"flex items-center justify-between mb-6",children:[w.jsx("h2",{className:"font-display text-xl font-semibold text-charcoal",children:"Prochains sjours"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("button",{onClick:l,className:"text-sm px-3 py-1.5 text-wood-600 hover:bg-wood-100 rounded-lg transition-colors",children:"Copier"}),w.jsx("button",{onClick:o,className:"text-sm px-3 py-1.5 text-wood-600 hover:bg-wood-100 rounded-lg transition-colors",children:"Export CSV"})]})]}),r.length===0?w.jsxs("div",{className:"text-center py-12 text-wood-500",children:[w.jsx("svg",{className:"w-12 h-12 mx-auto mb-4 text-wood-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),w.jsx("p",{children:"Aucun sjour prvu"}),w.jsx("p",{className:"text-sm mt-1 text-wood-400",children:"Le chalet vous attend !"})]}):w.jsx("div",{className:"space-y-4",children:r.map(c=>{const h=Te(c.check_in),f=Te(c.check_out),m=Qi(f,h),g=h<=new Date&&f>=new Date;return w.jsx("button",{onClick:()=>n(c),className:"w-full text-left bg-white border border-wood-200 rounded-xl p-4 hover:border-wood-400 hover:shadow-warm transition-all",children:w.jsxs("div",{className:"flex items-start gap-4",children:[w.jsx("div",{className:"w-1 h-full min-h-[60px] rounded-full flex-shrink-0",style:{backgroundColor:eo(c.family_member)}}),w.jsxs("div",{className:"flex-1 min-w-0",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"font-semibold text-charcoal",children:c.family_member}),g&&w.jsx("span",{className:"text-xs bg-forest-100 text-forest-700 px-2 py-0.5 rounded-full",children:"En cours"})]}),w.jsxs("span",{className:"text-sm text-wood-500",children:[c.guest_count," pers."]})]}),w.jsxs("p",{className:"text-sm text-wood-600 mb-2",children:[mt(h,"EEE d MMM",{locale:zn})," "," ",mt(f,"EEE d MMM",{locale:zn}),w.jsxs("span",{className:"text-wood-400 ml-2",children:["(",m," nuit",m>1?"s":"",")"]})]}),w.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.rooms.map((v,x)=>w.jsxs("span",{className:"text-xs bg-wood-100 text-wood-600 px-2 py-1 rounded-md",children:[v.name,w.jsxs("span",{className:"text-wood-400 ml-1",children:["(",_s(v.config),")"]})]},x))}),c.notes&&w.jsx("p",{className:"text-xs text-wood-500 mt-2 italic truncate",children:c.notes})]})]})},c.id)})}),r.length>0&&w.jsxs("div",{className:"mt-6 pt-4 border-t border-wood-100 text-center text-sm text-wood-500",children:[r.length," sjour",r.length>1?"s":"","  venir"]}),w.jsxs("div",{className:"mt-8 pt-6 border-t border-wood-200",children:[w.jsx("h3",{className:"font-display text-lg font-semibold text-charcoal mb-4",children:"Plan des chambres"}),w.jsx("div",{className:"space-y-4",children:bh.filter(c=>c.level!==0).map(c=>{const h=Cl.filter(f=>f.floor===c.level);return h.length===0?null:w.jsxs("div",{className:"bg-wood-50 rounded-lg p-3",children:[w.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[w.jsx("span",{className:"text-xs font-semibold text-wood-600 uppercase tracking-wider",children:c.name}),w.jsx("span",{className:"text-xs text-wood-400",children:c.description})]}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2",children:h.map(f=>w.jsxs("div",{className:"bg-white rounded-md px-3 py-2 border border-wood-100",children:[w.jsx("span",{className:"font-medium text-charcoal text-sm",children:f.name}),w.jsx("span",{className:"text-xs text-wood-500 ml-2",children:f.description})]},f.id))})]},c.level)})})]})]})}function Qg({room:s,selected:n=!1,config:r,onSelect:o,onConfigChange:l,disabled:c=!1,occupiedBy:h,mode:f}){const m=r??s.defaultConfig,g=x=>{switch(x){case"king":return w.jsxs("svg",{className:"w-6 h-4",viewBox:"0 0 24 16",fill:"currentColor",children:[w.jsx("rect",{x:"1",y:"4",width:"22",height:"10",rx:"2",className:"fill-current"}),w.jsx("rect",{x:"3",y:"2",width:"18",height:"4",rx:"1",className:"fill-current opacity-60"})]});case"2_singles":case"2_singles_fixed":return w.jsxs("div",{className:"flex gap-1",children:[w.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:[w.jsx("rect",{x:"1",y:"4",width:"14",height:"10",rx:"2"}),w.jsx("rect",{x:"2",y:"2",width:"12",height:"4",rx:"1",className:"opacity-60"})]}),w.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:[w.jsx("rect",{x:"1",y:"4",width:"14",height:"10",rx:"2"}),w.jsx("rect",{x:"2",y:"2",width:"12",height:"4",rx:"1",className:"opacity-60"})]})]});case"3_singles":return w.jsx("div",{className:"flex gap-0.5",children:[0,1,2].map(E=>w.jsxs("svg",{className:"w-3 h-3",viewBox:"0 0 16 16",fill:"currentColor",children:[w.jsx("rect",{x:"1",y:"4",width:"14",height:"10",rx:"2"}),w.jsx("rect",{x:"2",y:"2",width:"12",height:"4",rx:"1",className:"opacity-60"})]},E))});default:return null}},v=`
    relative rounded-xl p-4 transition-all cursor-pointer border-2
    ${c?"bg-wood-100 border-wood-200 opacity-60 cursor-not-allowed":n?"bg-forest-50 border-forest-500 shadow-warm-lg":"bg-white border-wood-200 hover:border-wood-400 hover:shadow-warm"}
  `;return w.jsxs("div",{className:v,onClick:()=>!c&&f==="select"&&(o==null?void 0:o()),children:[n&&w.jsx("div",{className:"absolute top-2 right-2 w-5 h-5 bg-forest-500 rounded-full flex items-center justify-center",children:w.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),w.jsxs("div",{className:"flex items-start justify-between mb-2",children:[w.jsx("h3",{className:"font-display font-semibold text-lg text-charcoal",children:s.name}),w.jsx("div",{className:`${c?"text-wood-400":n?"text-forest-600":"text-wood-500"}`,children:g(m)})]}),w.jsxs("p",{className:"text-sm text-wood-500 mb-2",children:[_s(m),"  ",s.capacity," pers."]}),h&&w.jsxs("div",{className:"text-xs bg-terracotta-100 text-terracotta-700 px-2 py-1 rounded-md inline-block",children:["Occup par ",h]}),s.configurable&&n&&f==="select"&&w.jsxs("div",{className:"mt-3 flex gap-2",children:[w.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),l==null||l("king")},className:`flex-1 text-xs py-1.5 px-2 rounded-md transition-colors ${m==="king"?"bg-forest-500 text-white":"bg-wood-100 text-wood-600 hover:bg-wood-200"}`,children:"King"}),w.jsx("button",{type:"button",onClick:x=>{x.stopPropagation(),l==null||l("2_singles")},className:`flex-1 text-xs py-1.5 px-2 rounded-md transition-colors ${m==="2_singles"?"bg-forest-500 text-white":"bg-wood-100 text-wood-600 hover:bg-wood-200"}`,children:"2 Simples"})]})]})}function Ch({selectedRooms:s,onRoomToggle:n,onConfigChange:r,conflictingRooms:o=new Map,mode:l}){const c=f=>{var m;return(m=s.find(g=>g.name===f))==null?void 0:m.config},h=f=>s.some(m=>m.name===f);return w.jsx("div",{className:"space-y-6",children:bh.map(f=>{const m=Cl.filter(g=>g.floor===f.level);return m.length===0&&f.level===0?w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[w.jsx("div",{className:"w-20 text-right",children:w.jsx("span",{className:"text-xs font-medium text-wood-500 uppercase tracking-wider",children:f.name})}),w.jsx("div",{className:"flex-1 h-px bg-wood-200"})]}),w.jsx("div",{className:"ml-24",children:w.jsxs("div",{className:"bg-wood-50 border border-wood-200 border-dashed rounded-xl p-4 text-center text-wood-500",children:[w.jsx("p",{className:"text-sm",children:f.description}),w.jsx("p",{className:"text-xs mt-1 text-wood-400",children:"Pas de chambres"})]})})]},f.level):m.length===0?null:w.jsxs("div",{className:"relative",children:[w.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[w.jsx("div",{className:"w-20 text-right",children:w.jsx("span",{className:"text-xs font-medium text-wood-500 uppercase tracking-wider",children:f.name})}),w.jsx("div",{className:"flex-1 h-px bg-wood-200"})]}),w.jsx("div",{className:"ml-24 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(g=>w.jsx(Qg,{room:g,selected:h(g.name),config:c(g.name),onSelect:()=>n==null?void 0:n(g.name),onConfigChange:v=>r==null?void 0:r(g.name,v),disabled:o.has(g.name),occupiedBy:o.get(g.name),mode:l},g.id))})]},f.level)})})}function Xg({booking:s,conflictingRooms:n,onSubmit:r,onCancel:o,onDateChange:l}){const[c,h]=ge.useState((s==null?void 0:s.family_member)??""),[f,m]=ge.useState((s==null?void 0:s.check_in)??mt(new Date,"yyyy-MM-dd")),[g,v]=ge.useState((s==null?void 0:s.check_out)??mt(Qp(new Date,2),"yyyy-MM-dd")),[x,E]=ge.useState((s==null?void 0:s.guest_count)??2),[k,C]=ge.useState((s==null?void 0:s.notes)??""),[P,N]=ge.useState((s==null?void 0:s.rooms)??[]),[L,M]=ge.useState(!1),[R,B]=ge.useState(null),ne=f&&g&&g<=f?"La date de dpart doit tre aprs la date d'arrive":null;ge.useEffect(()=>{l(f,g)},[f,g,l]);const J=ae=>{N($e=>{if($e.find(Ze=>Ze.name===ae))return $e.filter(Ze=>Ze.name!==ae);const Ie=Fd(ae);return Ie?[...$e,{name:ae,config:Ie.defaultConfig}]:$e})},se=(ae,$e)=>{N(qe=>qe.map(Ie=>Ie.name===ae?{...Ie,config:$e}:Ie))},ye=()=>P.reduce((ae,$e)=>{const qe=Fd($e.name);return ae+((qe==null?void 0:qe.capacity)??0)},0),ve=async ae=>{if(ae.preventDefault(),B(null),!c){B("Veuillez slectionner un membre de la famille");return}if(P.length===0){B("Veuillez slectionner au moins une chambre");return}if(f>=g){B("La date de dpart doit tre aprs la date d'arrive");return}M(!0);try{await r({family_member:c,check_in:f,check_out:g,guest_count:x,notes:k||null,rooms:P})}catch($e){B($e instanceof Error?$e.message:"Erreur lors de la sauvegarde")}finally{M(!1)}};return w.jsxs("form",{onSubmit:ve,className:"space-y-6",children:[R&&w.jsx("div",{className:"bg-terracotta-50 border border-terracotta-200 text-terracotta-700 px-4 py-3 rounded-lg",children:R}),w.jsxs("div",{children:[w.jsx("label",{className:"label",children:"Qui rserve ?"}),w.jsxs("select",{value:c,onChange:ae=>h(ae.target.value),className:"input",required:!0,children:[w.jsx("option",{value:"",children:"Slectionner..."}),Th.map(ae=>w.jsx("option",{value:ae.name,children:ae.name},ae.id))]})]}),w.jsxs("div",{children:[w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("label",{className:"label",children:"Arrive"}),w.jsx("input",{type:"date",value:f,onChange:ae=>m(ae.target.value),className:`input ${ne?"border-terracotta-500 focus:border-terracotta-500 focus:ring-terracotta-100":""}`,required:!0})]}),w.jsxs("div",{children:[w.jsx("label",{className:"label",children:"Dpart"}),w.jsx("input",{type:"date",value:g,onChange:ae=>v(ae.target.value),className:`input ${ne?"border-terracotta-500 focus:border-terracotta-500 focus:ring-terracotta-100":""}`,required:!0})]})]}),ne&&w.jsxs("p",{className:"mt-2 text-sm text-terracotta-600 flex items-center gap-1",children:[w.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),ne]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"label",children:"Nombre de personnes"}),w.jsx("input",{type:"number",min:1,max:15,value:x,onChange:ae=>E(parseInt(ae.target.value)||1),className:"input w-24"}),w.jsxs("p",{className:"text-xs text-wood-500 mt-1",children:["Capacit slectionne: ",ye()," / ",x," personnes",x>ye()&&w.jsx("span",{className:"text-terracotta-500 ml-1",children:"(chambres insuffisantes)"})]})]}),w.jsxs("div",{children:[w.jsx("label",{className:"label mb-3",children:"Chambres"}),w.jsx(Ch,{selectedRooms:P,onRoomToggle:J,onConfigChange:se,conflictingRooms:n,mode:"select"})]}),w.jsxs("div",{children:[w.jsx("label",{className:"label",children:"Notes (optionnel)"}),w.jsx("textarea",{value:k,onChange:ae=>C(ae.target.value),placeholder:"Ex: Marie + 2 amies du travail",className:"input min-h-[80px]"})]}),w.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-wood-100",children:[w.jsx("button",{type:"button",onClick:o,className:"btn-secondary",children:"Annuler"}),w.jsx("button",{type:"submit",disabled:L||!!ne,className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:L?"Enregistrement...":s?"Modifier":"Rserver"})]})]})}function Zg({booking:s,onEdit:n,onDelete:r,onClose:o}){const l=Te(s.check_in),c=Te(s.check_out),h=Qi(c,l);return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white text-xl font-semibold",style:{backgroundColor:eo(s.family_member)},children:s.family_member.charAt(0)}),w.jsxs("div",{children:[w.jsxs("h2",{className:"font-display text-xl font-semibold text-charcoal",children:["Sjour de ",s.family_member]}),w.jsxs("p",{className:"text-wood-500",children:[s.guest_count," personne",s.guest_count>1?"s":""]})]})]}),w.jsxs("div",{className:"bg-wood-50 rounded-xl p-4",children:[w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsxs("div",{children:[w.jsx("p",{className:"text-xs text-wood-500 uppercase tracking-wider mb-1",children:"Arrive"}),w.jsx("p",{className:"font-semibold text-charcoal",children:mt(l,"EEEE d MMMM",{locale:zn})})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs text-wood-500 uppercase tracking-wider mb-1",children:"Dpart"}),w.jsx("p",{className:"font-semibold text-charcoal",children:mt(c,"EEEE d MMMM",{locale:zn})})]})]}),w.jsxs("p",{className:"text-sm text-wood-600 mt-3 text-center",children:[h," nuit",h>1?"s":""]})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-display font-semibold text-lg text-charcoal mb-3",children:"Chambres rserves"}),w.jsx("div",{className:"space-y-2",children:s.rooms.map((f,m)=>w.jsxs("div",{className:"flex items-center justify-between bg-forest-50 border border-forest-200 rounded-lg px-4 py-3",children:[w.jsx("span",{className:"font-medium text-forest-800",children:f.name}),w.jsx("span",{className:"text-sm text-forest-600",children:_s(f.config)})]},m))})]}),w.jsxs("div",{children:[w.jsx("h3",{className:"font-display font-semibold text-lg text-charcoal mb-3",children:"Plan du chalet"}),w.jsx("div",{className:"opacity-75 pointer-events-none",children:w.jsx(Ch,{selectedRooms:s.rooms,mode:"view"})})]}),s.notes&&w.jsxs("div",{children:[w.jsx("h3",{className:"font-display font-semibold text-lg text-charcoal mb-2",children:"Notes"}),w.jsx("p",{className:"text-wood-600 bg-wood-50 rounded-lg p-3",children:s.notes})]}),w.jsxs("div",{className:"flex gap-3 justify-between pt-4 border-t border-wood-100",children:[w.jsx("button",{onClick:r,className:"btn-danger",children:"Supprimer"}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("button",{onClick:o,className:"btn-secondary",children:"Fermer"}),w.jsx("button",{onClick:n,className:"btn-primary",children:"Modifier"})]})]})]})}function Wd({isOpen:s,onClose:n,title:r,children:o}){return ge.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),ge.useEffect(()=>{const l=c=>{c.key==="Escape"&&n()};return s&&document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[s,n]),s?w.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[w.jsx("div",{className:"fixed inset-0 bg-charcoal/50 backdrop-blur-sm transition-opacity",onClick:n}),w.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:w.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-2xl shadow-warm-lg overflow-hidden",onClick:l=>l.stopPropagation(),children:[w.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-wood-100",children:[w.jsx("h2",{className:"font-display text-xl font-semibold text-charcoal",children:r}),w.jsx("button",{onClick:n,className:"p-2 hover:bg-wood-100 rounded-lg transition-colors",children:w.jsx("svg",{className:"w-5 h-5 text-wood-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:o})]})})]}):null}function io(s,n){var r={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&n.indexOf(o)<0&&(r[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(s);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(s,o[l])&&(r[o[l]]=s[o[l]]);return r}function ev(s,n,r,o){function l(c){return c instanceof r?c:new r(function(h){h(c)})}return new(r||(r=Promise))(function(c,h){function f(v){try{g(o.next(v))}catch(x){h(x)}}function m(v){try{g(o.throw(v))}catch(x){h(x)}}function g(v){v.done?c(v.value):l(v.value).then(f,m)}g((o=o.apply(s,n||[])).next())})}const tv=s=>s?(...n)=>s(...n):(...n)=>fetch(...n);class Ol extends Error{constructor(n,r="FunctionsError",o){super(n),this.name=r,this.context=o}}class nv extends Ol{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class qd extends Ol{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Hd extends Ol{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var gl;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(gl||(gl={}));class rv{constructor(n,{headers:r={},customFetch:o,region:l=gl.Any}={}){this.url=n,this.headers=r,this.region=l,this.fetch=tv(o)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return ev(this,arguments,void 0,function*(r,o={}){var l;let c,h;try{const{headers:f,method:m,body:g,signal:v,timeout:x}=o;let E={},{region:k}=o;k||(k=this.region);const C=new URL(`${this.url}/${r}`);k&&k!=="any"&&(E["x-region"]=k,C.searchParams.set("forceFunctionRegion",k));let P;g&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",P=g):typeof g=="string"?(E["Content-Type"]="text/plain",P=g):typeof FormData<"u"&&g instanceof FormData?P=g:(E["Content-Type"]="application/json",P=JSON.stringify(g)):g&&typeof g!="string"&&!(typeof Blob<"u"&&g instanceof Blob)&&!(g instanceof ArrayBuffer)&&!(typeof FormData<"u"&&g instanceof FormData)?P=JSON.stringify(g):P=g;let N=v;x&&(h=new AbortController,c=setTimeout(()=>h.abort(),x),v?(N=h.signal,v.addEventListener("abort",()=>h.abort())):N=h.signal);const L=yield this.fetch(C.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),f),body:P,signal:N}).catch(ne=>{throw new nv(ne)}),M=L.headers.get("x-relay-error");if(M&&M==="true")throw new qd(L);if(!L.ok)throw new Hd(L);let R=((l=L.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),B;return R==="application/json"?B=yield L.json():R==="application/octet-stream"||R==="application/pdf"?B=yield L.blob():R==="text/event-stream"?B=L:R==="multipart/form-data"?B=yield L.formData():B=yield L.text(),{data:B,error:null,response:L}}catch(f){return{data:null,error:f,response:f instanceof Hd||f instanceof qd?f.context:void 0}}finally{c&&clearTimeout(c)}})}}var sv=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},iv=class{constructor(s){var n,r,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(n=s.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=s.signal,this.isMaybeSingle=(r=s.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(o=s.urlLengthLimit)!==null&&o!==void 0?o:8e3,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=new Headers(this.headers),this.headers.set(s,n),this}then(s,n){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let h=null,f=null,m=null,g=c.status,v=c.statusText;if(c.ok){var x,E;if(r.method!=="HEAD"){var k;const L=await c.text();L===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((k=r.headers.get("Accept"))===null||k===void 0)&&k.includes("application/vnd.pgrst.plan+text"))?f=L:f=JSON.parse(L))}const P=(x=r.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),N=(E=c.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");P&&N&&N.length>1&&(m=parseInt(N[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(f)&&(f.length>1?(h={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,g=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var C;const P=await c.text();try{h=JSON.parse(P),Array.isArray(h)&&c.status===404&&(f=[],h=null,g=200,v="OK")}catch{c.status===404&&P===""?(g=204,v="No Content"):h={message:P}}if(h&&r.isMaybeSingle&&(!(h==null||(C=h.details)===null||C===void 0)&&C.includes("0 rows"))&&(h=null,g=200,v="OK"),h&&r.shouldThrowOnError)throw new sv(h)}return{error:h,data:f,count:m,status:g,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var h;let f="",m="",g="";const v=c==null?void 0:c.cause;if(v){var x,E,k,C;const L=(x=v==null?void 0:v.message)!==null&&x!==void 0?x:"",M=(E=v==null?void 0:v.code)!==null&&E!==void 0?E:"";f=`${(k=c==null?void 0:c.name)!==null&&k!==void 0?k:"FetchError"}: ${c==null?void 0:c.message}`,f+=`

Caused by: ${(C=v==null?void 0:v.name)!==null&&C!==void 0?C:"Error"}: ${L}`,M&&(f+=` (${M})`),v!=null&&v.stack&&(f+=`
${v.stack}`)}else{var P;f=(P=c==null?void 0:c.stack)!==null&&P!==void 0?P:""}const N=this.url.toString().length;return(c==null?void 0:c.name)==="AbortError"||(c==null?void 0:c.code)==="ABORT_ERR"?(g="",m="Request was aborted (timeout or manual cancellation)",N>this.urlLengthLimit&&(m+=`. Note: Your request URL is ${N} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((v==null?void 0:v.name)==="HeadersOverflowError"||(v==null?void 0:v.code)==="UND_ERR_HEADERS_OVERFLOW")&&(g="",m="HTTP headers exceeded server limits (typically 16KB)",N>this.urlLengthLimit&&(m+=`. Your request URL is ${N} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,details:f,hint:m,code:g},data:null,count:null,status:0,statusText:""}})),l.then(s,n)}returns(){return this}overrideTypes(){return this}},ov=class extends iv{select(s){let n=!1;const r=(s??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${s}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,n,{foreignTable:r,referencedTable:o=r}={}){const l=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${n-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:l=!1,format:c="text"}={}){var h;const f=[s?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Vd=new RegExp("[,()]");var Sr=class extends ov{eq(s,n){return this.url.searchParams.append(s,`eq.${n}`),this}neq(s,n){return this.url.searchParams.append(s,`neq.${n}`),this}gt(s,n){return this.url.searchParams.append(s,`gt.${n}`),this}gte(s,n){return this.url.searchParams.append(s,`gte.${n}`),this}lt(s,n){return this.url.searchParams.append(s,`lt.${n}`),this}lte(s,n){return this.url.searchParams.append(s,`lte.${n}`),this}like(s,n){return this.url.searchParams.append(s,`like.${n}`),this}likeAllOf(s,n){return this.url.searchParams.append(s,`like(all).{${n.join(",")}}`),this}likeAnyOf(s,n){return this.url.searchParams.append(s,`like(any).{${n.join(",")}}`),this}ilike(s,n){return this.url.searchParams.append(s,`ilike.${n}`),this}ilikeAllOf(s,n){return this.url.searchParams.append(s,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(s,n){return this.url.searchParams.append(s,`ilike(any).{${n.join(",")}}`),this}regexMatch(s,n){return this.url.searchParams.append(s,`match.${n}`),this}regexIMatch(s,n){return this.url.searchParams.append(s,`imatch.${n}`),this}is(s,n){return this.url.searchParams.append(s,`is.${n}`),this}isDistinct(s,n){return this.url.searchParams.append(s,`isdistinct.${n}`),this}in(s,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&Vd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${r})`),this}notIn(s,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&Vd.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`not.in.(${r})`),this}contains(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cs.{${n.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(n)}`),this}containedBy(s,n){return typeof n=="string"?this.url.searchParams.append(s,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(s,`cd.{${n.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(n)}`),this}rangeGt(s,n){return this.url.searchParams.append(s,`sr.${n}`),this}rangeGte(s,n){return this.url.searchParams.append(s,`nxl.${n}`),this}rangeLt(s,n){return this.url.searchParams.append(s,`sl.${n}`),this}rangeLte(s,n){return this.url.searchParams.append(s,`nxr.${n}`),this}rangeAdjacent(s,n){return this.url.searchParams.append(s,`adj.${n}`),this}overlaps(s,n){return typeof n=="string"?this.url.searchParams.append(s,`ov.${n}`):this.url.searchParams.append(s,`ov.{${n.join(",")}}`),this}textSearch(s,n,{config:r,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const c=r===void 0?"":`(${r})`;return this.url.searchParams.append(s,`${l}fts${c}.${n}`),this}match(s){return Object.entries(s).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(s,n,r){return this.url.searchParams.append(s,`not.${n}.${r}`),this}or(s,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,n,r){return this.url.searchParams.append(s,`${n}.${r}`),this}},av=class{constructor(s,{headers:n={},schema:r,fetch:o,urlLengthLimit:l=8e3}){this.url=s,this.headers=new Headers(n),this.schema=r,this.fetch=o,this.urlLengthLimit=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,n){const{head:r=!1,count:o}=n??{},l=r?"HEAD":"GET";let c=!1;const h=(s??"*").split("").map(g=>/\s/.test(g)&&!c?"":(g==='"'&&(c=!c),g)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",h),o&&m.append("Prefer",`count=${o}`),new Sr({method:l,url:f,headers:m,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(s,{count:n,defaultToNull:r=!0}={}){var o;const l="POST",{url:c,headers:h}=this.cloneRequestState();if(n&&h.append("Prefer",`count=${n}`),r||h.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);c.searchParams.set("columns",m.join(","))}}return new Sr({method:l,url:c,headers:h,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(s,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:l=!0}={}){var c;const h="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&f.searchParams.set("on_conflict",n),o&&m.append("Prefer",`count=${o}`),l||m.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(g.length>0){const v=[...new Set(g)].map(x=>`"${x}"`);f.searchParams.set("columns",v.join(","))}}return new Sr({method:h,url:f,headers:m,schema:this.schema,body:s,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}update(s,{count:n}={}){var r;const o="PATCH",{url:l,headers:c}=this.cloneRequestState();return n&&c.append("Prefer",`count=${n}`),new Sr({method:o,url:l,headers:c,schema:this.schema,body:s,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:s}={}){var n;const r="DELETE",{url:o,headers:l}=this.cloneRequestState();return s&&l.append("Prefer",`count=${s}`),new Sr({method:r,url:o,headers:l,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function xs(s){"@babel/helpers - typeof";return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xs(s)}function lv(s,n){if(xs(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(xs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function uv(s){var n=lv(s,"string");return xs(n)=="symbol"?n:n+""}function cv(s,n,r){return(n=uv(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Kd(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,o)}return r}function Wi(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Kd(Object(r),!0).forEach(function(o){cv(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Kd(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}var dv=class Oh{constructor(n,{headers:r={},schema:o,fetch:l,timeout:c,urlLengthLimit:h=8e3}={}){this.url=n,this.headers=new Headers(r),this.schemaName=o,this.urlLengthLimit=h;const f=l??globalThis.fetch;c!==void 0&&c>0?this.fetch=(m,g)=>{const v=new AbortController,x=setTimeout(()=>v.abort(),c),E=g==null?void 0:g.signal;if(E){if(E.aborted)return clearTimeout(x),f(m,g);const k=()=>{clearTimeout(x),v.abort()};return E.addEventListener("abort",k,{once:!0}),f(m,Wi(Wi({},g),{},{signal:v.signal})).finally(()=>{clearTimeout(x),E.removeEventListener("abort",k)})}return f(m,Wi(Wi({},g),{},{signal:v.signal})).finally(()=>clearTimeout(x))}:this.fetch=f}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new av(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new Oh(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,r={},{head:o=!1,get:l=!1,count:c}={}){var h;let f;const m=new URL(`${this.url}/rpc/${n}`);let g;const v=k=>k!==null&&typeof k=="object"&&(!Array.isArray(k)||k.some(v)),x=o&&Object.values(r).some(v);x?(f="POST",g=r):o||l?(f=o?"HEAD":"GET",Object.entries(r).filter(([k,C])=>C!==void 0).map(([k,C])=>[k,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([k,C])=>{m.searchParams.append(k,C)})):(f="POST",g=r);const E=new Headers(this.headers);return x?E.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&E.set("Prefer",`count=${c}`),new Sr({method:f,url:m,headers:E,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch,urlLengthLimit:this.urlLengthLimit})}};class hv{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const o=r.versions;if(o&&o.node){const l=o.node,c=parseInt(l.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let r=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(r+=`

Suggested solution: ${n.workaround}`),new Error(r)}static createWebSocket(n,r){const o=this.getWebSocketConstructor();return new o(n,r)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const fv="2.97.0",pv=`realtime-js/${fv}`,mv="1.0.0",jh="2.0.0",Gd=jh,vl=1e4,gv=1e3,vv=100;var wn;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(wn||(wn={}));var Be;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Be||(Be={}));var Rt;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Rt||(Rt={}));var yl;(function(s){s.websocket="websocket"})(yl||(yl={}));var Mn;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Mn||(Mn={}));class yv{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,r){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(n));let o=[n.join_ref,n.ref,n.topic,n.event,n.payload];return r(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(n){var r;return this._isArrayBuffer((r=n.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var r,o;const l=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(n){var r,o;const l=(o=(r=n.payload)===null||r===void 0?void 0:r.payload)!==null&&o!==void 0?o:{},h=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,h)}_encodeUserBroadcastPush(n,r,o){var l,c;const h=n.topic,f=(l=n.ref)!==null&&l!==void 0?l:"",m=(c=n.join_ref)!==null&&c!==void 0?c:"",g=n.payload.event,v=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},x=Object.keys(v).length===0?"":JSON.stringify(v);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`topic length ${h.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+h.length+g.length+x.length,k=new ArrayBuffer(this.HEADER_LENGTH+E);let C=new DataView(k),P=0;C.setUint8(P++,this.KINDS.userBroadcastPush),C.setUint8(P++,m.length),C.setUint8(P++,f.length),C.setUint8(P++,h.length),C.setUint8(P++,g.length),C.setUint8(P++,x.length),C.setUint8(P++,r),Array.from(m,L=>C.setUint8(P++,L.charCodeAt(0))),Array.from(f,L=>C.setUint8(P++,L.charCodeAt(0))),Array.from(h,L=>C.setUint8(P++,L.charCodeAt(0))),Array.from(g,L=>C.setUint8(P++,L.charCodeAt(0))),Array.from(x,L=>C.setUint8(P++,L.charCodeAt(0)));var N=new Uint8Array(k.byteLength+o.byteLength);return N.set(new Uint8Array(k),0),N.set(new Uint8Array(o),k.byteLength),N.buffer}decode(n,r){if(this._isArrayBuffer(n)){let o=this._binaryDecode(n);return r(o)}if(typeof n=="string"){const o=JSON.parse(n),[l,c,h,f,m]=o;return r({join_ref:l,ref:c,topic:h,event:f,payload:m})}return r({})}_binaryDecode(n){const r=new DataView(n),o=r.getUint8(0),l=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,r,l)}}_decodeUserBroadcast(n,r,o){const l=r.getUint8(1),c=r.getUint8(2),h=r.getUint8(3),f=r.getUint8(4);let m=this.HEADER_LENGTH+4;const g=o.decode(n.slice(m,m+l));m=m+l;const v=o.decode(n.slice(m,m+c));m=m+c;const x=o.decode(n.slice(m,m+h));m=m+h;const E=n.slice(m,n.byteLength),k=f===this.JSON_ENCODING?JSON.parse(o.decode(E)):E,C={type:this.BROADCAST_EVENT,event:v,payload:k};return h>0&&(C.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:C}}_isArrayBuffer(n){var r;return n instanceof ArrayBuffer||((r=n==null?void 0:n.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(n,r){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([o])=>r.includes(o)))}}class Ph{constructor(n,r){this.callback=n,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ke;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(ke||(ke={}));const Jd=(s,n,r={})=>{var o;const l=(o=r.skipTypes)!==null&&o!==void 0?o:[];return n?Object.keys(n).reduce((c,h)=>(c[h]=wv(h,s,n,l),c),{}):{}},wv=(s,n,r,o)=>{const l=n.find(f=>f.name===s),c=l==null?void 0:l.type,h=r[s];return c&&!o.includes(c)?Nh(c,h):wl(h)},Nh=(s,n)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return xv(n,r)}switch(s){case ke.bool:return _v(n);case ke.float4:case ke.float8:case ke.int2:case ke.int4:case ke.int8:case ke.numeric:case ke.oid:return kv(n);case ke.json:case ke.jsonb:return Sv(n);case ke.timestamp:return Ev(n);case ke.abstime:case ke.date:case ke.daterange:case ke.int4range:case ke.int8range:case ke.money:case ke.reltime:case ke.text:case ke.time:case ke.timestamptz:case ke.timetz:case ke.tsrange:case ke.tstzrange:return wl(n);default:return wl(n)}},wl=s=>s,_v=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},kv=s=>{if(typeof s=="string"){const n=parseFloat(s);if(!Number.isNaN(n))return n}return s},Sv=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},xv=(s,n)=>{if(typeof s!="string")return s;const r=s.length-1,o=s[r];if(s[0]==="{"&&o==="}"){let c;const h=s.slice(1,r);try{c=JSON.parse("["+h+"]")}catch{c=h?h.split(","):[]}return c.map(f=>Nh(n,f))}return s},Ev=s=>typeof s=="string"?s.replace(" ","T"):s,Rh=s=>{const n=new URL(s);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class ul{constructor(n,r,o={},l=vl){this.channel=n,this.event=r,this.payload=o,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,r){var o;return this._hasReceived(n)&&r((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:n,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:r}){this.recHooks.filter(o=>o.status===n).forEach(o=>o.callback(r))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var Yd;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Yd||(Yd={}));class ks{constructor(n,r){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},l=>{const{onJoin:c,onLeave:h,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ks.syncState(this.state,l,c,h),this.pendingDiffs.forEach(m=>{this.state=ks.syncDiff(this.state,m,c,h)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},l=>{const{onJoin:c,onLeave:h,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=ks.syncDiff(this.state,l,c,h),f())}),this.onJoin((l,c,h)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:h})}),this.onLeave((l,c,h)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,r,o,l){const c=this.cloneDeep(n),h=this.transformState(r),f={},m={};return this.map(c,(g,v)=>{h[g]||(m[g]=v)}),this.map(h,(g,v)=>{const x=c[g];if(x){const E=v.map(N=>N.presence_ref),k=x.map(N=>N.presence_ref),C=v.filter(N=>k.indexOf(N.presence_ref)<0),P=x.filter(N=>E.indexOf(N.presence_ref)<0);C.length>0&&(f[g]=C),P.length>0&&(m[g]=P)}else f[g]=v}),this.syncDiff(c,{joins:f,leaves:m},o,l)}static syncDiff(n,r,o,l){const{joins:c,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return o||(o=()=>{}),l||(l=()=>{}),this.map(c,(f,m)=>{var g;const v=(g=n[f])!==null&&g!==void 0?g:[];if(n[f]=this.cloneDeep(m),v.length>0){const x=n[f].map(k=>k.presence_ref),E=v.filter(k=>x.indexOf(k.presence_ref)<0);n[f].unshift(...E)}o(f,v,m)}),this.map(h,(f,m)=>{let g=n[f];if(!g)return;const v=m.map(x=>x.presence_ref);g=g.filter(x=>v.indexOf(x.presence_ref)<0),n[f]=g,l(f,g,m),g.length===0&&delete n[f]}),n}static map(n,r){return Object.getOwnPropertyNames(n).map(o=>r(o,n[o]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((r,o)=>{const l=n[o];return"metas"in l?r[o]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):r[o]=l,r},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qd;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Qd||(Qd={}));var Ss;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Ss||(Ss={}));var Yt;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(Yt||(Yt={}));class br{constructor(n,r={config:{}},o){var l,c;if(this.topic=n,this.params=r,this.socket=o,this.bindings={},this.state=Be.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ul(this,Rt.join,this.params,this.timeout),this.rejoinTimer=new Ph(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Be.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Be.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Be.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rt.reply,{},(h,f)=>{this._trigger(this._replyEventName(f),h)}),this.presence=new ks(this),this.broadcastEndpointURL=Rh(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,r=this.timeout){var o,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==Be.closed){const{config:{broadcast:h,presence:f,private:m}}=this.params,g=(l=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(k=>k.filter))!==null&&l!==void 0?l:[],v=!!this.bindings[Ss.PRESENCE]&&this.bindings[Ss.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,x={},E={broadcast:h,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:g,private:m};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(k=>n==null?void 0:n(Yt.CHANNEL_ERROR,k)),this._onClose(()=>n==null?void 0:n(Yt.CLOSED)),this.updateJoinPayload(Object.assign({config:E},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:k})=>{var C;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){n==null||n(Yt.SUBSCRIBED);return}else{const P=this.bindings.postgres_changes,N=(C=P==null?void 0:P.length)!==null&&C!==void 0?C:0,L=[];for(let M=0;M<N;M++){const R=P[M],{filter:{event:B,schema:ne,table:J,filter:se}}=R,ye=k&&k[M];if(ye&&ye.event===B&&br.isFilterValueEqual(ye.schema,ne)&&br.isFilterValueEqual(ye.table,J)&&br.isFilterValueEqual(ye.filter,se))L.push(Object.assign(Object.assign({},R),{id:ye.id}));else{this.unsubscribe(),this.state=Be.errored,n==null||n(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=L,n&&n(Yt.SUBSCRIBED);return}}).receive("error",k=>{this.state=Be.errored,n==null||n(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,r={}){return await this.send({type:"presence",event:"track",payload:n},r.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,r,o){return this.state===Be.joined&&n===Ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,r,o)}async httpSend(n,r,o={}){var l;if(r==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:r,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(l=o.timeout)!==null&&l!==void 0?l:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const g=await f.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))}async send(n,r={}){var o,l;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:h}=n,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:h,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);return await((l=g.body)===null||l===void 0?void 0:l.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var h,f,m;const g=this._push(n.type,n,r.timeout||this.timeout);n.type==="broadcast"&&!(!((m=(f=(h=this.params)===null||h===void 0?void 0:h.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),g.receive("ok",()=>c("ok")),g.receive("error",()=>c("error")),g.receive("timeout",()=>c("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=Be.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(l=>{o=new ul(this,Rt.leave,{},n),o.receive("ok",()=>{r(),l("ok")}).receive("timeout",()=>{r(),l("timed out")}).receive("error",()=>{l("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Be.closed,this.bindings={}}async _fetchWithTimeout(n,r,o){const l=new AbortController,c=setTimeout(()=>l.abort(),o),h=await this.socket.fetch(n,Object.assign(Object.assign({},r),{signal:l.signal}));return clearTimeout(c),h}_push(n,r,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new ul(this,n,r,o);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>vv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(n,r,o){return r}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,r,o){var l,c;const h=n.toLocaleLowerCase(),{close:f,error:m,leave:g,join:v}=Rt;if(o&&[f,m,g,v].indexOf(h)>=0&&o!==this._joinRef())return;let E=this._onMessage(h,r,o);if(r&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(k=>{var C,P,N;return((C=k.filter)===null||C===void 0?void 0:C.event)==="*"||((N=(P=k.filter)===null||P===void 0?void 0:P.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===h}).map(k=>k.callback(E,o)):(c=this.bindings[h])===null||c===void 0||c.filter(k=>{var C,P,N,L,M,R;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in k){const B=k.id,ne=(C=k.filter)===null||C===void 0?void 0:C.event;return B&&((P=r.ids)===null||P===void 0?void 0:P.includes(B))&&(ne==="*"||(ne==null?void 0:ne.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const B=(M=(L=k==null?void 0:k.filter)===null||L===void 0?void 0:L.event)===null||M===void 0?void 0:M.toLocaleLowerCase();return B==="*"||B===((R=r==null?void 0:r.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===h}).map(k=>{if(typeof E=="object"&&"ids"in E){const C=E.data,{schema:P,table:N,commit_timestamp:L,type:M,errors:R}=C;E=Object.assign(Object.assign({},{schema:P,table:N,commit_timestamp:L,eventType:M,new:{},old:{},errors:R}),this._getPayloadRecords(C))}k.callback(E,o)})}_isClosed(){return this.state===Be.closed}_isJoined(){return this.state===Be.joined}_isJoining(){return this.state===Be.joining}_isLeaving(){return this.state===Be.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,r,o){const l=n.toLocaleLowerCase(),c={type:l,filter:r,callback:o};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(n,r){const o=n.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&br.isEqual(l.filter,r))})),this}static isEqual(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const o in n)if(n[o]!==r[o])return!1;return!0}static isFilterValueEqual(n,r){return(n??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Rt.close,{},n)}_onError(n){this._on(Rt.error,{},r=>n(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Be.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const r={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(r.new=Jd(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(r.old=Jd(n.columns,n.old_record)),r}}const cl=()=>{},qi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bv=[1e3,2e3,5e3,1e4],Tv=1e4,Cv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ov{constructor(n,r){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vl,this.transport=null,this.heartbeatIntervalMs=qi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cl,this.ref=0,this.reconnectTimer=null,this.vsn=Gd,this.logger=cl,this.conn=null,this.sendBuffer=[],this.serializer=new yv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...c)=>l(...c):(...c)=>fetch(...c),!(!((o=r==null?void 0:r.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${n}/${yl.websocket}`,this.httpEndpoint=Rh(n),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hv.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const r=n.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const r=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const n=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,r,o){this.logger(n,r,o)}connectionState(){switch(this.conn&&this.conn.readyState){case wn.connecting:return Mn.Connecting;case wn.open:return Mn.Open;case wn.closing:return Mn.Closing;default:return Mn.Closed}}isConnected(){return this.connectionState()===Mn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,r={config:{}}){const o=`realtime:${n}`,l=this.getChannels().find(c=>c.topic===o);if(l)return l;{const c=new br(`realtime:${n}`,r,this);return this.channels.push(c),c}}push(n){const{topic:r,event:o,payload:l,ref:c}=n,h=()=>{this.encode(n,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${r} ${o} (${c})`,l),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(gv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},qi.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let r=this.channels.find(o=>o.topic===n&&(o._isJoined()||o._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${n}"`),r.unsubscribe())}_remove(n){this.channels=this.channels.filter(r=>r.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const g=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",g)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:l,payload:c,ref:h}=r,f=h?`(${h})`:"",m=c.status||"";this.log("receive",`${m} ${o} ${l} ${f}`.trim(),c),this.channels.filter(g=>g._isMember(o)).forEach(g=>g._trigger(l,c,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(n){var r;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===wn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===wn.open||this.conn.readyState===wn.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var r;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(Rt.error))}_appendParams(n,r){if(Object.keys(r).length===0)return n;const o=n.match(/\?/)?"&":"?",l=new URLSearchParams(r);return`${n}${o}${l}`}_workerObjectUrl(n){let r;if(n)r=n;else{const o=new Blob([Cv],{type:"application/javascript"});r=URL.createObjectURL(o)}return r}_setConnectionState(n,r=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(n=null){let r,o=!1;if(n)r=n,o=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),r=this.accessTokenValue}else r=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(l=>{const c={access_token:r,version:pv};r&&l.updateJoinPayload(c),l.joinedOnce&&l._isJoined()&&l._push(Rt.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${n}`,r)})}_triggerStateCallbacks(n,r){try{this.stateChangeCallbacks[n].forEach(o=>{try{o(r)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(o){this.log("error",`error triggering ${n} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Ph(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var r,o,l,c,h,f,m,g,v,x,E,k;switch(this.transport=(r=n==null?void 0:n.transport)!==null&&r!==void 0?r:null,this.timeout=(o=n==null?void 0:n.timeout)!==null&&o!==void 0?o:vl,this.heartbeatIntervalMs=(l=n==null?void 0:n.heartbeatIntervalMs)!==null&&l!==void 0?l:qi.HEARTBEAT_INTERVAL,this.worker=(c=n==null?void 0:n.worker)!==null&&c!==void 0?c:!1,this.accessToken=(h=n==null?void 0:n.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(f=n==null?void 0:n.heartbeatCallback)!==null&&f!==void 0?f:cl,this.vsn=(m=n==null?void 0:n.vsn)!==null&&m!==void 0?m:Gd,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=n==null?void 0:n.reconnectAfterMs)!==null&&g!==void 0?g:(C=>bv[C-1]||Tv),this.vsn){case mv:this.encode=(v=n==null?void 0:n.encode)!==null&&v!==void 0?v:((C,P)=>P(JSON.stringify(C))),this.decode=(x=n==null?void 0:n.decode)!==null&&x!==void 0?x:((C,P)=>P(JSON.parse(C)));break;case jh:this.encode=(E=n==null?void 0:n.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(k=n==null?void 0:n.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var Es=class extends Error{constructor(s,n){var r;super(s),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((r=n.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jv(s,n,r){const o=new URL(n,s);if(r)for(const[l,c]of Object.entries(r))c!==void 0&&o.searchParams.set(l,c);return o.toString()}async function Pv(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function Nv(s){const n=s.fetchImpl??globalThis.fetch;return{async request({method:r,path:o,query:l,body:c,headers:h}){const f=jv(s.baseUrl,o,l),m=await Pv(s.auth),g=await n(f,{method:r,headers:{...c?{"Content-Type":"application/json"}:{},...m,...h},body:c?JSON.stringify(c):void 0}),v=await g.text(),x=(g.headers.get("content-type")||"").includes("application/json"),E=x&&v?JSON.parse(v):v;if(!g.ok){const k=x?E:void 0,C=k==null?void 0:k.error;throw new Es((C==null?void 0:C.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:C==null?void 0:C.type,icebergCode:C==null?void 0:C.code,details:k})}return{status:g.status,headers:g.headers,data:E}}}}function Hi(s){return s.join("")}var Rv=class{constructor(s,n=""){this.client=s,this.prefix=n}async listNamespaces(s){const n=s?{parent:Hi(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(s,n){const r={namespace:s.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Hi(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Hi(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Hi(s.namespace)}`}),!0}catch(n){if(n instanceof Es&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(s,n){try{return await this.createNamespace(s,n)}catch(r){if(r instanceof Es&&r.status===409)return;throw r}}};function gr(s){return s.join("")}var Av=class{constructor(s,n="",r){this.client=s,this.prefix=n,this.accessDelegation=r}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gr(s.namespace)}/tables`})).data.identifiers}async createTable(s,n){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gr(s.namespace)}/tables`,body:n,headers:r})).data.metadata}async updateTable(s,n){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${gr(s.namespace)}/tables/${s.name}`,body:n});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(s,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${gr(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(s){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${gr(s.namespace)}/tables/${s.name}`,headers:n})).data.metadata}async tableExists(s){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${gr(s.namespace)}/tables/${s.name}`,headers:n}),!0}catch(r){if(r instanceof Es&&r.status===404)return!1;throw r}}async createTableIfNotExists(s,n){try{return await this.createTable(s,n)}catch(r){if(r instanceof Es&&r.status===409)return await this.loadTable({namespace:s.namespace,name:n.name});throw r}}},Iv=class{constructor(s){var o;let n="v1";s.catalogName&&(n+=`/${s.catalogName}`);const r=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=Nv({baseUrl:r,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(o=s.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new Rv(this.client,n),this.tableOps=new Av(this.client,n,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,n){return this.namespaceOps.createNamespace(s,n)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,n){return this.tableOps.createTable(s,n)}async updateTable(s,n){return this.tableOps.updateTable(s,n)}async dropTable(s,n){await this.tableOps.dropTable(s,n)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,n){return this.namespaceOps.createNamespaceIfNotExists(s,n)}async createTableIfNotExists(s,n){return this.tableOps.createTableIfNotExists(s,n)}},oo=class extends Error{constructor(s,n="storage",r,o){super(s),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=o}};function ao(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Vi=class extends oo{constructor(s,n,r,o="storage"){super(s,o,n,r),this.name=o==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Ah=class extends oo{constructor(s,n,r="storage"){super(s,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const Dv=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Lv=s=>{if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},_l=s=>{if(Array.isArray(s))return s.map(r=>_l(r));if(typeof s=="function"||s!==Object(s))return s;const n={};return Object.entries(s).forEach(([r,o])=>{const l=r.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));n[l]=_l(o)}),n},$v=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function bs(s){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bs(s)}function Mv(s,n){if(bs(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(bs(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function Uv(s){var n=Mv(s,"string");return bs(n)=="symbol"?n:n+""}function Bv(s,n,r){return(n=Uv(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function Xd(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,o)}return r}function X(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Xd(Object(r),!0).forEach(function(o){Bv(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):Xd(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}const Zd=s=>{var n;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(n=s.error)===null||n===void 0?void 0:n.message)||JSON.stringify(s)},zv=async(s,n,r,o)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(r!=null&&r.noResolveJson)){const l=s,c=l.status||500;if(typeof l.json=="function")l.json().then(h=>{const f=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||c+"";n(new Vi(Zd(h),c,f,o))}).catch(()=>{if(o==="vectors"){const h=c+"";n(new Vi(l.statusText||`HTTP ${c} error`,c,h,o))}else{const h=c+"";n(new Vi(l.statusText||`HTTP ${c} error`,c,h,o))}});else{const h=c+"";n(new Vi(l.statusText||`HTTP ${c} error`,c,h,o))}}else n(new Ah(Zd(s),s,o))},Fv=(s,n,r,o)=>{const l={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"||s==="HEAD"||!o?X(X({},l),r):(Lv(o)?(l.headers=X({"Content-Type":"application/json"},n==null?void 0:n.headers),l.body=JSON.stringify(o)):l.body=o,n!=null&&n.duplex&&(l.duplex=n.duplex),X(X({},l),r))};async function ys(s,n,r,o,l,c,h){return new Promise((f,m)=>{s(r,Fv(n,o,l,c)).then(g=>{if(!g.ok)throw g;if(o!=null&&o.noResolveJson)return g;if(h==="vectors"){const v=g.headers.get("content-type");if(g.headers.get("content-length")==="0"||g.status===204)return{};if(!v||!v.includes("application/json"))return{}}return g.json()}).then(g=>f(g)).catch(g=>zv(g,m,o,h))})}function Ih(s="storage"){return{get:async(n,r,o,l)=>ys(n,"GET",r,o,l,void 0,s),post:async(n,r,o,l,c)=>ys(n,"POST",r,l,c,o,s),put:async(n,r,o,l,c)=>ys(n,"PUT",r,l,c,o,s),head:async(n,r,o,l)=>ys(n,"HEAD",r,X(X({},o),{},{noResolveJson:!0}),l,void 0,s),remove:async(n,r,o,l,c)=>ys(n,"DELETE",r,l,c,o,s)}}const Wv=Ih("storage"),{get:Ts,post:Nt,put:kl,head:qv,remove:jl}=Wv,gt=Ih("vectors");var jr=class{constructor(s,n={},r,o="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=n,this.fetch=Dv(r),this.namespace=o}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,n){return this.headers=X(X({},this.headers),{},{[s]:n}),this}async handleOperation(s){var n=this;try{return{data:await s(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ao(r))return{data:null,error:r};throw r}}},Hv=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n}then(s,n){return this.execute().then(s,n)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ao(n))return{data:null,error:n};throw n}}};let Dh;Dh=Symbol.toStringTag;var Vv=class{constructor(s,n){this.downloadFn=s,this.shouldThrowOnError=n,this[Dh]="BlobDownloadBuilder",this.promise=null}asStream(){return new Hv(this.downloadFn,this.shouldThrowOnError)}then(s,n){return this.getPromise().then(s,n)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(ao(n))return{data:null,error:n};throw n}}};const Kv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Gv=class extends jr{constructor(s,n={},r,o){super(s,n,o,"storage"),this.bucketId=r}async uploadOrUpdate(s,n,r,o){var l=this;return l.handleOperation(async()=>{let c;const h=X(X({},eh),o);let f=X(X({},l.headers),s==="POST"&&{"x-upsert":String(h.upsert)});const m=h.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",h.cacheControl),m&&c.append("metadata",l.encodeMetadata(m)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.has("cacheControl")||c.append("cacheControl",h.cacheControl),m&&!c.has("metadata")&&c.append("metadata",l.encodeMetadata(m))):(c=r,f["cache-control"]=`max-age=${h.cacheControl}`,f["content-type"]=h.contentType,m&&(f["x-metadata"]=l.toBase64(l.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!h.duplex&&(h.duplex="half")),o!=null&&o.headers&&(f=X(X({},f),o.headers));const g=l._removeEmptyFolders(n),v=l._getFinalPath(g),x=await(s=="PUT"?kl:Nt)(l.fetch,`${l.url}/object/${v}`,c,X({headers:f},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{path:g,id:x.Id,fullPath:x.Key}})}async upload(s,n,r){return this.uploadOrUpdate("POST",s,n,r)}async uploadToSignedUrl(s,n,r,o){var l=this;const c=l._removeEmptyFolders(s),h=l._getFinalPath(c),f=new URL(l.url+`/object/upload/sign/${h}`);return f.searchParams.set("token",n),l.handleOperation(async()=>{let m;const g=X({upsert:eh.upsert},o),v=X(X({},l.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&r instanceof Blob?(m=new FormData,m.append("cacheControl",g.cacheControl),m.append("",r)):typeof FormData<"u"&&r instanceof FormData?(m=r,m.append("cacheControl",g.cacheControl)):(m=r,v["cache-control"]=`max-age=${g.cacheControl}`,v["content-type"]=g.contentType),{path:c,fullPath:(await kl(l.fetch,f.toString(),m,{headers:v})).Key}})}async createSignedUploadUrl(s,n){var r=this;return r.handleOperation(async()=>{let o=r._getFinalPath(s);const l=X({},r.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const c=await Nt(r.fetch,`${r.url}/object/upload/sign/${o}`,{},{headers:l}),h=new URL(r.url+c.url),f=h.searchParams.get("token");if(!f)throw new oo("No token returned by API");return{signedUrl:h.toString(),path:s,token:f}})}async update(s,n,r){return this.uploadOrUpdate("PUT",s,n,r)}async move(s,n,r){var o=this;return o.handleOperation(async()=>await Nt(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:o.headers}))}async copy(s,n,r){var o=this;return o.handleOperation(async()=>({path:(await Nt(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:o.headers})).Key}))}async createSignedUrl(s,n,r){var o=this;return o.handleOperation(async()=>{let l=o._getFinalPath(s),c=await Nt(o.fetch,`${o.url}/object/sign/${l}`,X({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:o.headers});const h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${o.url}${c.signedURL}${h}`)}})}async createSignedUrls(s,n,r){var o=this;return o.handleOperation(async()=>{const l=await Nt(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:n,paths:s},{headers:o.headers}),c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l.map(h=>X(X({},h),{},{signedUrl:h.signedURL?encodeURI(`${o.url}${h.signedURL}${c}`):null}))})}download(s,n,r){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=l?`?${l}`:"",h=this._getFinalPath(s),f=()=>Ts(this.fetch,`${this.url}/${o}/${h}${c}`,{headers:this.headers,noResolveJson:!0},r);return new Vv(f,this.shouldThrowOnError)}async info(s){var n=this;const r=n._getFinalPath(s);return n.handleOperation(async()=>_l(await Ts(n.fetch,`${n.url}/object/info/${r}`,{headers:n.headers})))}async exists(s){var n=this;const r=n._getFinalPath(s);try{return await qv(n.fetch,`${n.url}/object/${r}`,{headers:n.headers}),{data:!0,error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(ao(o)&&o instanceof Ah){const l=o.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:o}}throw o}}getPublicUrl(s,n){const r=this._getFinalPath(s),o=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&o.push(l);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&o.push(h);let f=o.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${f}`)}}}async remove(s){var n=this;return n.handleOperation(async()=>await jl(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:s},{headers:n.headers}))}async list(s,n,r){var o=this;return o.handleOperation(async()=>{const l=X(X(X({},Kv),n),{},{prefix:s||""});return await Nt(o.fetch,`${o.url}/object/list/${o.bucketId}`,l,{headers:o.headers},r)})}async listV2(s,n){var r=this;return r.handleOperation(async()=>{const o=X({},s);return await Nt(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,o,{headers:r.headers},n)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}};const Jv="2.97.0",Ps={"X-Client-Info":`storage-js/${Jv}`};var Yv=class extends jr{constructor(s,n={},r,o){const l=new URL(s);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase."));const c=l.href.replace(/\/$/,""),h=X(X({},Ps),n);super(c,h,r,"storage")}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=n.listBucketOptionsToQueryString(s);return await Ts(n.fetch,`${n.url}/bucket${r}`,{headers:n.headers})})}async getBucket(s){var n=this;return n.handleOperation(async()=>await Ts(n.fetch,`${n.url}/bucket/${s}`,{headers:n.headers}))}async createBucket(s,n={public:!1}){var r=this;return r.handleOperation(async()=>await Nt(r.fetch,`${r.url}/bucket`,{id:s,name:s,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async updateBucket(s,n){var r=this;return r.handleOperation(async()=>await kl(r.fetch,`${r.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(s){var n=this;return n.handleOperation(async()=>await Nt(n.fetch,`${n.url}/bucket/${s}/empty`,{},{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await jl(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(s){const n={};return s&&("limit"in s&&(n.limit=String(s.limit)),"offset"in s&&(n.offset=String(s.offset)),s.search&&(n.search=s.search),s.sortColumn&&(n.sortColumn=s.sortColumn),s.sortOrder&&(n.sortOrder=s.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},Qv=class extends jr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=X(X({},Ps),n);super(o,l,r,"storage")}async createBucket(s){var n=this;return n.handleOperation(async()=>await Nt(n.fetch,`${n.url}/bucket`,{name:s},{headers:n.headers}))}async listBuckets(s){var n=this;return n.handleOperation(async()=>{const r=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&r.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&r.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&r.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&r.set("sortOrder",s.sortOrder),s!=null&&s.search&&r.set("search",s.search);const o=r.toString(),l=o?`${n.url}/bucket?${o}`:`${n.url}/bucket`;return await Ts(n.fetch,l,{headers:n.headers})})}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await jl(n.fetch,`${n.url}/bucket/${s}`,{},{headers:n.headers}))}from(s){var n=this;if(!$v(s))throw new oo("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new Iv({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(r,{get(l,c){const h=l[c];return typeof h!="function"?h:async(...f)=>{try{return{data:await h.apply(l,f),error:null}}catch(m){if(o)throw m;return{data:null,error:m}}}}})}},Xv=class extends jr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=X(X({},Ps),{},{"Content-Type":"application/json"},n);super(o,l,r,"vectors")}async createIndex(s){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/CreateIndex`,s,{headers:n.headers})||{})}async getIndex(s,n){var r=this;return r.handleOperation(async()=>await gt.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers}))}async listIndexes(s){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/ListIndexes`,s,{headers:n.headers}))}async deleteIndex(s,n){var r=this;return r.handleOperation(async()=>await gt.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:s,indexName:n},{headers:r.headers})||{})}},Zv=class extends jr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=X(X({},Ps),{},{"Content-Type":"application/json"},n);super(o,l,r,"vectors")}async putVectors(s){var n=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/PutVectors`,s,{headers:n.headers})||{})}async getVectors(s){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/GetVectors`,s,{headers:n.headers}))}async listVectors(s){var n=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/ListVectors`,s,{headers:n.headers}))}async queryVectors(s){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/QueryVectors`,s,{headers:n.headers}))}async deleteVectors(s){var n=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/DeleteVectors`,s,{headers:n.headers})||{})}},ey=class extends jr{constructor(s,n={},r){const o=s.replace(/\/$/,""),l=X(X({},Ps),{},{"Content-Type":"application/json"},n);super(o,l,r,"vectors")}async createBucket(s){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}async getBucket(s){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:s},{headers:n.headers}))}async listBuckets(s={}){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/ListVectorBuckets`,s,{headers:n.headers}))}async deleteBucket(s){var n=this;return n.handleOperation(async()=>await gt.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:n.headers})||{})}},ty=class extends ey{constructor(s,n={}){super(s,n.headers||{},n.fetch)}from(s){return new ny(this.url,this.headers,s,this.fetch)}async createBucket(s){var n=()=>super.createBucket,r=this;return n().call(r,s)}async getBucket(s){var n=()=>super.getBucket,r=this;return n().call(r,s)}async listBuckets(s={}){var n=()=>super.listBuckets,r=this;return n().call(r,s)}async deleteBucket(s){var n=()=>super.deleteBucket,r=this;return n().call(r,s)}},ny=class extends Xv{constructor(s,n,r,o){super(s,n,o),this.vectorBucketName=r}async createIndex(s){var n=()=>super.createIndex,r=this;return n().call(r,X(X({},s),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(s={}){var n=()=>super.listIndexes,r=this;return n().call(r,X(X({},s),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(s){var n=()=>super.getIndex,r=this;return n().call(r,r.vectorBucketName,s)}async deleteIndex(s){var n=()=>super.deleteIndex,r=this;return n().call(r,r.vectorBucketName,s)}index(s){return new ry(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},ry=class extends Zv{constructor(s,n,r,o,l){super(s,n,l),this.vectorBucketName=r,this.indexName=o}async putVectors(s){var n=()=>super.putVectors,r=this;return n().call(r,X(X({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(s){var n=()=>super.getVectors,r=this;return n().call(r,X(X({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(s={}){var n=()=>super.listVectors,r=this;return n().call(r,X(X({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(s){var n=()=>super.queryVectors,r=this;return n().call(r,X(X({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(s){var n=()=>super.deleteVectors,r=this;return n().call(r,X(X({},s),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},sy=class extends Yv{constructor(s,n={},r,o){super(s,n,r,o)}from(s){return new Gv(this.url,this.headers,s,this.fetch)}get vectors(){return new ty(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Qv(this.url+"/iceberg",this.headers,this.fetch)}};const Lh="2.97.0",xr=30*1e3,Sl=3,dl=Sl*xr,iy="http://localhost:9999",oy="supabase.auth.token",ay={"X-Client-Info":`gotrue-js/${Lh}`},xl="X-Supabase-Api-Version",$h={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ly=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uy=600*1e3;class Cs extends Error{constructor(n,r,o){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=o}}function G(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class cy extends Cs{constructor(n,r,o){super(n,r,o),this.name="AuthApiError",this.status=r,this.code=o}}function dy(s){return G(s)&&s.name==="AuthApiError"}class Un extends Cs{constructor(n,r){super(n),this.name="AuthUnknownError",this.originalError=r}}class Qt extends Cs{constructor(n,r,o,l){super(n,o,l),this.name=r,this.status=o}}class pt extends Qt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hl(s){return G(s)&&s.name==="AuthSessionMissingError"}class vr extends Qt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ki extends Qt{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Gi extends Qt{constructor(n,r=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hy(s){return G(s)&&s.name==="AuthImplicitGrantRedirectError"}class th extends Qt{constructor(n,r=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class fy extends Qt{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class El extends Qt{constructor(n,r){super(n,"AuthRetryableFetchError",r,void 0)}}function fl(s){return G(s)&&s.name==="AuthRetryableFetchError"}class nh extends Qt{constructor(n,r,o){super(n,"AuthWeakPasswordError",r,"weak_password"),this.reasons=o}}class bl extends Qt{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const to="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),rh=` 	
\r=`.split(""),py=(()=>{const s=new Array(128);for(let n=0;n<s.length;n+=1)s[n]=-1;for(let n=0;n<rh.length;n+=1)s[rh[n].charCodeAt(0)]=-2;for(let n=0;n<to.length;n+=1)s[to[n].charCodeAt(0)]=n;return s})();function sh(s,n,r){if(s!==null)for(n.queue=n.queue<<8|s,n.queuedBits+=8;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(to[o]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const o=n.queue>>n.queuedBits-6&63;r(to[o]),n.queuedBits-=6}}function Mh(s,n,r){const o=py[s];if(o>-1)for(n.queue=n.queue<<6|o,n.queuedBits+=6;n.queuedBits>=8;)r(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function ih(s){const n=[],r=h=>{n.push(String.fromCodePoint(h))},o={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=h=>{vy(h,o,r)};for(let h=0;h<s.length;h+=1)Mh(s.charCodeAt(h),l,c);return n.join("")}function my(s,n){if(s<=127){n(s);return}else if(s<=2047){n(192|s>>6),n(128|s&63);return}else if(s<=65535){n(224|s>>12),n(128|s>>6&63),n(128|s&63);return}else if(s<=1114111){n(240|s>>18),n(128|s>>12&63),n(128|s>>6&63),n(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function gy(s,n){for(let r=0;r<s.length;r+=1){let o=s.charCodeAt(r);if(o>55295&&o<=56319){const l=(o-55296)*1024&65535;o=(s.charCodeAt(r+1)-56320&65535|l)+65536,r+=1}my(o,n)}}function vy(s,n,r){if(n.utf8seq===0){if(s<=127){r(s);return}for(let o=1;o<6;o+=1)if((s>>7-o&1)===0){n.utf8seq=o;break}if(n.utf8seq===2)n.codepoint=s&31;else if(n.utf8seq===3)n.codepoint=s&15;else if(n.utf8seq===4)n.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|s&63,n.utf8seq-=1,n.utf8seq===0&&r(n.codepoint)}}function Cr(s){const n=[],r={queue:0,queuedBits:0},o=l=>{n.push(l)};for(let l=0;l<s.length;l+=1)Mh(s.charCodeAt(l),r,o);return new Uint8Array(n)}function yy(s){const n=[];return gy(s,r=>n.push(r)),new Uint8Array(n)}function Fn(s){const n=[],r={queue:0,queuedBits:0},o=l=>{n.push(l)};return s.forEach(l=>sh(l,r,o)),sh(null,r,o),n.join("")}function wy(s){return Math.round(Date.now()/1e3)+s}function _y(){return Symbol("auth-callback")}const Ge=()=>typeof window<"u"&&typeof document<"u",In={tested:!1,writable:!1},Uh=()=>{if(!Ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(In.tested)return In.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),In.tested=!0,In.writable=!0}catch{In.tested=!0,In.writable=!1}return In.writable};function ky(s){const n={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((l,c)=>{n[c]=l})}catch{}return r.searchParams.forEach((o,l)=>{n[l]=o}),n}const Bh=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),Sy=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Er=async(s,n,r)=>{await s.setItem(n,JSON.stringify(r))},Dn=async(s,n)=>{const r=await s.getItem(n);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ke=async(s,n)=>{await s.removeItem(n)};class lo{constructor(){this.promise=new lo.promiseConstructor((n,r)=>{this.resolve=n,this.reject=r})}}lo.promiseConstructor=Promise;function Ji(s){const n=s.split(".");if(n.length!==3)throw new bl("Invalid JWT structure");for(let o=0;o<n.length;o++)if(!ly.test(n[o]))throw new bl("JWT not in base64url format");return{header:JSON.parse(ih(n[0])),payload:JSON.parse(ih(n[1])),signature:Cr(n[2]),raw:{header:n[0],payload:n[1]}}}async function xy(s){return await new Promise(n=>{setTimeout(()=>n(null),s)})}function Ey(s,n){return new Promise((o,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const h=await s(c);if(!n(c,null,h)){o(h);return}}catch(h){if(!n(c,h)){l(h);return}}})()})}function by(s){return("0"+s.toString(16)).substr(-2)}function Ty(){const n=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=r.length;let l="";for(let c=0;c<56;c++)l+=r.charAt(Math.floor(Math.random()*o));return l}return crypto.getRandomValues(n),Array.from(n,by).join("")}async function Cy(s){const r=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",r),l=new Uint8Array(o);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function Oy(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await Cy(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yr(s,n,r=!1){const o=Ty();let l=o;r&&(l+="/PASSWORD_RECOVERY"),await Er(s,`${n}-code-verifier`,l);const c=await Oy(o);return[c,o===c?"plain":"s256"]}const jy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Py(s){const n=s.headers.get(xl);if(!n||!n.match(jy))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Ny(s){if(!s)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(s<=n)throw new Error("JWT has expired")}function Ry(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ay=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wr(s){if(!Ay.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pl(){const s={};return new Proxy(s,{get:(n,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Iy(s,n){return new Proxy(s,{get:(r,o,l)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,o,l)}return!n.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(r,o,l)}})}function oh(s){return JSON.parse(JSON.stringify(s))}const $n=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Dy=[502,503,504];async function ah(s){var n;if(!Sy(s))throw new El($n(s),0);if(Dy.includes(s.status))throw new El($n(s),s.status);let r;try{r=await s.json()}catch(c){throw new Un($n(c),c)}let o;const l=Py(s);if(l&&l.getTime()>=$h["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?o=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(o=r.error_code),o){if(o==="weak_password")throw new nh($n(r),s.status,((n=r.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(o==="session_not_found")throw new pt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((c,h)=>c&&typeof h=="string",!0))throw new nh($n(r),s.status,r.weak_password.reasons);throw new cy($n(r),s.status||500,o)}const Ly=(s,n,r,o)=>{const l={method:s,headers:(n==null?void 0:n.headers)||{}};return s==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),l.body=JSON.stringify(o),Object.assign(Object.assign({},l),r))};async function Z(s,n,r,o){var l;const c=Object.assign({},o==null?void 0:o.headers);c[xl]||(c[xl]=$h["2024-01-01"].name),o!=null&&o.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const h=(l=o==null?void 0:o.query)!==null&&l!==void 0?l:{};o!=null&&o.redirectTo&&(h.redirect_to=o.redirectTo);const f=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",m=await $y(s,n,r+f,{headers:c,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(m):{data:Object.assign({},m),error:null}}async function $y(s,n,r,o,l,c){const h=Ly(n,o,l,c);let f;try{f=await s(r,Object.assign({},h))}catch(m){throw console.error(m),new El($n(m),0)}if(f.ok||await ah(f),o!=null&&o.noResolveJson)return f;try{return await f.json()}catch(m){await ah(m)}}function Pt(s){var n;let r=null;By(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=wy(s.expires_in)));const o=(n=s.user)!==null&&n!==void 0?n:s;return{data:{session:r,user:o},error:null}}function lh(s){const n=Pt(s);return!n.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0)&&(n.data.weak_password=s.weak_password),n}function _n(s){var n;return{data:{user:(n=s.user)!==null&&n!==void 0?n:s},error:null}}function My(s){return{data:s,error:null}}function Uy(s){const{action_link:n,email_otp:r,hashed_token:o,redirect_to:l,verification_type:c}=s,h=io(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:n,email_otp:r,hashed_token:o,redirect_to:l,verification_type:c},m=Object.assign({},h);return{data:{properties:f,user:m},error:null}}function uh(s){return s}function By(s){return s.access_token&&s.refresh_token&&s.expires_in}const ml=["global","local","others"];class zy{constructor({url:n="",headers:r={},fetch:o}){this.url=n,this.headers=r,this.fetch=Bh(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,r=ml[0]){if(ml.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ml.join(", ")}`);try{return await Z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(o){if(G(o))return{data:null,error:o};throw o}}async inviteUserByEmail(n,r={}){try{return await Z(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_n})}catch(o){if(G(o))return{data:{user:null},error:o};throw o}}async generateLink(n){try{const{options:r}=n,o=io(n,["options"]),l=Object.assign(Object.assign({},o),r);return"newEmail"in o&&(l.new_email=o==null?void 0:o.newEmail,delete l.newEmail),await Z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:Uy,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(G(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(n){try{return await Z(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:_n})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async listUsers(n){var r,o,l,c,h,f,m;try{const g={nextPage:null,lastPage:0,total:0},v=await Z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:uh});if(v.error)throw v.error;const x=await v.json(),E=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return k.length>0&&(k.forEach(C=>{const P=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);g[`${N}Page`]=P}),g.total=parseInt(E)),{data:Object.assign(Object.assign({},x),g),error:null}}catch(g){if(G(g))return{data:{users:[]},error:g};throw g}}async getUserById(n){wr(n);try{return await Z(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:_n})}catch(r){if(G(r))return{data:{user:null},error:r};throw r}}async updateUserById(n,r){wr(n);try{return await Z(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:r,headers:this.headers,xform:_n})}catch(o){if(G(o))return{data:{user:null},error:o};throw o}}async deleteUser(n,r=!1){wr(n);try{return await Z(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:r},xform:_n})}catch(o){if(G(o))return{data:{user:null},error:o};throw o}}async _listFactors(n){wr(n.userId);try{const{data:r,error:o}=await Z(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:r,error:o}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _deleteFactor(n){wr(n.userId),wr(n.id);try{return{data:await Z(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _listOAuthClients(n){var r,o,l,c,h,f,m;try{const g={nextPage:null,lastPage:0,total:0},v=await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(r=n==null?void 0:n.page)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:"",per_page:(c=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:uh});if(v.error)throw v.error;const x=await v.json(),E=(h=v.headers.get("x-total-count"))!==null&&h!==void 0?h:0,k=(m=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return k.length>0&&(k.forEach(C=>{const P=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);g[`${N}Page`]=P}),g.total=parseInt(E)),{data:Object.assign(Object.assign({},x),g),error:null}}catch(g){if(G(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(n){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _getOAuthClient(n){try{return await Z(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}async _updateOAuthClient(n,r){try{return await Z(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:r,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(G(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(n){try{return await Z(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(G(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(n){try{return await Z(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(G(r))return{data:null,error:r};throw r}}}function ch(s={}){return{getItem:n=>s[n]||null,setItem:(n,r)=>{s[n]=r},removeItem:n=>{delete s[n]}}}const _r={debug:!!(globalThis&&Uh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class dh extends zh{}async function Fy(s,n,r){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,n);const o=new globalThis.AbortController;n>0&&setTimeout(()=>{o.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(s,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async l=>{if(l){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,l.name);try{return await r()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,l.name)}}else{if(n===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new dh(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(_r.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}catch(l){throw(l==null?void 0:l.name)==="AbortError"?new dh(`Acquiring an exclusive Navigator LockManager lock "${s}" timed out waiting ${n}ms`):l}}function Wy(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Fh(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function qy(s){return parseInt(s,16)}function Hy(s){const n=new TextEncoder().encode(s);return"0x"+Array.from(n,o=>o.toString(16).padStart(2,"0")).join("")}function Vy(s){var n;const{chainId:r,domain:o,expirationTime:l,issuedAt:c=new Date,nonce:h,notBefore:f,requestId:m,resources:g,scheme:v,uri:x,version:E}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((n=s.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const k=Fh(s.address),C=v?`${v}://${o}`:o,P=s.statement?`${s.statement}
`:"",N=`${C} wants you to sign in with your Ethereum account:
${k}

${P}`;let L=`URI: ${x}
Version: ${E}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${c.toISOString()}`;if(l&&(L+=`
Expiration Time: ${l.toISOString()}`),f&&(L+=`
Not Before: ${f.toISOString()}`),m&&(L+=`
Request ID: ${m}`),g){let M=`
Resources:`;for(const R of g){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);M+=`
- ${R}`}L+=M}return`${N}
${L}`}class Le extends Error{constructor({message:n,code:r,cause:o,name:l}){var c;super(n,{cause:o}),this.__isWebAuthnError=!0,this.name=(c=l??(o instanceof Error?o.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=r}}class no extends Le{constructor(n,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:n}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ky({error:s,options:n}){var r,o,l;const{publicKey:c}=n;if(!c)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Le({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((r=c.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Le({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(n.mediation==="conditional"&&((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Le({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((l=c.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new Le({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new Le({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new Le({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Le({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new Le({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const h=window.location.hostname;if(Wh(h)){if(c.rp.id!==h)return new Le({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Le({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new Le({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Gy({error:s,options:n}){const{publicKey:r}=n;if(!r)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(n.signal instanceof AbortSignal)return new Le({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new Le({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const o=window.location.hostname;if(Wh(o)){if(r.rpId!==o)return new Le({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new Le({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new Le({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new Le({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Jy{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const Yy=new Jy;function Qy(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:n,user:r,excludeCredentials:o}=s,l=io(s,["challenge","user","excludeCredentials"]),c=Cr(n).buffer,h=Object.assign(Object.assign({},r),{id:Cr(r.id).buffer}),f=Object.assign(Object.assign({},l),{challenge:c,user:h});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let m=0;m<o.length;m++){const g=o[m];f.excludeCredentials[m]=Object.assign(Object.assign({},g),{id:Cr(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return f}function Xy(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:n,allowCredentials:r}=s,o=io(s,["challenge","allowCredentials"]),l=Cr(n).buffer,c=Object.assign(Object.assign({},o),{challenge:l});if(r&&r.length>0){c.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const f=r[h];c.allowCredentials[h]=Object.assign(Object.assign({},f),{id:Cr(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function Zy(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s;return{id:s.id,rawId:s.id,response:{attestationObject:Fn(new Uint8Array(s.response.attestationObject)),clientDataJSON:Fn(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function e0(s){var n;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const r=s,o=s.getClientExtensionResults(),l=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:Fn(new Uint8Array(l.authenticatorData)),clientDataJSON:Fn(new Uint8Array(l.clientDataJSON)),signature:Fn(new Uint8Array(l.signature)),userHandle:l.userHandle?Fn(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(n=r.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Wh(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function hh(){var s,n;return!!(Ge()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function t0(s){try{const n=await navigator.credentials.create(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new no("Browser returned unexpected credential type",n)}:{data:null,error:new no("Empty credential response",n)}}catch(n){return{data:null,error:Ky({error:n,options:s})}}}async function n0(s){try{const n=await navigator.credentials.get(s);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new no("Browser returned unexpected credential type",n)}:{data:null,error:new no("Empty credential response",n)}}catch(n){return{data:null,error:Gy({error:n,options:s})}}}const r0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},s0={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ro(...s){const n=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),r=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),o={};for(const l of s)if(l)for(const c in l){const h=l[c];if(h!==void 0)if(Array.isArray(h))o[c]=h;else if(r(h))o[c]=h;else if(n(h)){const f=o[c];n(f)?o[c]=ro(f,h):o[c]=ro(h)}else o[c]=h}return o}function i0(s,n){return ro(r0,s,n||{})}function o0(s,n){return ro(s0,s,n||{})}class a0{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:r,friendlyName:o,signal:l},c){var h;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:n,webauthn:r});if(!f)return{data:null,error:m};const g=l??Yy.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:v}=f.webauthn.credential_options.publicKey;if(!v.name){const x=o;if(x)v.name=`${v.id}:${x}`;else{const k=(await this.client.getUser()).data.user,C=((h=k==null?void 0:k.user_metadata)===null||h===void 0?void 0:h.name)||(k==null?void 0:k.email)||(k==null?void 0:k.id)||"User";v.name=`${v.id}:${C}`}}v.displayName||(v.displayName=v.name)}switch(f.webauthn.type){case"create":{const v=i0(f.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:x,error:E}=await t0({publicKey:v,signal:g});return x?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:E}}case"request":{const v=o0(f.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:x,error:E}=await n0(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:v,signal:g}));return x?{data:{factorId:n,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:x}},error:null}:{data:null,error:E}}}}catch(f){return G(f)?{data:null,error:f}:{data:null,error:new Un("Unexpected error in challenge",f)}}}async _verify({challengeId:n,factorId:r,webauthn:o}){return this.client.mfa.verify({factorId:r,challengeId:n,webauthn:o})}async _authenticate({factorId:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new Cs("rpId is required for WebAuthn authentication")};try{if(!hh())return{data:null,error:new Un("Browser does not support WebAuthn",null)};const{data:h,error:f}=await this.challenge({factorId:n,webauthn:{rpId:r,rpOrigins:o},signal:l},{request:c});if(!h)return{data:null,error:f};const{webauthn:m}=h;return this._verify({factorId:n,challengeId:h.challengeId,webauthn:{type:m.type,rpId:r,rpOrigins:o,credential_response:m.credential_response}})}catch(h){return G(h)?{data:null,error:h}:{data:null,error:new Un("Unexpected error in authenticate",h)}}}async _register({friendlyName:n,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},c){if(!r)return{data:null,error:new Cs("rpId is required for WebAuthn registration")};try{if(!hh())return{data:null,error:new Un("Browser does not support WebAuthn",null)};const{data:h,error:f}=await this._enroll({friendlyName:n});if(!h)return await this.client.mfa.listFactors().then(v=>{var x;return(x=v.data)===null||x===void 0?void 0:x.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===n&&E.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:f};const{data:m,error:g}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:o},signal:l},{create:c});return m?this._verify({factorId:h.id,challengeId:m.challengeId,webauthn:{rpId:r,rpOrigins:o,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(h){return G(h)?{data:null,error:h}:{data:null,error:new Un("Unexpected error in register",h)}}}}Wy();const l0={url:iy,storageKey:oy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ay,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function fh(s,n,r){return await r()}const kr={};class Os{get jwks(){var n,r;return(r=(n=kr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){kr[this.storageKey]=Object.assign(Object.assign({},kr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=kr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){kr[this.storageKey]=Object.assign(Object.assign({},kr[this.storageKey]),{cachedAt:n})}constructor(n){var r,o,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},l0),n);if(this.storageKey=c.storageKey,this.instanceID=(r=Os.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Os.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&Ge()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new zy({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Bh(c.fetch),this.lock=c.lock||fh,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&Ge()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=Fy:this.lock=fh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new a0(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:Uh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ch(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=ch(this.memoryStorage)),Ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h);try{await this._notifyAllSubscribers(h.data.event,h.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}c.skipAutoInitialize||this.initialize().catch(h=>{this._debug("#initialize()","error",h)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Lh}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},o="none";if(Ge()&&(r=ky(window.location.href),this._isImplicitGrantCallback(r)?o="implicit":await this._isPKCECallback(r)&&(o="pkce")),Ge()&&this.detectSessionInUrl&&o!=="none"){const{data:l,error:c}=await this._getSessionFromURL(r,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),hy(c)){const m=(n=c.details)===null||n===void 0?void 0:n.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:h,redirectType:f}=l;return this._debug("#_initialize()","detected session in URL",h,"redirect type",f),await this._saveSession(h),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return G(r)?this._returnResult({error:r}):this._returnResult({error:new Un("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,o,l;try{const c=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(r=n==null?void 0:n.options)===null||r===void 0?void 0:r.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(l=n==null?void 0:n.options)===null||l===void 0?void 0:l.captchaToken}},xform:Pt}),{data:h,error:f}=c;if(f||!h)return this._returnResult({data:{user:null,session:null},error:f});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(G(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(n){var r,o,l;try{let c;if("email"in n){const{email:v,password:x,options:E}=n;let k=null,C=null;this.flowType==="pkce"&&([k,C]=await yr(this.storage,this.storageKey)),c=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:v,password:x,data:(r=E==null?void 0:E.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:k,code_challenge_method:C},xform:Pt})}else if("phone"in n){const{phone:v,password:x,options:E}=n;c=await Z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(o=E==null?void 0:E.data)!==null&&o!==void 0?o:{},channel:(l=E==null?void 0:E.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:Pt})}else throw new Ki("You must provide either an email or phone number and a password");const{data:h,error:f}=c;if(f||!h)return await Ke(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=h.session,g=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(c){if(await Ke(this.storage,`${this.storageKey}-code-verifier`),G(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(n){try{let r;if("email"in n){const{email:c,password:h,options:f}=n;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:h,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:lh})}else if("phone"in n){const{phone:c,password:h,options:f}=n;r=await Z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:h,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:lh})}else throw new Ki("You must provide either an email or phone number and a password");const{data:o,error:l}=r;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const c=new vr;return this._returnResult({data:{user:null,session:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:l})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,o,l,c;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(o=n.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=n.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,o,l,c,h,f,m,g,v,x,E;let k,C;if("message"in n)k=n.message,C=n.signature;else{const{chain:P,wallet:N,statement:L,options:M}=n;let R;if(Ge())if(typeof N=="object")R=N;else{const ve=window;if("ethereum"in ve&&typeof ve.ethereum=="object"&&"request"in ve.ethereum&&typeof ve.ethereum.request=="function")R=ve.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=N}const B=new URL((r=M==null?void 0:M.url)!==null&&r!==void 0?r:window.location.href),ne=await R.request({method:"eth_requestAccounts"}).then(ve=>ve).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ne||ne.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const J=Fh(ne[0]);let se=(o=M==null?void 0:M.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!se){const ve=await R.request({method:"eth_chainId"});se=qy(ve)}const ye={domain:B.host,address:J,statement:L,uri:B.href,version:"1",chainId:se,nonce:(l=M==null?void 0:M.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(h=(c=M==null?void 0:M.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(f=M==null?void 0:M.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=M==null?void 0:M.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(g=M==null?void 0:M.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(v=M==null?void 0:M.signInWithEthereum)===null||v===void 0?void 0:v.resources};k=Vy(ye),C=await R.request({method:"personal_sign",params:[Hy(k),J]})}try{const{data:P,error:N}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:C},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(E=n.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Pt});if(N)throw N;if(!P||!P.session||!P.user){const L=new vr;return this._returnResult({data:{user:null,session:null},error:L})}return P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),this._returnResult({data:Object.assign({},P),error:N})}catch(P){if(G(P))return this._returnResult({data:{user:null,session:null},error:P});throw P}}async signInWithSolana(n){var r,o,l,c,h,f,m,g,v,x,E,k;let C,P;if("message"in n)C=n.message,P=n.signature;else{const{chain:N,wallet:L,statement:M,options:R}=n;let B;if(Ge())if(typeof L=="object")B=L;else{const J=window;if("solana"in J&&typeof J.solana=="object"&&("signIn"in J.solana&&typeof J.solana.signIn=="function"||"signMessage"in J.solana&&typeof J.solana.signMessage=="function"))B=J.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof L!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=L}const ne=new URL((r=R==null?void 0:R.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in B&&B.signIn){const J=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:ne.host,uri:ne.href}),M?{statement:M}:null));let se;if(Array.isArray(J)&&J[0]&&typeof J[0]=="object")se=J[0];else if(J&&typeof J=="object"&&"signedMessage"in J&&"signature"in J)se=J;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in se&&"signature"in se&&(typeof se.signedMessage=="string"||se.signedMessage instanceof Uint8Array)&&se.signature instanceof Uint8Array)C=typeof se.signedMessage=="string"?se.signedMessage:new TextDecoder().decode(se.signedMessage),P=se.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${ne.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...M?["",M,""]:[""],"Version: 1",`URI: ${ne.href}`,`Issued At: ${(l=(o=R==null?void 0:R.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=R==null?void 0:R.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((f=R==null?void 0:R.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((m=R==null?void 0:R.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((g=R==null?void 0:R.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((x=(v=R==null?void 0:R.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||x===void 0)&&x.length?["Resources",...R.signInWithSolana.resources.map(se=>`- ${se}`)]:[]].join(`
`);const J=await B.signMessage(new TextEncoder().encode(C),"utf8");if(!J||!(J instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");P=J}}try{const{data:N,error:L}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Fn(P)},!((E=n.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(k=n.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Pt});if(L)throw L;if(!N||!N.session||!N.user){const M=new vr;return this._returnResult({data:{user:null,session:null},error:M})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:L})}catch(N){if(G(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(n){const r=await Dn(this.storage,`${this.storageKey}-code-verifier`),[o,l]=(r??"").split("/");try{if(!o&&this.flowType==="pkce")throw new fy;const{data:c,error:h}=await Z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:o},xform:Pt});if(await Ke(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!c||!c.session||!c.user){const f=new vr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:h})}catch(c){if(await Ke(this.storage,`${this.storageKey}-code-verifier`),G(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(n){try{const{options:r,provider:o,token:l,access_token:c,nonce:h}=n,f=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:l,access_token:c,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Pt}),{data:m,error:g}=f;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m||!m.session||!m.user){const v=new vr;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:g})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,o,l,c,h;try{if("email"in n){const{email:f,options:m}=n;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await yr(this.storage,this.storageKey));const{error:x}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},create_user:(o=m==null?void 0:m.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:v},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in n){const{phone:f,options:m}=n,{data:g,error:v}=await Z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(l=m==null?void 0:m.data)!==null&&l!==void 0?l:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(h=m==null?void 0:m.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:v})}throw new Ki("You must provide either an email or phone number.")}catch(f){if(await Ke(this.storage,`${this.storageKey}-code-verifier`),G(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(n){var r,o;try{let l,c;"options"in n&&(l=(r=n.options)===null||r===void 0?void 0:r.redirectTo,c=(o=n.options)===null||o===void 0?void 0:o.captchaToken);const{data:h,error:f}=await Z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:Pt});if(f)throw f;if(!h)throw new Error("An error occurred on token verification.");const m=h.session,g=h.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:g,session:m},error:null})}catch(l){if(G(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(n){var r,o,l,c,h;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await yr(this.storage,this.storageKey));const g=await Z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&o!==void 0?o:void 0}),!((l=n==null?void 0:n.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:My});return!((c=g.data)===null||c===void 0)&&c.url&&Ge()&&!(!((h=n.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(f){if(await Ke(this.storage,`${this.storageKey}-code-verifier`),G(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;if(o)throw o;if(!r)throw new pt;const{error:l}=await Z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(n){if(G(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const r=`${this.url}/resend`;if("email"in n){const{email:o,type:l,options:c}=n,{error:h}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{email:o,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in n){const{phone:o,type:l,options:c}=n,{data:h,error:f}=await Z(this.fetch,"POST",r,{headers:this.headers,body:{phone:o,type:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:f})}throw new Ki("You must provide either an email or phone number and a type")}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await o,await r()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=r();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const r=await Dn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const o=n.expires_at?n.expires_at*1e3-Date.now()<dl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",n.expires_at),!o){if(this.userStorage){const h=await Dn(this.userStorage,this.storageKey+"-user");h!=null&&h.user?n.user=h.user:n.user=pl()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};n.user=Iy(n.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:_n}):await this._useSession(async r=>{var o,l,c;const{data:h,error:f}=r;if(f)throw f;return!(!((o=h.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pt}:await Z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:_n})})}catch(r){if(G(r))return hl(r)&&(await this._removeSession(),await Ke(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async o=>{const{data:l,error:c}=o;if(c)throw c;if(!l.session)throw new pt;const h=l.session;let f=null,m=null;this.flowType==="pkce"&&n.email!=null&&([f,m]=await yr(this.storage,this.storageKey));const{data:g,error:v}=await Z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:f,code_challenge_method:m}),jwt:h.access_token,xform:_n});if(v)throw v;return h.user=g.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(o){if(await Ke(this.storage,`${this.storageKey}-code-verifier`),G(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new pt;const r=Date.now()/1e3;let o=r,l=!0,c=null;const{payload:h}=Ji(n.access_token);if(h.exp&&(o=h.exp,l=o<=r),l){const{data:f,error:m}=await this._callRefreshToken(n.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:m}=await this._getUser(n.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:n.access_token,refresh_token:n.refresh_token,user:f.user,token_type:"bearer",expires_in:o-r,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(r){if(G(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var o;if(!n){const{data:h,error:f}=r;if(f)throw f;n=(o=h.session)!==null&&o!==void 0?o:void 0}if(!(n!=null&&n.refresh_token))throw new pt;const{data:l,error:c}=await this._callRefreshToken(n.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(G(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!Ge())throw new Gi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Gi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new th("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new th("No code detected.");const{data:M,error:R}=await this._exchangeCodeForSession(n.code);if(R)throw R;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:M.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:l,access_token:c,refresh_token:h,expires_in:f,expires_at:m,token_type:g}=n;if(!c||!f||!h||!g)throw new Gi("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(f);let E=v+x;m&&(E=parseInt(m));const k=E-v;k*1e3<=xr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${k}s, should have been closer to ${x}s`);const C=E-x;v-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,E,v):v-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,E,v);const{data:P,error:N}=await this._getUser(c);if(N)throw N;const L={provider_token:o,provider_refresh_token:l,access_token:c,expires_in:x,expires_at:E,refresh_token:h,token_type:g,user:P.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:L,redirectType:n.type},error:null})}catch(o){if(G(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const r=await Dn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c&&!hl(c))return this._returnResult({error:c});const h=(o=l.session)===null||o===void 0?void 0:o.access_token;if(h){const{error:f}=await this.admin.signOut(h,n);if(f&&!(dy(f)&&(f.status===404||f.status===401||f.status===403)||hl(f)))return this._returnResult({error:f})}return n!=="others"&&(await this._removeSession(),await Ke(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const r=_y(),o={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:o}}}async _emitInitialSession(n){return await this._useSession(async r=>{var o,l;try{const{data:{session:c},error:h}=r;if(h)throw h;await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",n,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",c),console.error(c)}})}async resetPasswordForEmail(n,r={}){let o=null,l=null;this.flowType==="pkce"&&([o,l]=await yr(this.storage,this.storageKey,!0));try{return await Z(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:o,code_challenge_method:l,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(c){if(await Ke(this.storage,`${this.storageKey}-code-verifier`),G(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var n;try{const{data:r,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{const{data:o,error:l}=await this._useSession(async c=>{var h,f,m,g,v;const{data:x,error:E}=c;if(E)throw E;const k=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(h=n.options)===null||h===void 0?void 0:h.redirectTo,scopes:(f=n.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=n.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await Z(this.fetch,"GET",k,{headers:this.headers,jwt:(v=(g=x.session)===null||g===void 0?void 0:g.access_token)!==null&&v!==void 0?v:void 0})});if(l)throw l;return Ge()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:n.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(G(o))return this._returnResult({data:{provider:n.provider,url:null},error:o});throw o}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var o;try{const{error:l,data:{session:c}}=r;if(l)throw l;const{options:h,provider:f,token:m,access_token:g,nonce:v}=n,x=await Z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=c==null?void 0:c.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:m,access_token:g,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Pt}),{data:E,error:k}=x;return k?this._returnResult({data:{user:null,session:null},error:k}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new vr}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:k}))}catch(l){if(await Ke(this.storage,`${this.storageKey}-code-verifier`),G(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var o,l;const{data:c,error:h}=r;if(h)throw h;return await Z(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){const r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{const o=Date.now();return await Ey(async l=>(l>0&&await xy(200*Math.pow(2,l-1)),this._debug(r,"refreshing attempt",l),await Z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Pt})),(l,c)=>{const h=200*Math.pow(2,l);return c&&fl(c)&&Date.now()+h-o<xr})}catch(o){if(this._debug(r,"error",o),G(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){const o=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",o),Ge()&&!r.skipBrowserRedirect&&window.location.assign(o),{data:{provider:n,url:o},error:null}}async _recoverAndRefresh(){var n,r;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const l=await Dn(this.storage,this.storageKey);if(l&&this.userStorage){let h=await Dn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:l.user},await Er(this.userStorage,this.storageKey+"-user",h)),l.user=(n=h==null?void 0:h.user)!==null&&n!==void 0?n:pl()}else if(l&&!l.user&&!l.user){const h=await Dn(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(l.user=h.user,await Ke(this.storage,this.storageKey+"-user"),await Er(this.storage,this.storageKey,l)):l.user=pl()}if(this._debug(o,"session from storage",l),!this._isValidSession(l)){this._debug(o,"session is not valid"),l!==null&&await this._removeSession();return}const c=((r=l.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<dl;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${dl}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:h}=await this._callRefreshToken(l.refresh_token);h&&(console.error(h),fl(h)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:f}=await this._getUser(l.access_token);!f&&(h!=null&&h.user)?(l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(o,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(o,"error",l),console.error(l);return}finally{this._debug(o,"end")}}async _callRefreshToken(n){var r,o;if(!n)throw new pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new lo;const{data:c,error:h}=await this._refreshAccessToken(n);if(h)throw h;if(!c.session)throw new pt;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(l,"error",c),G(c)){const h={data:null,error:c};return fl(c)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,r,o=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",r,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:n,session:r});const c=[],h=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(n,r)}catch(m){c.push(m)}});if(await Promise.all(h),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Ke(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},n),o=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&r.user&&await Er(this.userStorage,this.storageKey+"-user",{user:r.user});const l=Object.assign({},r);delete l.user;const c=oh(l);await Er(this.storage,this.storageKey,c)}else{const l=oh(r);await Er(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ke(this.storage,this.storageKey),await Ke(this.storage,this.storageKey+"-code-verifier"),await Ke(this.storage,this.storageKey+"-user"),this.userStorage&&await Ke(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),xr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async r=>{const{data:{session:o}}=r;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((o.expires_at*1e3-n)/xr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${xr}ms, refresh threshold is ${Sl} ticks`),l<=Sl&&await this._callRefreshToken(o.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof zh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,o){const l=[`provider=${encodeURIComponent(r)}`];if(o!=null&&o.redirectTo&&l.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&l.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,h]=await yr(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(h)}`});l.push(f.toString())}if(o!=null&&o.queryParams){const c=new URLSearchParams(o.queryParams);l.push(c.toString())}return o!=null&&o.skipBrowserRedirect&&l.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;return c?this._returnResult({data:null,error:c}):await Z(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var o,l;const{data:c,error:h}=r;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:m,error:g}=await Z(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(n.factorType==="totp"&&m.type==="totp"&&(!((l=m==null?void 0:m.totp)===null||l===void 0)&&l.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Zy(n.webauthn.credential_response):e0(n.webauthn.credential_response)})}:{code:n.code}),{data:f,error:m}=await Z(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:h,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var o;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const h=await Z(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(o=l==null?void 0:l.session)===null||o===void 0?void 0:o.access_token});if(h.error)return h;const{data:f}=h;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Qy(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:Xy(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){const{data:r,error:o}=await this._challenge({factorId:n.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;const{data:{user:r},error:o}=await this.getUser();if(o)return{data:null,error:o};const l={all:[],phone:[],totp:[],webauthn:[]};for(const c of(n=r==null?void 0:r.factors)!==null&&n!==void 0?n:[])l.all.push(c),c.status==="verified"&&l[c.factor_type].push(c);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,o,l,c;if(n)try{const{payload:k}=Ji(n);let C=null;k.aal&&(C=k.aal);let P=C;const{data:{user:N},error:L}=await this.getUser(n);if(L)return this._returnResult({data:null,error:L});((o=(r=N==null?void 0:N.factors)===null||r===void 0?void 0:r.filter(B=>B.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(P="aal2");const R=k.amr||[];return{data:{currentLevel:C,nextLevel:P,currentAuthenticationMethods:R},error:null}}catch(k){if(G(k))return this._returnResult({data:null,error:k});throw k}const{data:{session:h},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!h)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=Ji(h.access_token);let g=null;m.aal&&(g=m.aal);let v=g;((c=(l=h.user.factors)===null||l===void 0?void 0:l.filter(k=>k.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(v="aal2");const E=m.amr||[];return{data:{currentLevel:g,nextLevel:v,currentAuthenticationMethods:E},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;return l?this._returnResult({data:null,error:l}):o?await Z(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:o.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new pt})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new pt});const h=await Z(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return h.data&&h.data.redirect_url&&Ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(G(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(n,r){try{return await this._useSession(async o=>{const{data:{session:l},error:c}=o;if(c)return this._returnResult({data:null,error:c});if(!l)return this._returnResult({data:null,error:new pt});const h=await Z(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return h.data&&h.data.redirect_url&&Ge()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(o){if(G(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?this._returnResult({data:null,error:o}):r?await Z(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new pt})})}catch(n){if(G(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{const{data:{session:o},error:l}=r;return l?this._returnResult({data:null,error:l}):o?(await Z(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pt})})}catch(r){if(G(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let o=r.keys.find(f=>f.kid===n);if(o)return o;const l=Date.now();if(o=this.jwks.keys.find(f=>f.kid===n),o&&this.jwks_cached_at+uy>l)return o;const{data:c,error:h}=await Z(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,o=c.keys.find(f=>f.kid===n),!o)?null:o}async getClaims(n,r={}){try{let o=n;if(!o){const{data:k,error:C}=await this.getSession();if(C||!k.session)return this._returnResult({data:null,error:C});o=k.session.access_token}const{header:l,payload:c,signature:h,raw:{header:f,payload:m}}=Ji(o);r!=null&&r.allowExpired||Ny(c.exp);const g=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!g){const{error:k}=await this.getUser(o);if(k)throw k;return{data:{claims:c,header:l,signature:h},error:null}}const v=Ry(l.alg),x=await crypto.subtle.importKey("jwk",g,v,!0,["verify"]);if(!await crypto.subtle.verify(v,x,h,yy(`${f}.${m}`)))throw new bl("Invalid JWT signature");return{data:{claims:c,header:l,signature:h},error:null}}catch(o){if(G(o))return this._returnResult({data:null,error:o});throw o}}}Os.nextInstanceID={};const u0=Os,c0="2.97.0";let ws="";typeof Deno<"u"?ws="deno":typeof document<"u"?ws="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ws="react-native":ws="node";const d0={"X-Client-Info":`supabase-js-${ws}/${c0}`},h0={headers:d0},f0={schema:"public"},p0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},m0={};function js(s){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},js(s)}function g0(s,n){if(js(s)!="object"||!s)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var o=r.call(s,n);if(js(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function v0(s){var n=g0(s,"string");return js(n)=="symbol"?n:n+""}function y0(s,n,r){return(n=v0(n))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r,s}function ph(s,n){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(s);n&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),r.push.apply(r,o)}return r}function Ne(s){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ph(Object(r),!0).forEach(function(o){y0(s,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):ph(Object(r)).forEach(function(o){Object.defineProperty(s,o,Object.getOwnPropertyDescriptor(r,o))})}return s}const w0=s=>s?(...n)=>s(...n):(...n)=>fetch(...n),_0=()=>Headers,k0=(s,n,r)=>{const o=w0(r),l=_0();return async(c,h)=>{var f;const m=(f=await n())!==null&&f!==void 0?f:s;let g=new l(h==null?void 0:h.headers);return g.has("apikey")||g.set("apikey",s),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),o(c,Ne(Ne({},h),{},{headers:g}))}};function S0(s){return s.endsWith("/")?s:s+"/"}function x0(s,n){var r,o;const{db:l,auth:c,realtime:h,global:f}=s,{db:m,auth:g,realtime:v,global:x}=n,E={db:Ne(Ne({},m),l),auth:Ne(Ne({},g),c),realtime:Ne(Ne({},v),h),storage:{},global:Ne(Ne(Ne({},x),f),{},{headers:Ne(Ne({},(r=x==null?void 0:x.headers)!==null&&r!==void 0?r:{}),(o=f==null?void 0:f.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return s.accessToken?E.accessToken=s.accessToken:delete E.accessToken,E}function E0(s){const n=s==null?void 0:s.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(S0(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var b0=class extends u0{constructor(s){super(s)}},T0=class{constructor(s,n,r){var o,l;this.supabaseUrl=s,this.supabaseKey=n;const c=E0(s);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const h=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:f0,realtime:m0,auth:Ne(Ne({},p0),{},{storageKey:h}),global:h0},m=x0(r??{},f);if(this.storageKey=(o=m.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(v,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=m.auth)!==null&&g!==void 0?g:{},this.headers,m.global.fetch)}this.fetch=k0(n,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Ne({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new dv(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch,timeout:m.db.timeout,urlLengthLimit:m.db.urlLengthLimit}),this.storage=new sy(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new rv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,n,r;if(s.accessToken)return await s.accessToken();const{data:o}=await s.auth.getSession();return(n=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:l,storageKey:c,flowType:h,lock:f,debug:m,throwOnError:g},v,x){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b0({url:this.authUrl.href,headers:Ne(Ne({},E),v),storageKey:c,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:l,flowType:h,lock:f,debug:m,throwOnError:g,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Ov(this.realtimeUrl.href,Ne(Ne({},s),{},{params:Ne(Ne({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const C0=(s,n,r)=>new T0(s,n,r);function O0(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const n=s.version;if(n==null)return!1;const r=n.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}O0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const j0="https://qxugetmtuhrqyasbjqmm.supabase.co",P0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF4dWdldG10dWhycXlhc2JqcW1tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE0NTY4MjQsImV4cCI6MjA4NzAzMjgyNH0.DcbP0DBrRzxQQXh9_qP1lAlhXhxTCNOyTDA1e-TWKiY",Bn=C0(j0,P0),Yi={async getAll(){const{data:s,error:n}=await Bn.from("bookings").select("*").order("check_in",{ascending:!0});if(n)throw n;return s??[]},async getById(s){const{data:n,error:r}=await Bn.from("bookings").select("*").eq("id",s).single();if(r)throw r;return n},async create(s){const{data:n,error:r}=await Bn.from("bookings").insert(s).select().single();if(r)throw r;return n},async update(s,n){const{data:r,error:o}=await Bn.from("bookings").update({...n,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(o)throw o;return r},async delete(s){const{error:n}=await Bn.from("bookings").delete().eq("id",s);if(n)throw n}};function N0(){const[s,n]=ge.useState([]),[r,o]=ge.useState(!0),[l,c]=ge.useState(null),h=ge.useCallback(async()=>{try{o(!0);const k=await Yi.getAll();n(k),c(null)}catch(k){c(k instanceof Error?k.message:"Failed to fetch bookings")}finally{o(!1)}},[]);ge.useEffect(()=>{h();const k=Bn.channel("bookings-changes").on("postgres_changes",{event:"*",schema:"public",table:"bookings"},()=>{h()}).subscribe();return()=>{Bn.removeChannel(k)}},[h]);const f=async k=>{const C=await Yi.create(k);return n(P=>[...P,C].sort((N,L)=>new Date(N.check_in).getTime()-new Date(L.check_in).getTime())),C},m=async(k,C)=>{const P=await Yi.update(k,C);return n(N=>N.map(L=>L.id===k?P:L)),P},g=async k=>{await Yi.delete(k),n(C=>C.filter(P=>P.id!==k))},v=ge.useCallback((k,C)=>s.filter(P=>{const N=Te(P.check_in),L=Te(P.check_out);return Id({start:N,end:L},{start:k,end:C})}),[s]),x=ge.useCallback((k,C,P)=>{const N=new Map,L=Te(k),M=Te(C);return s.filter(R=>R.id!==P).forEach(R=>{const B=Te(R.check_in),ne=Te(R.check_out);Id({start:B,end:ne},{start:L,end:M})&&R.rooms.forEach(J=>{N.set(J.name,R.family_member)})}),N},[s]),E=ge.useCallback(()=>{const k=new Date;return k.setHours(0,0,0,0),s.filter(C=>Te(C.check_out)>=k)},[s]);return{bookings:s,loading:r,error:l,createBooking:f,updateBooking:m,deleteBooking:g,getBookingsForDateRange:v,getConflictingRooms:x,getUpcomingBookings:E,refresh:h}}function R0(){const[s,n]=ge.useState("calendar"),[r,o]=ge.useState({type:"none"}),[l,c]=ge.useState({checkIn:"",checkOut:""}),[h,f]=ge.useState(null),{bookings:m,loading:g,error:v,createBooking:x,updateBooking:E,deleteBooking:k,getConflictingRooms:C}=N0(),P=C(l.checkIn,l.checkOut,r.type==="edit"?r.booking.id:void 0),N=ge.useCallback((ve,ae)=>{c({checkIn:ve,checkOut:ae})},[]),L=()=>{o({type:"new"})},M=ve=>{o({type:"view",booking:ve})},R=()=>{r.type==="view"&&o({type:"edit",booking:r.booking})},B=()=>{o({type:"none"}),c({checkIn:"",checkOut:""})},ne=async ve=>{r.type==="edit"?await E(r.booking.id,ve):await x(ve),B()},J=async()=>{r.type==="view"&&f(r.booking.id)},se=async()=>{h&&(await k(h),f(null),B())},ye=()=>{switch(r.type){case"new":return"Nouveau sjour";case"view":return"Dtails du sjour";case"edit":return"Modifier le sjour";default:return""}};return v?w.jsx("div",{className:"min-h-screen bg-cream flex items-center justify-center p-4",children:w.jsxs("div",{className:"card max-w-md text-center",children:[w.jsx("div",{className:"text-terracotta-500 mb-4",children:w.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),w.jsx("h2",{className:"font-display text-xl font-semibold text-charcoal mb-2",children:"Erreur de connexion"}),w.jsx("p",{className:"text-wood-600 mb-4",children:v}),w.jsx("button",{onClick:()=>window.location.reload(),className:"btn-primary",children:"Ressayer"})]})}):w.jsxs("div",{className:"min-h-screen bg-cream bg-wood-grain",children:[w.jsx(Yp,{currentView:s,onViewChange:n}),w.jsx("main",{className:"max-w-6xl mx-auto px-4 py-8",children:g?w.jsx("div",{className:"flex items-center justify-center py-20",children:w.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-forest-500 border-t-transparent"})}):s==="calendar"?w.jsx(Jg,{bookings:m,onBookingClick:M,onNewBooking:L}):w.jsx(Yg,{bookings:m,onBookingClick:M})}),w.jsxs(Wd,{isOpen:r.type!=="none",onClose:B,title:ye(),children:[r.type==="view"&&w.jsx(Zg,{booking:r.booking,onEdit:R,onDelete:J,onClose:B}),(r.type==="new"||r.type==="edit")&&w.jsx(Xg,{booking:r.type==="edit"?r.booking:void 0,conflictingRooms:P,onSubmit:ne,onCancel:B,onDateChange:N})]}),w.jsx(Wd,{isOpen:h!==null,onClose:()=>f(null),title:"Confirmer la suppression",children:w.jsxs("div",{className:"text-center py-4",children:[w.jsx("svg",{className:"w-12 h-12 mx-auto text-terracotta-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),w.jsx("p",{className:"text-charcoal mb-6",children:"tes-vous sr de vouloir supprimer ce sjour ?"}),w.jsxs("div",{className:"flex gap-3 justify-center",children:[w.jsx("button",{onClick:()=>f(null),className:"btn-secondary",children:"Annuler"}),w.jsx("button",{onClick:se,className:"btn-danger",children:"Supprimer"})]})]})}),w.jsx("footer",{className:"border-t border-wood-200 mt-8",children:w.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6 text-center text-sm text-wood-500",children:w.jsx("p",{children:"Chalet Myosotis  Chamonix-Mont-Blanc"})})})]})}Jp.createRoot(document.getElementById("root")).render(w.jsx(ge.StrictMode,{children:w.jsx(R0,{})}));
